(()=>{"use strict";var e={d:(t,n)=>{for(var c in n)e.o(n,c)&&!e.o(t,c)&&Object.defineProperty(t,c,{enumerable:!0,get:n[c]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{qm:()=>s,M_:()=>a,Sx:()=>r,wc:()=>l,QW:()=>i});const n=(()=>{const e=()=>JSON.parse(localStorage.getItem("projects")||"[]");return{getProjects:e,saveProject:t=>{const n=e(),c=n.find((e=>e.id==t.id));c?(c.projectName=t.projectName,c.tasks=t.tasks):(t.id=Math.floor(1e6*Math.random()),n.push(t)),localStorage.setItem("projects",JSON.stringify(n))},deleteProject:t=>{const n=e().filter((e=>e.id!=t));localStorage.setItem("projects",JSON.stringify(n))}}})(),c=(()=>{const e=()=>{const e=n.getProjects();t(e)},t=e=>{i(e)},c=e=>{l(e)};return{onProjectSelect:e=>{const t=n.getProjects().find((t=>t.id==e)),r=document.querySelector(`[data-project-id='${t.id}']`);c(r)},onProjectAdd:t=>{const r={projectName:t,tasks:"[]"};n.saveProject(r),e();const o=document.querySelector(`[data-project-id='${r.id}']`);c(o)},onProjectEdit:(t,c,r)=>{n.saveProject({id:t,projectName:c,tasks:r}),e()}}})(),r=()=>({createListElement:e=>{const t=document.createElement("li");return t.setAttribute("class",e),t},createSpanElement:e=>{const t=document.createElement("span");return t.classList.add(e),t},createImageElement:(e,t)=>{const n=document.createElement("img");return n.classList.add(t),n.setAttribute("src",e),n.setAttribute("draggable","false"),n},createInputField:e=>{const t=document.createElement("input");return t.setAttribute("type","text"),t.setAttribute("placeholder",e),t.setAttribute("id","user-input"),t.required=!0,t},createForm:()=>document.createElement("form"),createDiv:e=>{const t=document.createElement("div");return t.setAttribute("class",e),t}}),o=()=>{const e=r(),t=e.createSpanElement("icons"),n=e.createImageElement("images/edit-icon.svg","edit-icon"),c=e.createImageElement("images/delete-icon.svg","delete-icon");return n.classList.add("edit-project"),c.classList.add("delete-project"),t.append(n,c),t},a=()=>{const e=r(),t=document.querySelector(".project-list"),n=e.createListElement("project-item"),c=e.createForm(),a=e.createInputField("Project name...");c.append(a);const s=o();n.append(c,s),t.insertBefore(n,t.lastElementChild)},s=()=>{const e=r(),t=document.querySelector(".project-list"),n=t.childElementCount-2,c=t.children[n].textContent,o=document.querySelector("#writing-area"),a=e.createDiv("project"),s=e.createDiv("skip-line"),d=e.createDiv("project-heading"),i=document.createElement("h2");i.setAttribute("class","notepad-text"),i.textContent=c;const l=document.createElement("h3");l.setAttribute("class","notepad-text"),l.textContent="Due Date";const m=document.createElement("ul");m.classList.add("notepad-text","todos");const u=e.createListElement("task"),p=e.createSpanElement("add-task"),E=e.createImageElement("images/add-icon.svg","add-icon");p.append(E,"Add Task"),u.append(p),m.append(u,s),d.append(i,l),a.append(d,m),o.append(a)},d=(e,t)=>{const n=r(),c=n.createListElement("project-item");c.setAttribute("data-project-id",e);const a=n.createSpanElement("project-name");a.textContent=t;const s=o();return c.append(a,s),c},i=e=>{const t=document.querySelector(".project-list"),n=document.querySelector("[data-add-project]");[].slice.call(t.children).forEach((e=>{e.classList.contains("project-item")&&e.remove()}));for(const c of e){const e=d(c.id,c.projectName);t.insertBefore(e,n)}t.querySelectorAll(".project-item").forEach((e=>{e.addEventListener("click",(()=>{c.onProjectSelect(e.dataset.projectId)}))}))},l=e=>{const t=document.querySelector(".active");t&&t.classList.remove("active"),e.classList.add("active"),e.children.item(0)},m=()=>null!=document.querySelector("#user-input"),u=()=>{const e=document.querySelector("#user-input"),t=e.parentElement.parentElement,n=r().createSpanElement("project-name"),c=e.value.trim();c&&(n.textContent=c,e.parentElement.remove(),t.insertBefore(n,t.childNodes[0]))},p=()=>{if(m())return;a();const e=document.querySelector("#user-input"),t=e.parentElement,n=t.parentElement;e.addEventListener("blur",(function(){""!=e.value&&u(),m()||s();const t=n.firstElementChild.textContent;c.onProjectAdd(t)})),t.addEventListener("submit",(function(e){e.preventDefault(),u(),m()||s();const t=n.firstElementChild.textContent;c.onProjectAdd(t)}))};window.onload=()=>{const e=n.getProjects();i(e)},(()=>{const e=document.getElementById("bars-icon-mobile");screen.width<=1024&&e.classList.contains("hidden")&&e.classList.toggle("hidden");const t=document.getElementById("sidebar"),n=()=>{t.classList.toggle("toggle-sidebar"),screen.width<=1024&&e.classList.toggle("hidden")};document.querySelectorAll(".bars-icon").forEach((e=>{e.addEventListener("click",n)}))})(),document.addEventListener("click",(e=>{e.target.closest(".delete-project")&&e.target.closest(".project-item").remove()})),document.querySelector("[data-add-project]").addEventListener("click",p),document.addEventListener("click",(e=>{e.target.classList.contains("edit-project")&&(e=>{if(m())return;const t=r().createForm(),n=r().createInputField("Project name..."),o=e.target.parentElement.previousElementSibling;n.value=o.textContent,o.remove(),t.append(n);const a=e.target.closest(".project-item");a.insertBefore(t,a.childNodes[0]);const s=document.querySelector("#user-input"),d=a.dataset.projectId;s.addEventListener("blur",(function(){""!=s.value&&u();const e=a.firstElementChild.textContent;c.onProjectEdit(d,e,"beans")})),t.addEventListener("submit",(function(e){e.preventDefault(),u();const t=a.firstElementChild.textContent;c.onProjectEdit(d,t,"beans")}))})(e)})),document.addEventListener("click",(e=>{e.target.classList.contains("task-item")&&e.target.parentElement.classList.toggle("completed")})),document.addEventListener("click",(e=>{e.target.classList.contains("add-task")&&(console.log("add task"),(()=>{const e=t.default.createSpanElement("task-item");e.textContent="user input";const n=t.default.createSpanElement("icons"),c=t.default.createImageElement("images/edit-icon.svg","edit-icon"),r=t.default.createImageElement("images/delete-icon.svg","delete-icon");n.append(c,r),e.append(n)})())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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bEMsWUFDbEQsZ0JBQXVCOUMsRUFBV2xCLEVBQWEsYUNwRDNDbUgsQ0FBWWhCLE1BTXBCOUUsU0FBU2tFLGlCQUFpQixTQUFVWSxJQUM1QkEsRUFBRVksT0FBTzdFLFVBQVVpRCxTQUFTLGNBQ1JnQixFQUFFWSxPQUFPbkIsY0M1Q3pCMUQsVUFBVXlFLE9BQU8sZ0JEaUQ3QnRGLFNBQVNrRSxpQkFBaUIsU0FBVVksSUFDNUJBLEVBQUVZLE9BQU83RSxVQUFVaUQsU0FBUyxjQUM1QmlDLFFBQVFDLElBQUksWUMvQ0gsTUFNakIsTUFBTUMsRUFBVyw0QkFBaUMsYUFDbERBLEVBQVN0RCxZQUFjLGFBRXZCLE1BQU1oQixFQUFXLDRCQUFpQyxTQUU1Q0MsRUFBVyw2QkFBa0MsdUJBQXdCLGFBQ3JFQyxFQUFhLDZCQUFrQyx5QkFBMEIsZUFFL0VGLEVBQVNHLE9BQU9GLEVBQVVDLEdBQzFCb0UsRUFBU25FLE9BQU9ILElEaUNSdUUsUSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9zdG9yYWdlLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9oYW5kbGVycy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvY3JlYXRlRE9NRWxlbWVudHMuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3RzLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdGFza3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJcbmNvbnN0IHVwZGF0ZVN0b3JhZ2UgPSAoKSA9PiB7XG4gICAgXG4gICAgY29uc3QgZ2V0UHJvamVjdHMgPSAoKSA9PiB7XG4gICAgICAgIC8vIGNyZWF0ZXMgYW4gYXJyYXkgb2Ygb2JqZWN0cyBcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0cycpIHx8ICdbXScpO1xuICAgICAgICByZXR1cm4gcHJvamVjdHM7XG4gICAgfVxuXG4gICAgY29uc3Qgc2F2ZVByb2plY3QgPSAocHJvamVjdFRvU2F2ZSkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IGdldFByb2plY3RzKCk7XG5cbiAgICAgICAgLy8gZmluZCBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3Qgb2JqZWN0IHRoYXQgbWF0Y2hlcyB0aGUgaWRcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBwcm9qZWN0cy5maW5kKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PSBwcm9qZWN0VG9TYXZlLmlkKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgZXhpc3RpbmcucHJvamVjdE5hbWUgPSBwcm9qZWN0VG9TYXZlLnByb2plY3ROYW1lO1xuICAgICAgICAgICAgZXhpc3RpbmcudGFza3MgPSBwcm9qZWN0VG9TYXZlLnRhc2tzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcHJvamVjdFRvU2F2ZS5pZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApO1xuICAgICAgICAgICAgLy8gQWRkIHByb2plY3ROYW1lXG4gICAgICAgICAgICAvLyBBZGQgVGFza3MgYXJyYXkgY29udGFpbmluZyBhbm90aGVyIGFycmF5IHdoaWNoIGluY2x1ZGVzIHRhc2ssIHByaW9yaXR5LCBkdWVEYXRlLCBhbmQgdHJ1ZS9mYWxzZSBmb3IgY29tcGxldGVkIG9yIG5vdFxuICAgICAgICAgICAgcHJvamVjdHMucHVzaChwcm9qZWN0VG9TYXZlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KHByb2plY3RzKSk7XG4gICAgfVxuXG4gICBjb25zdCBkZWxldGVQcm9qZWN0ID0gKGlkKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gZ2V0UHJvamVjdHMoKTtcbiAgICAgICAgY29uc3QgdXBkYXRlZFByb2plY3RMaXN0ID0gcHJvamVjdHMuZmlsdGVyKHByb2plY3QgPT4gcHJvamVjdC5pZCAhPSBpZCk7XG5cbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Byb2plY3RzJywgSlNPTi5zdHJpbmdpZnkodXBkYXRlZFByb2plY3RMaXN0KSk7XG4gICB9XG5cbiAgICByZXR1cm4geyBnZXRQcm9qZWN0cywgc2F2ZVByb2plY3QsIGRlbGV0ZVByb2plY3QgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB1cGRhdGVTdG9yYWdlKCk7IiwiaW1wb3J0IHsgdXBkYXRlUHJvamVjdExpc3QsIHVwZGF0ZUFjdGl2ZVRhYiB9IGZyb20gXCIuL2NyZWF0ZURPTUVsZW1lbnRzXCI7XG5pbXBvcnQgdXBkYXRlU3RvcmFnZSBmcm9tIFwiLi9zdG9yYWdlXCI7XG5cbmNvbnN0IGhhbmRsZXJzID0gKCkgPT4ge1xuICAgIFxuICAgIGNvbnN0IF9yZWZyZXNoUHJvamVjdExpc3QgPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gdXBkYXRlU3RvcmFnZS5nZXRQcm9qZWN0cygpOyAvLyBVcGRhdGUgcHJvamVjdHMgaW4gc3RvcmFnZSAgICAgICAgXG4gICAgICAgIF9zZXRQcm9qZWN0TGlzdChwcm9qZWN0cyk7IC8vIFVwZGF0ZSBwcm9qZWN0cyBvbiBET01cbiAgICB9XG5cbiAgICBjb25zdCBfc2V0UHJvamVjdExpc3QgPSAocHJvamVjdHMpID0+IHtcbiAgICAgICAgdXBkYXRlUHJvamVjdExpc3QocHJvamVjdHMpO1xuICAgIH1cblxuICAgIGNvbnN0IF9zZXRBY3RpdmVUYWIgPSAodGFiKSA9PiB7XG4gICAgICAgIHVwZGF0ZUFjdGl2ZVRhYih0YWIpO1xuICAgIH1cblxuICAgIC8vIEhlcmUgYmUgaGFuZGxlcnNcbiAgICBjb25zdCBvblByb2plY3RTZWxlY3QgPSAocHJvamVjdElkKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gdXBkYXRlU3RvcmFnZS5nZXRQcm9qZWN0cygpO1xuICAgICAgICBjb25zdCBwcm9qZWN0T2JqZWN0ID0gcHJvamVjdHMuZmluZChwcm9qZWN0ID0+IHByb2plY3QuaWQgPT0gcHJvamVjdElkKTsgLy8gRG9uJ3QgdGhpbmsgaXQgd2lsbCBrbm93IHdoYXQgcHJvamVjdHMgaXMsIG1pZ2h0IGhhdmUgdG8gZGVjbGFyZSB2YXJpYWJsZVxuICAgICAgICBjb25zdCBzZWxlY3RlZFByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1wcm9qZWN0LWlkPScke3Byb2plY3RPYmplY3QuaWR9J11gKTtcbiAgICAgICAgX3NldEFjdGl2ZVRhYihzZWxlY3RlZFByb2plY3QpO1xuICAgIH1cblxuICAgIGNvbnN0IG9uUHJvamVjdEFkZCA9IChwcm9qZWN0TmFtZSkgPT4ge1xuICAgICAgICAvLyBwYXNzIHVzZXIgaW5wdXQgaW50byBmdW5jdGlvblxuICAgICAgICBjb25zdCBuZXdQcm9qZWN0ID0gIHtcbiAgICAgICAgICAgIHByb2plY3ROYW1lOiBwcm9qZWN0TmFtZSxcbiAgICAgICAgICAgIHRhc2tzOiAnW10nXG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlU3RvcmFnZS5zYXZlUHJvamVjdChuZXdQcm9qZWN0KTtcbiAgICAgICAgLy8gYWRkIGlucHV0IHRvIHBhZ2VcbiAgICAgICAgX3JlZnJlc2hQcm9qZWN0TGlzdCgpO1xuICAgICAgICBjb25zdCBuZXdQcm9qZWN0RE9NRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXByb2plY3QtaWQ9JyR7bmV3UHJvamVjdC5pZH0nXWApO1xuICAgICAgICBfc2V0QWN0aXZlVGFiKG5ld1Byb2plY3RET01FbGVtZW50KTtcbiAgICB9XG5cbiAgICBjb25zdCBvblByb2plY3RFZGl0ID0gKHByb2plY3RJZCwgcHJvamVjdE5hbWUsIHRhc2tzKSA9PiB7XG4gICAgICAgIHVwZGF0ZVN0b3JhZ2Uuc2F2ZVByb2plY3Qoe1xuICAgICAgICAgICAgaWQ6IHByb2plY3RJZCxcbiAgICAgICAgICAgIHByb2plY3ROYW1lOiBwcm9qZWN0TmFtZSxcbiAgICAgICAgICAgIHRhc2tzOiB0YXNrc1xuICAgICAgICB9KTtcblxuICAgICAgICBfcmVmcmVzaFByb2plY3RMaXN0KCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgb25Qcm9qZWN0U2VsZWN0LCBvblByb2plY3RBZGQsIG9uUHJvamVjdEVkaXQgfVxuICAgIFxufVxuXG5leHBvcnQgZGVmYXVsdCBoYW5kbGVycygpOyIsImltcG9ydCBoYW5kbGVycyBmcm9tIFwiLi9oYW5kbGVyc1wiXG5cbi8vIERPTSBFbGVtZW50cyBGYWN0b3J5IEZ1bmN0aW9uXG5jb25zdCBjcmVhdGVFbGVtZW50cyA9ICgpID0+IHtcbiAgICBcbiAgICBjb25zdCBjcmVhdGVMaXN0RWxlbWVudCA9IChodG1sQ2xhc3MpID0+IHtcbiAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgaHRtbENsYXNzKTtcbiAgICAgICAgcmV0dXJuIGxpO1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZVNwYW5FbGVtZW50ID0gKGh0bWxDbGFzcykgPT4ge1xuICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBzcGFuLmNsYXNzTGlzdC5hZGQoaHRtbENsYXNzKTtcbiAgICAgICAgcmV0dXJuIHNwYW47XG4gICAgfVxuXG4gICAgY29uc3QgY3JlYXRlSW1hZ2VFbGVtZW50ID0gKHNyYywgaHRtbENsYXNzKSA9PiB7XG4gICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICBpbWcuY2xhc3NMaXN0LmFkZChodG1sQ2xhc3MpO1xuICAgICAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBzcmMpO1xuICAgICAgICBpbWcuc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCAnZmFsc2UnKTtcbiAgICAgICAgcmV0dXJuIGltZztcbiAgICB9XG4gICAgXG4gICAgY29uc3QgY3JlYXRlRm9ybSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXRGb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgICAgICByZXR1cm4gaW5wdXRGb3JtO1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZUlucHV0RmllbGQgPSAocGxhY2Vob2xkZXJUZXh0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXJJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIHVzZXJJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICAgICAgICB1c2VySW5wdXQuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsIHBsYWNlaG9sZGVyVGV4dCk7XG4gICAgICAgIHVzZXJJbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3VzZXItaW5wdXQnKTtcbiAgICAgICAgdXNlcklucHV0LnJlcXVpcmVkID0gdHJ1ZTtcblxuICAgICAgICByZXR1cm4gdXNlcklucHV0O1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZURpdiA9IChodG1sQ2xhc3MpID0+IHtcbiAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgaHRtbENsYXNzKTtcbiAgICAgICAgcmV0dXJuIGRpdjtcbiAgICB9XG5cbiAgICByZXR1cm4ge2NyZWF0ZUxpc3RFbGVtZW50LCBjcmVhdGVTcGFuRWxlbWVudCwgY3JlYXRlSW1hZ2VFbGVtZW50LCBjcmVhdGVJbnB1dEZpZWxkLCBjcmVhdGVGb3JtLCBjcmVhdGVEaXZ9XG59XG5cbmNvbnN0IGNyZWF0ZUljb25TcGFuID0gKCkgPT4ge1xuICAgIGNvbnN0IHZpZXcgPSBjcmVhdGVFbGVtZW50cygpO1xuXG4gICAgY29uc3QgaWNvblNwYW4gPSB2aWV3LmNyZWF0ZVNwYW5FbGVtZW50KCdpY29ucycpO1xuICAgIGNvbnN0IGVkaXRJY29uID0gdmlldy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9lZGl0LWljb24uc3ZnJywgJ2VkaXQtaWNvbicpO1xuICAgIGNvbnN0IGRlbGV0ZUljb24gPSB2aWV3LmNyZWF0ZUltYWdlRWxlbWVudCgnaW1hZ2VzL2RlbGV0ZS1pY29uLnN2ZycsICdkZWxldGUtaWNvbicpO1xuICAgIFxuICAgIGVkaXRJY29uLmNsYXNzTGlzdC5hZGQoJ2VkaXQtcHJvamVjdCcpO1xuICAgIGRlbGV0ZUljb24uY2xhc3NMaXN0LmFkZCgnZGVsZXRlLXByb2plY3QnKTtcbiAgICBcbiAgICBpY29uU3Bhbi5hcHBlbmQoZWRpdEljb24sIGRlbGV0ZUljb24pO1xuICAgIFxuICAgIHJldHVybiBpY29uU3Bhbjtcbn1cblxuY29uc3QgYWRkUHJvamVjdFRvU2lkZWJhciA9ICgpID0+IHtcbiAgICBjb25zdCB2aWV3ID0gY3JlYXRlRWxlbWVudHMoKTtcbiAgICBjb25zdCBwcm9qZWN0c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWxpc3QnKTtcblxuICAgIGNvbnN0IHByb2plY3RMaXN0RWxlbWVudCA9ICB2aWV3LmNyZWF0ZUxpc3RFbGVtZW50KCdwcm9qZWN0LWl0ZW0nKTtcbiAgICBcbiAgICBjb25zdCBwcm9qZWN0SW5wdXRGb3JtID0gdmlldy5jcmVhdGVGb3JtKCk7XG4gICAgY29uc3QgcHJvamVjdE5hbWVJbnB1dCA9IHZpZXcuY3JlYXRlSW5wdXRGaWVsZCgnUHJvamVjdCBuYW1lLi4uJyk7XG4gICAgcHJvamVjdElucHV0Rm9ybS5hcHBlbmQocHJvamVjdE5hbWVJbnB1dCk7XG5cbiAgICBjb25zdCBpY29uU3BhbiA9IGNyZWF0ZUljb25TcGFuKCk7XG4gICAgcHJvamVjdExpc3RFbGVtZW50LmFwcGVuZChwcm9qZWN0SW5wdXRGb3JtLCBpY29uU3Bhbik7XG4gICAgcHJvamVjdHNDb250YWluZXIuaW5zZXJ0QmVmb3JlKHByb2plY3RMaXN0RWxlbWVudCwgcHJvamVjdHNDb250YWluZXIubGFzdEVsZW1lbnRDaGlsZCk7XG59XG5cbmNvbnN0IGFkZFByb2plY3RUb05vdGVwYWQgPSAoKSA9PiB7XG4gICAgY29uc3QgdmlldyA9IGNyZWF0ZUVsZW1lbnRzKCk7XG4gICAgY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1saXN0Jyk7XG4gICAgY29uc3QgY3VycmVudFByb2plY3ROdW1iZXIgPSBwcm9qZWN0TGlzdC5jaGlsZEVsZW1lbnRDb3VudCAtIDI7XG4gICAgY29uc3QgcHJvamVjdE5hbWUgPSBwcm9qZWN0TGlzdC5jaGlsZHJlbltjdXJyZW50UHJvamVjdE51bWJlcl0udGV4dENvbnRlbnQ7XG5cbiAgICBjb25zdCBub3RlcGFkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dyaXRpbmctYXJlYScpO1xuICAgIGNvbnN0IHByb2plY3REaXYgPSB2aWV3LmNyZWF0ZURpdigncHJvamVjdCcpO1xuICAgIGNvbnN0IHNraXBMaW5lID0gdmlldy5jcmVhdGVEaXYoJ3NraXAtbGluZScpO1xuICAgIFxuICAgIGNvbnN0IHByb2plY3RIZWFkaW5nID0gdmlldy5jcmVhdGVEaXYoJ3Byb2plY3QtaGVhZGluZycpO1xuICAgIGNvbnN0IGgyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgICBoMi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25vdGVwYWQtdGV4dCcpO1xuICAgIGgyLnRleHRDb250ZW50ID0gcHJvamVjdE5hbWU7XG4gICAgY29uc3QgaDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICAgIGgzLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbm90ZXBhZC10ZXh0Jyk7XG4gICAgaDMudGV4dENvbnRlbnQgPSAnRHVlIERhdGUnO1xuICAgICAgICBcbiAgICBjb25zdCB0YXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgdGFza3NDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnbm90ZXBhZC10ZXh0JywgJ3RvZG9zJyk7XG5cbiAgICBjb25zdCBhZGRUYXNrTGlzdEVsZW1lbnQgPSB2aWV3LmNyZWF0ZUxpc3RFbGVtZW50KCd0YXNrJyk7XG4gICAgY29uc3QgYWRkVGFza1NwYW4gPSB2aWV3LmNyZWF0ZVNwYW5FbGVtZW50KCdhZGQtdGFzaycpO1xuICAgIGNvbnN0IGFkZEljb24gPSB2aWV3LmNyZWF0ZUltYWdlRWxlbWVudCgnaW1hZ2VzL2FkZC1pY29uLnN2ZycsICdhZGQtaWNvbicpO1xuICAgIGFkZFRhc2tTcGFuLmFwcGVuZChhZGRJY29uLCAnQWRkIFRhc2snKTtcblxuICAgIGFkZFRhc2tMaXN0RWxlbWVudC5hcHBlbmQoYWRkVGFza1NwYW4pO1xuICAgIHRhc2tzQ29udGFpbmVyLmFwcGVuZChhZGRUYXNrTGlzdEVsZW1lbnQsIHNraXBMaW5lKTtcbiAgICBwcm9qZWN0SGVhZGluZy5hcHBlbmQoaDIsIGgzKTtcbiAgICBwcm9qZWN0RGl2LmFwcGVuZChwcm9qZWN0SGVhZGluZywgdGFza3NDb250YWluZXIpO1xuICAgIG5vdGVwYWQuYXBwZW5kKHByb2plY3REaXYpO1xufVxuXG5jb25zdCBfY3JlYXRlUHJvamVjdEl0ZW1IVE1MID0gKGlkLCBuYW1lKSA9PiB7XG4gICAgLy8gY3JlYXRlcyBIVE1MIGZvciBwcm9qZWN0IGl0ZW1zIGluIHNpZGViYXIgZnJvbSBsb2NhbFN0b3JhZ2UgaXRlbVxuICAgIGNvbnN0IHZpZXcgPSBjcmVhdGVFbGVtZW50cygpO1xuXG4gICAgY29uc3QgcHJvamVjdEl0ZW0gPSB2aWV3LmNyZWF0ZUxpc3RFbGVtZW50KCdwcm9qZWN0LWl0ZW0nKTtcbiAgICBwcm9qZWN0SXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdC1pZCcsIGlkKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IHZpZXcuY3JlYXRlU3BhbkVsZW1lbnQoJ3Byb2plY3QtbmFtZScpO1xuICAgIHByb2plY3ROYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBjb25zdCBpY29uU3BhbiA9IGNyZWF0ZUljb25TcGFuKCk7XG5cbiAgICBwcm9qZWN0SXRlbS5hcHBlbmQocHJvamVjdE5hbWUsIGljb25TcGFuKTtcblxuICAgIHJldHVybiBwcm9qZWN0SXRlbTtcbn1cblxuY29uc3QgdXBkYXRlUHJvamVjdExpc3QgPSAocHJvamVjdHMpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0c0xpc3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1saXN0Jyk7XG4gICAgY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFkZC1wcm9qZWN0XScpO1xuICAgIFxuICAgIC8vIENsZWFyIGFsbCBlbGVtZW50cyBvZiBjbGFzcyAnLnByb2plY3QtaXRlbSdcbiAgICBjb25zdCBwcm9qZWN0c0FycmF5ID0gW10uc2xpY2UuY2FsbChwcm9qZWN0c0xpc3RDb250YWluZXIuY2hpbGRyZW4pO1xuICAgIHByb2plY3RzQXJyYXkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdwcm9qZWN0LWl0ZW0nKSkgaXRlbS5yZW1vdmUoKTtcbiAgICB9KTtcblxuICAgIGZvciAoY29uc3QgcHJvamVjdCBvZiBwcm9qZWN0cykge1xuICAgICAgICBjb25zdCBodG1sID0gX2NyZWF0ZVByb2plY3RJdGVtSFRNTChwcm9qZWN0LmlkLCBwcm9qZWN0LnByb2plY3ROYW1lKTtcbiAgICAgICAgcHJvamVjdHNMaXN0Q29udGFpbmVyLmluc2VydEJlZm9yZShodG1sLCBhZGRQcm9qZWN0QnRuKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgbGlzdGVuZXJzIGZvciBlZGl0LCBkZWxldGUgPz8/P1xuICAgIHByb2plY3RzTGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdC1pdGVtJykuZm9yRWFjaChwcm9qZWN0SXRlbSA9PiB7XG4gICAgICAgIHByb2plY3RJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaGFuZGxlcnMub25Qcm9qZWN0U2VsZWN0KHByb2plY3RJdGVtLmRhdGFzZXQucHJvamVjdElkKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmNvbnN0IHVwZGF0ZUFjdGl2ZVRhYiA9ICh0YWIpID0+IHtcbiAgICAvLyBmb3IgYWxsIG90aGVyIHByb2plY3RzLCBjaGFuZ2UgZGlzcGxheSB0byBub25lLCB0byBicmluZyBiYWNrIHNldCBkaXNwbGF5IHRvIGNvbnRlbnRzICBcbiAgICAgICAgLy8gaXRlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgLy8gcmVtb3ZlIGFjdGl2ZSBjbGFzcyBmcm9tIGFueSBvdGhlciBzaWRlYmFyIGVsZW1lbnRcbiAgICBjb25zdCBjdXJyZW50QWN0aXZlVGFiID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFjdGl2ZScpO1xuICAgIGlmIChjdXJyZW50QWN0aXZlVGFiKSBjdXJyZW50QWN0aXZlVGFiLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIHRhYi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZVNwYW4gPSB0YWIuY2hpbGRyZW4uaXRlbSgwKTsgLy8gVXBkYXRlIG5vdGVwYWQgaGVyZT9cbiAgICAvL2NvbnNvbGUubG9nKHByb2plY3ROYW1lU3Bhbik7XG59XG5cbmV4cG9ydCB7IGFkZFByb2plY3RUb1NpZGViYXIsIGFkZFByb2plY3RUb05vdGVwYWQsIGNyZWF0ZUVsZW1lbnRzLCB1cGRhdGVQcm9qZWN0TGlzdCwgdXBkYXRlQWN0aXZlVGFifTsiLCJpbXBvcnQgeyBhZGRQcm9qZWN0VG9TaWRlYmFyLCBhZGRQcm9qZWN0VG9Ob3RlcGFkLCBjcmVhdGVFbGVtZW50cyB9IGZyb20gXCIuL2NyZWF0ZURPTUVsZW1lbnRzXCI7XG5pbXBvcnQgaGFuZGxlcnMgZnJvbSBcIi4vaGFuZGxlcnNcIjtcbmltcG9ydCB1cGRhdGVTdG9yYWdlIGZyb20gXCIuL3N0b3JhZ2UuanNcIjtcblxuY29uc3QgYXdhaXRpbmdJbnB1dCA9ICgpID0+IHtcbiAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1pbnB1dCcpO1xuICAgIGlmICh1c2VySW5wdXQgIT0gbnVsbCkgcmV0dXJuIHRydWU7XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbmNvbnN0IGhhbmRsZVVzZXJJbnB1dCA9ICgpID0+IHsgXG4gICAgLy8gVGhpcyBpcyBET00gU3R1ZmZcbiAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1pbnB1dCcpXG4gICAgY29uc3QgaW5wdXRGb3JtID0gdXNlcklucHV0LnBhcmVudEVsZW1lbnQ7XG4gICAgY29uc3QgcHJvamVjdEl0ZW0gPSBpbnB1dEZvcm0ucGFyZW50RWxlbWVudDtcbiAgICBjb25zdCBwcm9qZWN0U3BhbiA9IGNyZWF0ZUVsZW1lbnRzKCkuY3JlYXRlU3BhbkVsZW1lbnQoJ3Byb2plY3QtbmFtZScpO1xuICAgIFxuICAgIGNvbnN0IHByb2plY3ROYW1lID0gdXNlcklucHV0LnZhbHVlLnRyaW0oKVxuICAgIGlmICghcHJvamVjdE5hbWUpIHJldHVybjtcblxuICAgIHByb2plY3RTcGFuLnRleHRDb250ZW50ID0gcHJvamVjdE5hbWU7XG4gICAgdXNlcklucHV0LnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgcHJvamVjdEl0ZW0uaW5zZXJ0QmVmb3JlKHByb2plY3RTcGFuLCBwcm9qZWN0SXRlbS5jaGlsZE5vZGVzWzBdKTsgXG59XG5cbmNvbnN0IGFkZFByb2plY3QgPSAoKSA9PiB7XG4gICAgaWYgKGF3YWl0aW5nSW5wdXQoKSkgcmV0dXJuO1xuICAgIGFkZFByb2plY3RUb1NpZGViYXIoKTtcbiAgICBcbiAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1pbnB1dCcpXG4gICAgY29uc3QgaW5wdXRGb3JtID0gdXNlcklucHV0LnBhcmVudEVsZW1lbnQ7XG4gICAgY29uc3QgcHJvamVjdEl0ZW0gPSBpbnB1dEZvcm0ucGFyZW50RWxlbWVudDtcblxuICAgIHVzZXJJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodXNlcklucHV0LnZhbHVlICE9ICcnKSBoYW5kbGVVc2VySW5wdXQoKTtcbiAgICAgICAgaWYgKCFhd2FpdGluZ0lucHV0KCkpIGFkZFByb2plY3RUb05vdGVwYWQoKTtcbiAgICAgICAgY29uc3QgcHJvamVjdE5hbWUgPSBwcm9qZWN0SXRlbS5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudDtcbiAgICAgICAgaGFuZGxlcnMub25Qcm9qZWN0QWRkKHByb2plY3ROYW1lKTsgXG4gICAgfSk7XG5cbiAgICBpbnB1dEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBoYW5kbGVVc2VySW5wdXQoKTtcbiAgICAgICAgaWYgKCFhd2FpdGluZ0lucHV0KCkpIGFkZFByb2plY3RUb05vdGVwYWQoKTtcbiAgICAgICAgY29uc3QgcHJvamVjdE5hbWUgPSBwcm9qZWN0SXRlbS5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudDtcbiAgICAgICAgaGFuZGxlcnMub25Qcm9qZWN0QWRkKHByb2plY3ROYW1lKTsgXG4gICAgfSk7XG59XG4vLyBUT0RPOiBMb29rIGludG8gaG93IHRvIGFkZCBsb2NhbCBzdG9yYWdlIHRvIHBvc3NpYmx5IG1ha2UgZWRpdGluZyBhbmQgZGVsZXRpbmcgZWFzaWVyLiBPciByZWZlcmVuY2UgbGlicmFyeSBwcm9qZWN0IGZvciBpdHMgdXNlIG9mIGFycmF5cyB0byBzdG9yZSB1c2VyIGRhdGFcbi8vIFRPRE86IEFkZCBmdW5jdGlvbiB0byBkZWxldGUgcHJvamVjdCBmcm9tIG5vdGVwYWQgYXMgd2VsbFxuY29uc3QgZGVsZXRlUHJvamVjdCA9ICgpID0+IHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuZGVsZXRlLXByb2plY3QnKSkge1xuICAgICAgICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLnByb2plY3QtaXRlbScpLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vLyBUT0RPOiBjcmVhdGUgZnVuY3Rpb24gdG8gdXBkYXRlIHByb2plY3QgbmFtZSBvbiBub3RlcGFkIHdoZW4gdXNlciBlZGl0cyBpdFxuIFxuY29uc3QgZWRpdFByb2plY3QgPSAoZSkgPT4ge1xuICAgIGlmIChhd2FpdGluZ0lucHV0KCkpIHJldHVybjtcbiAgICBcbiAgICAvLyBUaGlzIGlzIERPTSBTdHVmZlxuICAgIGNvbnN0IGlucHV0Rm9ybSA9IGNyZWF0ZUVsZW1lbnRzKCkuY3JlYXRlRm9ybSgpO1xuICAgIGNvbnN0IGlucHV0RmllbGQgPSBjcmVhdGVFbGVtZW50cygpLmNyZWF0ZUlucHV0RmllbGQoJ1Byb2plY3QgbmFtZS4uLicpO1xuICAgIGNvbnN0IHByb2plY3ROYW1lID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuXG4gICAgaW5wdXRGaWVsZC52YWx1ZSA9IHByb2plY3ROYW1lLnRleHRDb250ZW50O1xuICAgIHByb2plY3ROYW1lLnJlbW92ZSgpO1xuICAgIGlucHV0Rm9ybS5hcHBlbmQoaW5wdXRGaWVsZCk7XG5cbiAgICBjb25zdCBwcm9qZWN0SXRlbSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5wcm9qZWN0LWl0ZW0nKTtcbiAgICBwcm9qZWN0SXRlbS5pbnNlcnRCZWZvcmUoaW5wdXRGb3JtLCBwcm9qZWN0SXRlbS5jaGlsZE5vZGVzWzBdKTtcblxuICAgIGNvbnN0IHVzZXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyLWlucHV0Jyk7XG4gICAgXG4gICAgY29uc3QgcHJvamVjdElkID0gcHJvamVjdEl0ZW0uZGF0YXNldC5wcm9qZWN0SWQ7XG5cbiAgICB1c2VySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHVzZXJJbnB1dC52YWx1ZSAhPSAnJykgaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgIC8vaWYgKCFhd2FpdGluZ0lucHV0KCkpIGVkaXRQcm9qZWN0T25Ob3RlcGFkKCk7XG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvamVjdEl0ZW0uZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgIGhhbmRsZXJzLm9uUHJvamVjdEVkaXQocHJvamVjdElkLCBwcm9qZWN0TmFtZSwgJ2JlYW5zJyk7XG4gICAgfSk7XG5cbiAgICBpbnB1dEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBoYW5kbGVVc2VySW5wdXQoKTtcbiAgICAgICAgLy9pZiAoIWF3YWl0aW5nSW5wdXQoKSkgZWRpdFByb2plY3RPbk5vdGVwYWQoKTtcbiAgICAgICAgY29uc3QgcHJvamVjdE5hbWUgPSBwcm9qZWN0SXRlbS5maXJzdEVsZW1lbnRDaGlsZC50ZXh0Q29udGVudDtcbiAgICAgICAgaGFuZGxlcnMub25Qcm9qZWN0RWRpdChwcm9qZWN0SWQsIHByb2plY3ROYW1lLCAnYmVhbnMnKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IHsgXG4gICAgYWRkUHJvamVjdCxcbiAgICBkZWxldGVQcm9qZWN0LFxuICAgIGVkaXRQcm9qZWN0XG59IiwiaW1wb3J0IHsgYWRkUHJvamVjdCwgZGVsZXRlUHJvamVjdCwgZWRpdFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0c1wiO1xuaW1wb3J0IHVwZGF0ZVN0b3JhZ2UgZnJvbSBcIi4vc3RvcmFnZVwiO1xuaW1wb3J0IHsgdXBkYXRlUHJvamVjdExpc3QgfSBmcm9tIFwiLi9jcmVhdGVET01FbGVtZW50c1wiO1xuaW1wb3J0IHsgdG9nZ2xlVGFzaywgYWRkVGFza1RvRE9NIH0gZnJvbSBcIi4vdGFza3NcIjtcblxuLy8gTG9hZCBsb2NhbFN0b3JhZ2UgaXRlbXMgb24gcGFnZSBsb2FkXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb2plY3RzID0gdXBkYXRlU3RvcmFnZS5nZXRQcm9qZWN0cygpO1xuICAgIHVwZGF0ZVByb2plY3RMaXN0KHByb2plY3RzKTtcbn1cblxuLy8gU2lkZWJhciBNb2R1bGVcbmNvbnN0IHNpZGViYXJDb250cm9sbGVyID0gKCgpID0+IHtcblxuICAgIGNvbnN0IG1vYmlsZVRvZ2dsZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXJzLWljb24tbW9iaWxlJyk7XG4gICAgaWYgKHNjcmVlbi53aWR0aCA8PSAxMDI0ICYmIG1vYmlsZVRvZ2dsZUJ0bi5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGRlbicpKSB7XG4gICAgICAgIG1vYmlsZVRvZ2dsZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgICB9XG5cbiAgICBjb25zdCBzaWRlYmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NpZGViYXInKTtcbiAgICBcbiAgICBjb25zdCB0b2dnbGVTaWRlYmFyID0gKCkgPT4ge1xuICAgICAgICBzaWRlYmFyLmNsYXNzTGlzdC50b2dnbGUoJ3RvZ2dsZS1zaWRlYmFyJyk7XG4gICAgICAgIGlmIChzY3JlZW4ud2lkdGggPD0gMTAyNCkgbW9iaWxlVG9nZ2xlQnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCB0b2dnbGVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuYmFycy1pY29uJyk7XG4gICAgdG9nZ2xlQnRuLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdG9nZ2xlU2lkZWJhcik7XG4gICAgfSk7ICAgICAgICBcbn0pKCk7XG5cbmNvbnN0IHByb2plY3RDb250cm9sbGVyID0gKCgpID0+IHtcbiAgICBkZWxldGVQcm9qZWN0KCk7XG4gICAgY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFkZC1wcm9qZWN0XScpO1xuICAgIGFkZFByb2plY3RCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhZGRQcm9qZWN0KTtcbiAgICBcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2VkaXQtcHJvamVjdCcpKSB7XG4gICAgICAgICAgICBlZGl0UHJvamVjdChlKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSkoKTtcblxuY29uc3QgdGFza0NvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFzay1pdGVtJykpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZS50YXJnZXQucGFyZW50RWxlbWVudDtcbiAgICAgICAgICAgIHRvZ2dsZVRhc2sodGFza0VsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2FkZC10YXNrJykpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhZGQgdGFzaycpO1xuICAgICAgICAgICAgYWRkVGFza1RvRE9NKCk7XG4gICAgICAgIH1cblxuICAgIH0pO1xufSkoKTtcbi8qXG51cGRhdGVTdG9yYWdlLnNhdmVQcm9qZWN0KHtcbiAgICBwcm9qZWN0TmFtZTogXCJQcm9qZWN0IDFcIixcbiAgICB0YXNrczogW1tcIkZpbmlzaCB0b2RvIGxpc3RcIiwgXCJsb3dcIiwgXCJkdWVEYXRlXCIsIGZhbHNlXSwgW1wiRG8gc29tZXRoaW5nXCIsIFwibWVkaXVtXCIsIFwiZHVlRGF0ZVwiLCB0cnVlXSwgW1wiRG8gc29tZXRoaW5nIGVsc2VcIiwgXCJoaWdoXCIsIFwiZHVlRGF0ZVwiLCBmYWxzZV1dLFxuICAgIGlkOiA4MTYwODlcbn0pO1xuKi9cbi8vc3RvcmFnZS5kZWxldGVQcm9qZWN0KDU4MTg0MCk7IiwiaW1wb3J0IGNyZWF0ZUVsZW1lbnRzIGZyb20gXCIuL2NyZWF0ZURPTUVsZW1lbnRzXCI7XG5cbmNvbnN0IHRvZ2dsZVRhc2sgPSAodGFza0VsZW1lbnQpID0+IHtcbiAgICB0YXNrRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdjb21wbGV0ZWQnKTtcbn1cblxuLy8gVE9ETzogQmVmb3JlIGNvbnRpbnVpbmcgd2l0aCB0aGlzIHN0dWZmLCBnZXQgdGhlIHByb2plY3QgZGl2IHN0dWZmIG9uIG5vdGVwYWQgd2hlbiB1c2VyIGFkZHMgbmV3IHByb2plY3RcbmNvbnN0IGFkZFRhc2tUb0RPTSA9ICgpID0+IHtcbiAgICAvLyBjcmVhdGUgc3BhbiB3aXRoIGNsYXNzICd0YXNrLWl0ZW0nXG4gICAgLy8gc3BhbiBzaG91bGQgZ2V0IHVzZXIgaW5wdXQgYW5kIHNhdmUgaXQgYXMgc3Bhbi50ZXh0Q29udGVudFxuICAgIC8vIGNyZWF0ZSBzcGFuIHdpdGggY2xhc3MgJ2ljb25zJ1xuICAgIC8vIGFkZCBlZGl0IGFuZCBkZWxldGUgaWNvbnNcblxuICAgIGNvbnN0IHRhc2tTcGFuID0gY3JlYXRlRWxlbWVudHMuY3JlYXRlU3BhbkVsZW1lbnQoJ3Rhc2staXRlbScpO1xuICAgIHRhc2tTcGFuLnRleHRDb250ZW50ID0gJ3VzZXIgaW5wdXQnOyAvLyBUT0RPOiBHZXQgdXNlciBpbnB1dFxuXG4gICAgY29uc3QgaWNvblNwYW4gPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVTcGFuRWxlbWVudCgnaWNvbnMnKTtcbiAgICAvLyBUT0RPOiBDYW4ndCBhZGQgc2Vjb25kIGNsYXNzIHdpdGggdGhpcyBtZXRob2Qgc28gZmlndXJlIG91dCBhbm90aGVyIHdheSB0byBhZGQgYSBzZWNvbmQgY2xhc3MgdG8gaWNvbnNcbiAgICBjb25zdCBlZGl0SWNvbiA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZUltYWdlRWxlbWVudCgnaW1hZ2VzL2VkaXQtaWNvbi5zdmcnLCAnZWRpdC1pY29uJyk7XG4gICAgY29uc3QgZGVsZXRlSWNvbiA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZUltYWdlRWxlbWVudCgnaW1hZ2VzL2RlbGV0ZS1pY29uLnN2ZycsICdkZWxldGUtaWNvbicpO1xuXG4gICAgaWNvblNwYW4uYXBwZW5kKGVkaXRJY29uLCBkZWxldGVJY29uKTtcbiAgICB0YXNrU3Bhbi5hcHBlbmQoaWNvblNwYW4pO1xuXG4gICAgcmV0dXJuIHRhc2tTcGFuO1xufVxuXG5jb25zdCBhZGREdWVEYXRlVG9ET00gPSAoKSA9PiB7XG4gICAgLy8gY3JlYXRlIHNwYW4gd2l0aCBjbGFzcyAnZHVlLWRhdGUnXG4gICAgLy8gY3JlYXRlIHByaW9yaXR5IGljb24gd2l0aCBjbGFzcyAncHJpb3JpdHktaWNvbiBwcmlvcml0eS1sb3cnXG4gICAgLy8gY3JlYXRlIHNwYW4gd2l0aCBjbGFzcyAnZGF0ZScgYW5kIHNldCB0ZXh0Q29udGVudCB0byBkZWZhdWx0IGRhdGUgKGN1cnJlbnQgZGF0ZSlcbiAgICAvLyBjcmVhdGUgY2FsZW5kYXIgaWNvbiB3aXRoIGNsYXNzICdjYWxlbmRhci1pY29uJ1xuICAgIGNvbnN0IGNyZWF0ZUR1ZURhdGUgPSBjcmVhdGVFbGVtZW50cygpO1xuXG4gICAgLy9jb25zdCBkdWVEYXRlU3BhbiA9IGNyZWF0ZUR1ZURhdGUuXG59XG5cbmNvbnN0IGFkZFRhc2sgPSAoKSA9PiB7XG4gICAgLy8gY3JlYXRlIGxpIHdpdGggY2xhc3MgJ3Rhc2snIGFuZCBhcHBlbmQgZXZlcnl0aGluZyB0byBpdFxuXG59XG5cbmV4cG9ydCB7XG4gICAgdG9nZ2xlVGFzayxcbiAgICBhZGRUYXNrVG9ET00sXG59Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsImdldFByb2plY3RzIiwiSlNPTiIsInBhcnNlIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsInNhdmVQcm9qZWN0IiwicHJvamVjdFRvU2F2ZSIsInByb2plY3RzIiwiZXhpc3RpbmciLCJmaW5kIiwicHJvamVjdCIsImlkIiwicHJvamVjdE5hbWUiLCJ0YXNrcyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInB1c2giLCJzZXRJdGVtIiwic3RyaW5naWZ5IiwiZGVsZXRlUHJvamVjdCIsInVwZGF0ZWRQcm9qZWN0TGlzdCIsImZpbHRlciIsIl9yZWZyZXNoUHJvamVjdExpc3QiLCJfc2V0UHJvamVjdExpc3QiLCJ1cGRhdGVQcm9qZWN0TGlzdCIsIl9zZXRBY3RpdmVUYWIiLCJ0YWIiLCJ1cGRhdGVBY3RpdmVUYWIiLCJvblByb2plY3RTZWxlY3QiLCJwcm9qZWN0SWQiLCJwcm9qZWN0T2JqZWN0Iiwic2VsZWN0ZWRQcm9qZWN0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwib25Qcm9qZWN0QWRkIiwibmV3UHJvamVjdCIsIm5ld1Byb2plY3RET01FbGVtZW50Iiwib25Qcm9qZWN0RWRpdCIsImNyZWF0ZUxpc3RFbGVtZW50IiwiaHRtbENsYXNzIiwibGkiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiY3JlYXRlU3BhbkVsZW1lbnQiLCJzcGFuIiwiY2xhc3NMaXN0IiwiYWRkIiwiY3JlYXRlSW1hZ2VFbGVtZW50Iiwic3JjIiwiaW1nIiwiY3JlYXRlSW5wdXRGaWVsZCIsInBsYWNlaG9sZGVyVGV4dCIsInVzZXJJbnB1dCIsInJlcXVpcmVkIiwiY3JlYXRlRm9ybSIsImNyZWF0ZURpdiIsImRpdiIsImNyZWF0ZUljb25TcGFuIiwidmlldyIsImljb25TcGFuIiwiZWRpdEljb24iLCJkZWxldGVJY29uIiwiYXBwZW5kIiwiYWRkUHJvamVjdFRvU2lkZWJhciIsInByb2plY3RzQ29udGFpbmVyIiwicHJvamVjdExpc3RFbGVtZW50IiwicHJvamVjdElucHV0Rm9ybSIsInByb2plY3ROYW1lSW5wdXQiLCJpbnNlcnRCZWZvcmUiLCJsYXN0RWxlbWVudENoaWxkIiwiYWRkUHJvamVjdFRvTm90ZXBhZCIsInByb2plY3RMaXN0IiwiY3VycmVudFByb2plY3ROdW1iZXIiLCJjaGlsZEVsZW1lbnRDb3VudCIsImNoaWxkcmVuIiwidGV4dENvbnRlbnQiLCJub3RlcGFkIiwicHJvamVjdERpdiIsInNraXBMaW5lIiwicHJvamVjdEhlYWRpbmciLCJoMiIsImgzIiwidGFza3NDb250YWluZXIiLCJhZGRUYXNrTGlzdEVsZW1lbnQiLCJhZGRUYXNrU3BhbiIsImFkZEljb24iLCJfY3JlYXRlUHJvamVjdEl0ZW1IVE1MIiwibmFtZSIsInByb2plY3RJdGVtIiwicHJvamVjdHNMaXN0Q29udGFpbmVyIiwiYWRkUHJvamVjdEJ0biIsInNsaWNlIiwiZm9yRWFjaCIsIml0ZW0iLCJjb250YWlucyIsInJlbW92ZSIsImh0bWwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRhdGFzZXQiLCJjdXJyZW50QWN0aXZlVGFiIiwiYXdhaXRpbmdJbnB1dCIsImhhbmRsZVVzZXJJbnB1dCIsInBhcmVudEVsZW1lbnQiLCJwcm9qZWN0U3BhbiIsInRyaW0iLCJjaGlsZE5vZGVzIiwiYWRkUHJvamVjdCIsImlucHV0Rm9ybSIsImZpcnN0RWxlbWVudENoaWxkIiwiZSIsInByZXZlbnREZWZhdWx0Iiwid2luZG93Iiwib25sb2FkIiwibW9iaWxlVG9nZ2xlQnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJzY3JlZW4iLCJ3aWR0aCIsInRvZ2dsZSIsInNpZGViYXIiLCJ0b2dnbGVTaWRlYmFyIiwiYnV0dG9uIiwidGFyZ2V0IiwiY2xvc2VzdCIsImlucHV0RmllbGQiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiZWRpdFByb2plY3QiLCJjb25zb2xlIiwibG9nIiwidGFza1NwYW4iLCJhZGRUYXNrVG9ET00iXSwic291cmNlUm9vdCI6IiJ9