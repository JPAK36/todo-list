(()=>{"use strict";const e=e=>{const t=document.createElement("li");return t.setAttribute("class",e),t},t=e=>{const t=document.createElement("span");return t.classList.add(e),t},n=(e,t)=>{const n=document.createElement("img");return n.classList.add(t),n.setAttribute("src",e),n.setAttribute("draggable","false"),n},s=e=>{const t=document.createElement("input");return t.setAttribute("type","text"),t.setAttribute("placeholder",e),t.setAttribute("id","user-input"),t.required=!0,t},c=()=>document.createElement("form"),o=e=>{const t=document.createElement("div");return t.setAttribute("class",e),t},r=()=>null!=document.querySelector("#user-input"),d=()=>{const e=document.querySelector("#user-input"),n=e.parentElement.parentElement,s=t("project-name"),c=e.value.trim();c&&(s.textContent=c,e.parentElement.remove(),n.insertBefore(s,n.childNodes[0]))},i=()=>{const s=document.querySelector(".project-list"),c=s.childElementCount-2,r=s.children[c].textContent,d=document.querySelector("#writing-area"),i=o("project"),a=o("skip-line"),l=o("project-heading"),u=document.createElement("h2");u.setAttribute("class","notepad-text"),u.textContent=r;const m=document.createElement("h3");m.setAttribute("class","notepad-text"),m.textContent="Due Date";const p=document.createElement("ul");p.classList.add("notepad-text","todos");const g=e("task"),E=t("add-task"),v=n("images/add-icon.svg","add-icon");E.append(v,"Add Task"),g.append(E),p.append(g),l.append(u,m),i.append(l,p),d.append(i,a)},a=()=>{if(r())return;(()=>{const o=document.querySelector(".project-list"),r=e("project-item"),d=c(),i=s("Project name...");d.append(i);const a=t("icons"),l=n("images/edit-icon.svg","edit-icon"),u=n("images/delete-icon.svg","delete-icon");l.classList.add("edit-project"),u.classList.add("delete-project"),a.append(l,u),r.append(d,a),o.insertBefore(r,o.lastElementChild)})();const o=document.querySelector("#user-input"),a=o.parentElement;o.addEventListener("blur",(function(){""!=o.value&&d(),r()||i()})),a.addEventListener("submit",(function(e){e.preventDefault(),d(),r()||i()}))};(()=>{const e=document.getElementById("bars-icon-mobile");screen.width<=1024&&e.classList.contains("hidden")&&e.classList.toggle("hidden");const t=document.getElementById("sidebar"),n=()=>{t.classList.toggle("toggle-sidebar"),screen.width<=1024&&e.classList.toggle("hidden")};document.querySelectorAll(".bars-icon").forEach((e=>{e.addEventListener("click",n)}))})(),document.addEventListener("click",(e=>{e.target.closest(".delete-project")&&e.target.closest(".project-item").remove()})),document.querySelector("[data-add-project]").addEventListener("click",a),document.addEventListener("click",(e=>{e.target.classList.contains("edit-project")&&(e=>{if(r())return;const t=c(),n=s("Project name..."),o=e.target.parentElement.previousElementSibling;n.value=o.textContent,o.remove(),t.append(n);const i=e.target.closest(".project-item");i.insertBefore(t,i.childNodes[0]);const a=document.querySelector("#user-input");a.addEventListener("blur",(function(){""!=a.value&&d()})),t.addEventListener("submit",(function(e){e.preventDefault(),d()}))})(e)})),document.addEventListener("click",(e=>{e.target.classList.contains("task-item")&&e.target.parentElement.classList.toggle("completed")})),document.addEventListener("click",(e=>{e.target.classList.contains("add-task")&&(console.log("add task"),(()=>{const e=t("task-item");e.textContent="user input";const s=t("icons"),c=n("images/edit-icon.svg","edit-icon"),o=n("images/delete-icon.svg","delete-icon");s.append(c,o),e.append(s)})())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQ0EsTUE4Q0EsRUE1QytCQSxJQUN2QixNQUFNQyxFQUFLQyxTQUFTQyxjQUFjLE1BRWxDLE9BREFGLEVBQUdHLGFBQWEsUUFBU0osR0FDbEJDLEdBeUNmLEVBdEMrQkQsSUFDdkIsTUFBTUssRUFBT0gsU0FBU0MsY0FBYyxRQUVwQyxPQURBRSxFQUFLQyxVQUFVQyxJQUFJUCxHQUNaSyxHQW1DZixFQWhDK0IsQ0FBQ0csRUFBS1IsS0FDN0IsTUFBTVMsRUFBTVAsU0FBU0MsY0FBYyxPQUluQyxPQUhBTSxFQUFJSCxVQUFVQyxJQUFJUCxHQUNsQlMsRUFBSUwsYUFBYSxNQUFPSSxHQUN4QkMsRUFBSUwsYUFBYSxZQUFhLFNBQ3ZCSyxHQTJCZixFQW5COEJDLElBQ3RCLE1BQU1DLEVBQVlULFNBQVNDLGNBQWMsU0FNekMsT0FMQVEsRUFBVVAsYUFBYSxPQUFRLFFBQy9CTyxFQUFVUCxhQUFhLGNBQWVNLEdBQ3RDQyxFQUFVUCxhQUFhLEtBQU0sY0FDN0JPLEVBQVVDLFVBQVcsRUFFZEQsR0FZZixFQXhCdUIsSUFDR1QsU0FBU0MsY0FBYyxRQXVCakQsRUFUdUJILElBQ2YsTUFBTWEsRUFBTVgsU0FBU0MsY0FBYyxPQUVuQyxPQURBVSxFQUFJVCxhQUFhLFFBQVNKLEdBQ25CYSxHQ1ZUQyxFQUFnQixJQUVELE1BRENaLFNBQVNhLGNBQWMsZUFNdkNDLEVBQWtCLEtBQ3BCLE1BQU1MLEVBQVlULFNBQVNhLGNBQWMsZUFFbkNFLEVBRFlOLEVBQVVPLGNBQ0VBLGNBQ3hCQyxFQUFjLEVBQWlDLGdCQUUvQ0MsRUFBY1QsRUFBVVUsTUFBTUMsT0FDL0JGLElBRUxELEVBQVlJLFlBQWNILEVBQzFCVCxFQUFVTyxjQUFjTSxTQUN4QlAsRUFBWVEsYUFBYU4sRUFBYUYsRUFBWVMsV0FBVyxNQUczREMsRUFBc0IsS0FDeEIsTUFBTUMsRUFBYzFCLFNBQVNhLGNBQWMsaUJBQ3JDYyxFQUF1QkQsRUFBWUUsa0JBQW9CLEVBQ3ZEVixFQUFjUSxFQUFZRyxTQUFTRixHQUFzQk4sWUFFekRTLEVBQVU5QixTQUFTYSxjQUFjLGlCQUNqQ2tCLEVBQWEsRUFBeUIsV0FDdENDLEVBQVcsRUFBeUIsYUFFcENDLEVBQWlCLEVBQXlCLG1CQUMxQ0MsRUFBS2xDLFNBQVNDLGNBQWMsTUFDbENpQyxFQUFHaEMsYUFBYSxRQUFTLGdCQUN6QmdDLEVBQUdiLFlBQWNILEVBQ2pCLE1BQU1pQixFQUFLbkMsU0FBU0MsY0FBYyxNQUNsQ2tDLEVBQUdqQyxhQUFhLFFBQVMsZ0JBQ3pCaUMsRUFBR2QsWUFBYyxXQUVqQixNQUFNZSxFQUFpQnBDLFNBQVNDLGNBQWMsTUFDOUNtQyxFQUFlaEMsVUFBVUMsSUFBSSxlQUFnQixTQUU3QyxNQUFNZ0MsRUFBcUIsRUFBaUMsUUFDdERDLEVBQWMsRUFBaUMsWUFDL0NDLEVBQVUsRUFBa0Msc0JBQXVCLFlBQ3pFRCxFQUFZRSxPQUFPRCxFQUFTLFlBRTVCRixFQUFtQkcsT0FBT0YsR0FDMUJGLEVBQWVJLE9BQU9ILEdBQ3RCSixFQUFlTyxPQUFPTixFQUFJQyxHQUMxQkosRUFBV1MsT0FBT1AsRUFBZ0JHLEdBQ2xDTixFQUFRVSxPQUFPVCxFQUFZQyxJQUd6QlMsRUFBYSxLQUNmLEdBQUk3QixJQUFpQixPQW5GRyxNQUN4QixNQUFNOEIsRUFBb0IxQyxTQUFTYSxjQUFjLGlCQUUzQzhCLEVBQXNCLEVBQWlDLGdCQUV2REMsRUFBbUIsSUFDbkJDLEVBQW1CLEVBQWdDLG1CQUN6REQsRUFBaUJKLE9BQU9LLEdBRXhCLE1BTU1DLEVBQVcsRUFBaUMsU0FDNUNDLEVBQVcsRUFBa0MsdUJBQXdCLGFBQ3JFQyxFQUFhLEVBQWtDLHlCQUEwQixlQUUvRUQsRUFBUzNDLFVBQVVDLElBQUksZ0JBQ3ZCMkMsRUFBVzVDLFVBQVVDLElBQUksa0JBRXpCeUMsRUFBU04sT0FBT08sRUFBVUMsR0FDMUJMLEVBQW1CSCxPQUFPSSxFQUFrQkUsR0FDNUNKLEVBQWtCbkIsYUFBYW9CLEVBQW9CRCxFQUFrQk8sbUJBNERyRUMsR0FFQSxNQUFNekMsRUFBWVQsU0FBU2EsY0FBYyxlQUNuQ3NDLEVBQVkxQyxFQUFVTyxjQUU1QlAsRUFBVTJDLGlCQUFpQixRQUFRLFdBQ1IsSUFBbkIzQyxFQUFVVSxPQUFhTCxJQUN0QkYsS0FBaUJhLE9BRzFCMEIsRUFBVUMsaUJBQWlCLFVBQVUsU0FBVUMsR0FDM0NBLEVBQUVDLGlCQUNGeEMsSUFDS0YsS0FBaUJhLFFDL0ZKLE1BRXRCLE1BQU04QixFQUFrQnZELFNBQVN3RCxlQUFlLG9CQUM1Q0MsT0FBT0MsT0FBUyxNQUFRSCxFQUFnQm5ELFVBQVV1RCxTQUFTLFdBQzNESixFQUFnQm5ELFVBQVV3RCxPQUFPLFVBR3JDLE1BQU1DLEVBQVU3RCxTQUFTd0QsZUFBZSxXQUVsQ00sRUFBZ0IsS0FDbEJELEVBQVF6RCxVQUFVd0QsT0FBTyxrQkFDckJILE9BQU9DLE9BQVMsTUFBTUgsRUFBZ0JuRCxVQUFVd0QsT0FBTyxXQUc3QzVELFNBQVMrRCxpQkFBaUIsY0FDbENDLFNBQVFDLElBQ2RBLEVBQU9iLGlCQUFpQixRQUFTVSxPQWhCZixHRHFHdEI5RCxTQUFTb0QsaUJBQWlCLFNBQVVDLElBQzVCQSxFQUFFYSxPQUFPQyxRQUFRLG9CQUNqQmQsRUFBRWEsT0FBT0MsUUFBUSxpQkFBaUI3QyxZQ2pGcEJ0QixTQUFTYSxjQUFjLHNCQUMvQnVDLGlCQUFpQixRQUFTWCxHQUV4Q3pDLFNBQVNvRCxpQkFBaUIsU0FBVUMsSUFDNUJBLEVBQUVhLE9BQU85RCxVQUFVdUQsU0FBUyxpQkRtRnBCLENBQUNOLElBQ2pCLEdBQUl6QyxJQUFpQixPQUNyQixNQUFNdUMsRUFBWSxJQUNaaUIsRUFBYSxFQUFnQyxtQkFDN0NsRCxFQUFjbUMsRUFBRWEsT0FBT2xELGNBQWNxRCx1QkFFM0NELEVBQVdqRCxNQUFRRCxFQUFZRyxZQUMvQkgsRUFBWUksU0FDWjZCLEVBQVVYLE9BQU80QixHQUVqQixNQUFNckQsRUFBY3NDLEVBQUVhLE9BQU9DLFFBQVEsaUJBQ3JDcEQsRUFBWVEsYUFBYTRCLEVBQVdwQyxFQUFZUyxXQUFXLElBRTNELE1BQU1mLEVBQVlULFNBQVNhLGNBQWMsZUFFekNKLEVBQVUyQyxpQkFBaUIsUUFBUSxXQUNSLElBQW5CM0MsRUFBVVUsT0FBYUwsT0FJL0JxQyxFQUFVQyxpQkFBaUIsVUFBVSxTQUFVQyxHQUMzQ0EsRUFBRUMsaUJBQ0Z4QyxRQ3hHSXdELENBQVlqQixNQU1wQnJELFNBQVNvRCxpQkFBaUIsU0FBVUMsSUFDNUJBLEVBQUVhLE9BQU85RCxVQUFVdUQsU0FBUyxjQUNSTixFQUFFYSxPQUFPbEQsY0NwQ3pCWixVQUFVd0QsT0FBTyxnQkR5QzdCNUQsU0FBU29ELGlCQUFpQixTQUFVQyxJQUM1QkEsRUFBRWEsT0FBTzlELFVBQVV1RCxTQUFTLGNBQzVCWSxRQUFRQyxJQUFJLFlDdkNILE1BTWpCLE1BQU1DLEVBQVcsRUFBaUMsYUFDbERBLEVBQVNwRCxZQUFjLGFBRXZCLE1BQU15QixFQUFXLEVBQWlDLFNBRTVDQyxFQUFXLEVBQWtDLHVCQUF3QixhQUNyRUMsRUFBYSxFQUFrQyx5QkFBMEIsZUFFL0VGLEVBQVNOLE9BQU9PLEVBQVVDLEdBQzFCeUIsRUFBU2pDLE9BQU9NLElEeUJSNEIsUSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9jcmVhdGVET01FbGVtZW50cy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdHMuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy90YXNrcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBET00gRWxlbWVudHMgRmFjdG9yeSBGdW5jdGlvblxuY29uc3QgY3JlYXRlRWxlbWVudHMgPSAoKSA9PiB7XG4gICAgXG4gICAgY29uc3QgY3JlYXRlTGlzdEVsZW1lbnQgPSAoaHRtbENsYXNzKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgbGkuc2V0QXR0cmlidXRlKCdjbGFzcycsIGh0bWxDbGFzcyk7XG4gICAgICAgIHJldHVybiBsaTtcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVTcGFuRWxlbWVudCA9IChodG1sQ2xhc3MpID0+IHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgc3Bhbi5jbGFzc0xpc3QuYWRkKGh0bWxDbGFzcyk7XG4gICAgICAgIHJldHVybiBzcGFuO1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZUltYWdlRWxlbWVudCA9IChzcmMsIGh0bWxDbGFzcykgPT4ge1xuICAgICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgaW1nLmNsYXNzTGlzdC5hZGQoaHRtbENsYXNzKTtcbiAgICAgICAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgc3JjKTtcbiAgICAgICAgaW1nLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgJ2ZhbHNlJyk7XG4gICAgICAgIHJldHVybiBpbWc7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGNyZWF0ZUZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0Rm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICAgICAgcmV0dXJuIGlucHV0Rm9ybTtcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVJbnB1dEZpZWxkID0gKHBsYWNlaG9sZGVyVGV4dCkgPT4ge1xuICAgICAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICB1c2VySW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgICAgICAgdXNlcklucHV0LnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCBwbGFjZWhvbGRlclRleHQpO1xuICAgICAgICB1c2VySW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsICd1c2VyLWlucHV0Jyk7XG4gICAgICAgIHVzZXJJbnB1dC5yZXF1aXJlZCA9IHRydWU7XG5cbiAgICAgICAgcmV0dXJuIHVzZXJJbnB1dDtcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVEaXYgPSAoaHRtbENsYXNzKSA9PiB7XG4gICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdjbGFzcycsIGh0bWxDbGFzcyk7XG4gICAgICAgIHJldHVybiBkaXY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtjcmVhdGVMaXN0RWxlbWVudCwgY3JlYXRlU3BhbkVsZW1lbnQsIGNyZWF0ZUltYWdlRWxlbWVudCwgY3JlYXRlSW5wdXRGaWVsZCwgY3JlYXRlRm9ybSwgY3JlYXRlRGl2fVxufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVFbGVtZW50cygpOyIsImltcG9ydCBjcmVhdGVFbGVtZW50cyBmcm9tIFwiLi9jcmVhdGVET01FbGVtZW50c1wiO1xuXG5jb25zdCBhZGRQcm9qZWN0VG9TaWRlYmFyID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbGlzdCcpO1xuXG4gICAgY29uc3QgcHJvamVjdExpc3RFbGVtZW50ID0gIGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZUxpc3RFbGVtZW50KCdwcm9qZWN0LWl0ZW0nKTtcbiAgICBcbiAgICBjb25zdCBwcm9qZWN0SW5wdXRGb3JtID0gY3JlYXRlRWxlbWVudHMuY3JlYXRlRm9ybSgpO1xuICAgIGNvbnN0IHByb2plY3ROYW1lSW5wdXQgPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVJbnB1dEZpZWxkKCdQcm9qZWN0IG5hbWUuLi4nKTtcbiAgICBwcm9qZWN0SW5wdXRGb3JtLmFwcGVuZChwcm9qZWN0TmFtZUlucHV0KTtcblxuICAgIGNvbnN0IG5ld1Byb2plY3QgPSAobmFtZSkgPT4ge1xuICAgICAgICBjb25zdCBuZXdQcm9qZWN0ID0gY3JlYXRlRWxlbWVudHMuY3JlYXRlU3BhbkVsZW1lbnQoJ3Byb2plY3QtbmFtZScpO1xuICAgICAgICBuZXdQcm9qZWN0LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgcmV0dXJuIG5ld1Byb2plY3Q7XG4gICAgfVxuXG4gICAgY29uc3QgaWNvblNwYW4gPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVTcGFuRWxlbWVudCgnaWNvbnMnKTtcbiAgICBjb25zdCBlZGl0SWNvbiA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZUltYWdlRWxlbWVudCgnaW1hZ2VzL2VkaXQtaWNvbi5zdmcnLCAnZWRpdC1pY29uJyk7XG4gICAgY29uc3QgZGVsZXRlSWNvbiA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZUltYWdlRWxlbWVudCgnaW1hZ2VzL2RlbGV0ZS1pY29uLnN2ZycsICdkZWxldGUtaWNvbicpO1xuICAgIFxuICAgIGVkaXRJY29uLmNsYXNzTGlzdC5hZGQoJ2VkaXQtcHJvamVjdCcpO1xuICAgIGRlbGV0ZUljb24uY2xhc3NMaXN0LmFkZCgnZGVsZXRlLXByb2plY3QnKTtcbiAgICBcbiAgICBpY29uU3Bhbi5hcHBlbmQoZWRpdEljb24sIGRlbGV0ZUljb24pO1xuICAgIHByb2plY3RMaXN0RWxlbWVudC5hcHBlbmQocHJvamVjdElucHV0Rm9ybSwgaWNvblNwYW4pO1xuICAgIHByb2plY3RzQ29udGFpbmVyLmluc2VydEJlZm9yZShwcm9qZWN0TGlzdEVsZW1lbnQsIHByb2plY3RzQ29udGFpbmVyLmxhc3RFbGVtZW50Q2hpbGQpO1xuXG4gICAgcmV0dXJuIHtuZXdQcm9qZWN0LCBwcm9qZWN0TmFtZUlucHV0LCBwcm9qZWN0SW5wdXRGb3JtLCBpY29uU3BhbiwgcHJvamVjdExpc3RFbGVtZW50fVxufVxuXG5jb25zdCBhd2FpdGluZ0lucHV0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyLWlucHV0Jyk7XG4gICAgaWYgKHVzZXJJbnB1dCAhPSBudWxsKSByZXR1cm4gdHJ1ZTtcblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuY29uc3QgaGFuZGxlVXNlcklucHV0ID0gKCkgPT4geyBcbiAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1pbnB1dCcpXG4gICAgY29uc3QgaW5wdXRGb3JtID0gdXNlcklucHV0LnBhcmVudEVsZW1lbnQ7XG4gICAgY29uc3QgcHJvamVjdEl0ZW0gPSBpbnB1dEZvcm0ucGFyZW50RWxlbWVudDtcbiAgICBjb25zdCBwcm9qZWN0U3BhbiA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZVNwYW5FbGVtZW50KCdwcm9qZWN0LW5hbWUnKTtcbiAgICBcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IHVzZXJJbnB1dC52YWx1ZS50cmltKClcbiAgICBpZiAoIXByb2plY3ROYW1lKSByZXR1cm47XG5cbiAgICBwcm9qZWN0U3Bhbi50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xuICAgIHVzZXJJbnB1dC5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHByb2plY3RJdGVtLmluc2VydEJlZm9yZShwcm9qZWN0U3BhbiwgcHJvamVjdEl0ZW0uY2hpbGROb2Rlc1swXSk7IFxufVxuXG5jb25zdCBhZGRQcm9qZWN0VG9Ob3RlcGFkID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbGlzdCcpO1xuICAgIGNvbnN0IGN1cnJlbnRQcm9qZWN0TnVtYmVyID0gcHJvamVjdExpc3QuY2hpbGRFbGVtZW50Q291bnQgLSAyO1xuICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvamVjdExpc3QuY2hpbGRyZW5bY3VycmVudFByb2plY3ROdW1iZXJdLnRleHRDb250ZW50O1xuXG4gICAgY29uc3Qgbm90ZXBhZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3cml0aW5nLWFyZWEnKTtcbiAgICBjb25zdCBwcm9qZWN0RGl2ID0gY3JlYXRlRWxlbWVudHMuY3JlYXRlRGl2KCdwcm9qZWN0Jyk7XG4gICAgY29uc3Qgc2tpcExpbmUgPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVEaXYoJ3NraXAtbGluZScpO1xuICAgIFxuICAgIGNvbnN0IHByb2plY3RIZWFkaW5nID0gY3JlYXRlRWxlbWVudHMuY3JlYXRlRGl2KCdwcm9qZWN0LWhlYWRpbmcnKTtcbiAgICBjb25zdCBoMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgaDIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdub3RlcGFkLXRleHQnKTtcbiAgICBoMi50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xuICAgIGNvbnN0IGgzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgICBoMy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25vdGVwYWQtdGV4dCcpO1xuICAgIGgzLnRleHRDb250ZW50ID0gJ0R1ZSBEYXRlJztcbiAgICAgICAgXG4gICAgY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgIHRhc2tzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ25vdGVwYWQtdGV4dCcsICd0b2RvcycpO1xuXG4gICAgY29uc3QgYWRkVGFza0xpc3RFbGVtZW50ID0gY3JlYXRlRWxlbWVudHMuY3JlYXRlTGlzdEVsZW1lbnQoJ3Rhc2snKTtcbiAgICBjb25zdCBhZGRUYXNrU3BhbiA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZVNwYW5FbGVtZW50KCdhZGQtdGFzaycpO1xuICAgIGNvbnN0IGFkZEljb24gPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9hZGQtaWNvbi5zdmcnLCAnYWRkLWljb24nKTtcbiAgICBhZGRUYXNrU3Bhbi5hcHBlbmQoYWRkSWNvbiwgJ0FkZCBUYXNrJyk7XG5cbiAgICBhZGRUYXNrTGlzdEVsZW1lbnQuYXBwZW5kKGFkZFRhc2tTcGFuKTtcbiAgICB0YXNrc0NvbnRhaW5lci5hcHBlbmQoYWRkVGFza0xpc3RFbGVtZW50KTtcbiAgICBwcm9qZWN0SGVhZGluZy5hcHBlbmQoaDIsIGgzKTtcbiAgICBwcm9qZWN0RGl2LmFwcGVuZChwcm9qZWN0SGVhZGluZywgdGFza3NDb250YWluZXIpO1xuICAgIG5vdGVwYWQuYXBwZW5kKHByb2plY3REaXYsIHNraXBMaW5lKTtcbn1cblxuY29uc3QgYWRkUHJvamVjdCA9ICgpID0+IHtcbiAgICBpZiAoYXdhaXRpbmdJbnB1dCgpKSByZXR1cm47XG4gICAgYWRkUHJvamVjdFRvU2lkZWJhcigpO1xuXG4gICAgY29uc3QgdXNlcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXItaW5wdXQnKVxuICAgIGNvbnN0IGlucHV0Rm9ybSA9IHVzZXJJbnB1dC5wYXJlbnRFbGVtZW50O1xuXG4gICAgdXNlcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh1c2VySW5wdXQudmFsdWUgIT0gJycpIGhhbmRsZVVzZXJJbnB1dCgpO1xuICAgICAgICBpZiAoIWF3YWl0aW5nSW5wdXQoKSkgYWRkUHJvamVjdFRvTm90ZXBhZCgpO1xuICAgIH0pO1xuXG4gICAgaW5wdXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgIGlmICghYXdhaXRpbmdJbnB1dCgpKSBhZGRQcm9qZWN0VG9Ob3RlcGFkKCk7XG4gICAgfSk7XG59XG4vLyBUT0RPOiBMb29rIGludG8gaG93IHRvIGFkZCBsb2NhbCBzdG9yYWdlIHRvIHBvc3NpYmx5IG1ha2UgZWRpdGluZyBhbmQgZGVsZXRpbmcgZWFzaWVyLiBPciByZWZlcmVuY2UgbGlicmFyeSBwcm9qZWN0IGZvciBpdHMgdXNlIG9mIGFycmF5cyB0byBzdG9yZSB1c2VyIGRhdGFcbi8vIFRPRE86IEFkZCBmdW5jdGlvbiB0byBkZWxldGUgcHJvamVjdCBmcm9tIG5vdGVwYWQgYXMgd2VsbFxuY29uc3QgZGVsZXRlUHJvamVjdCA9ICgpID0+IHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuZGVsZXRlLXByb2plY3QnKSkge1xuICAgICAgICAgICAgZS50YXJnZXQuY2xvc2VzdCgnLnByb2plY3QtaXRlbScpLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG4vLyBUT0RPOiBjcmVhdGUgZnVuY3Rpb24gdG8gdXBkYXRlIHByb2plY3QgbmFtZSBvbiBub3RlcGFkIHdoZW4gdXNlciBlZGl0cyBpdFxuIFxuY29uc3QgZWRpdFByb2plY3QgPSAoZSkgPT4ge1xuICAgIGlmIChhd2FpdGluZ0lucHV0KCkpIHJldHVybjtcbiAgICBjb25zdCBpbnB1dEZvcm0gPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVGb3JtKCk7XG4gICAgY29uc3QgaW5wdXRGaWVsZCA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZUlucHV0RmllbGQoJ1Byb2plY3QgbmFtZS4uLicpO1xuICAgIGNvbnN0IHByb2plY3ROYW1lID0gZS50YXJnZXQucGFyZW50RWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuXG4gICAgaW5wdXRGaWVsZC52YWx1ZSA9IHByb2plY3ROYW1lLnRleHRDb250ZW50O1xuICAgIHByb2plY3ROYW1lLnJlbW92ZSgpO1xuICAgIGlucHV0Rm9ybS5hcHBlbmQoaW5wdXRGaWVsZCk7XG5cbiAgICBjb25zdCBwcm9qZWN0SXRlbSA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5wcm9qZWN0LWl0ZW0nKTtcbiAgICBwcm9qZWN0SXRlbS5pbnNlcnRCZWZvcmUoaW5wdXRGb3JtLCBwcm9qZWN0SXRlbS5jaGlsZE5vZGVzWzBdKTtcblxuICAgIGNvbnN0IHVzZXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyLWlucHV0Jyk7XG5cbiAgICB1c2VySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHVzZXJJbnB1dC52YWx1ZSAhPSAnJykgaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgIC8vaWYgKCFhd2FpdGluZ0lucHV0KCkpIGVkaXRQcm9qZWN0VG9Ob3RlcGFkKCk7XG4gICAgfSk7XG5cbiAgICBpbnB1dEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBoYW5kbGVVc2VySW5wdXQoKTtcbiAgICAgICAgLy9pZiAoIWF3YWl0aW5nSW5wdXQoKSkgZWRpdFByb2plY3RPbk5vdGVwYWQoKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IHsgXG4gICAgYWRkUHJvamVjdCxcbiAgICBkZWxldGVQcm9qZWN0LFxuICAgIGVkaXRQcm9qZWN0LFxuICAgIGNyZWF0ZUVsZW1lbnRzXG59IiwiaW1wb3J0IHthZGRQcm9qZWN0LCBkZWxldGVQcm9qZWN0LCBlZGl0UHJvamVjdH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcbmltcG9ydCB7dG9nZ2xlVGFzaywgYWRkVGFza1RvRE9NfSBmcm9tIFwiLi90YXNrc1wiO1xuXG4vLyBTaWRlYmFyIE1vZHVsZVxuY29uc3Qgc2lkZWJhckNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuXG4gICAgY29uc3QgbW9iaWxlVG9nZ2xlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhcnMtaWNvbi1tb2JpbGUnKTtcbiAgICBpZiAoc2NyZWVuLndpZHRoIDw9IDEwMjQgJiYgbW9iaWxlVG9nZ2xlQnRuLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgbW9iaWxlVG9nZ2xlQnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICAgIH1cblxuICAgIGNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lkZWJhcicpO1xuICAgIFxuICAgIGNvbnN0IHRvZ2dsZVNpZGViYXIgPSAoKSA9PiB7XG4gICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZSgndG9nZ2xlLXNpZGViYXInKTtcbiAgICAgICAgaWYgKHNjcmVlbi53aWR0aCA8PSAxMDI0KSBtb2JpbGVUb2dnbGVCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRvZ2dsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXJzLWljb24nKTtcbiAgICB0b2dnbGVCdG4uZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVTaWRlYmFyKTtcbiAgICB9KTsgICAgICAgIFxufSkoKTtcblxuY29uc3QgcHJvamVjdENvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICAgIGRlbGV0ZVByb2plY3QoKTtcbiAgICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYWRkLXByb2plY3RdJyk7XG4gICAgYWRkUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFByb2plY3QpO1xuICAgIFxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZWRpdC1wcm9qZWN0JykpIHtcbiAgICAgICAgICAgIGVkaXRQcm9qZWN0KGUpO1xuICAgICAgICB9XG4gICAgfSk7XG59KSgpO1xuXG5jb25zdCB0YXNrQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXNrLWl0ZW0nKSkge1xuICAgICAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgdG9nZ2xlVGFzayh0YXNrRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYWRkLXRhc2snKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FkZCB0YXNrJyk7XG4gICAgICAgICAgICBhZGRUYXNrVG9ET00oKTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG59KSgpOyIsImltcG9ydCBjcmVhdGVFbGVtZW50cyBmcm9tIFwiLi9jcmVhdGVET01FbGVtZW50c1wiO1xuXG5jb25zdCB0b2dnbGVUYXNrID0gKHRhc2tFbGVtZW50KSA9PiB7XG4gICAgdGFza0VsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnY29tcGxldGVkJyk7XG59XG5cbi8vIFRPRE86IEJlZm9yZSBjb250aW51aW5nIHdpdGggdGhpcyBzdHVmZiwgZ2V0IHRoZSBwcm9qZWN0IGRpdiBzdHVmZiBvbiBub3RlcGFkIHdoZW4gdXNlciBhZGRzIG5ldyBwcm9qZWN0XG5jb25zdCBhZGRUYXNrVG9ET00gPSAoKSA9PiB7XG4gICAgLy8gY3JlYXRlIHNwYW4gd2l0aCBjbGFzcyAndGFzay1pdGVtJ1xuICAgIC8vIHNwYW4gc2hvdWxkIGdldCB1c2VyIGlucHV0IGFuZCBzYXZlIGl0IGFzIHNwYW4udGV4dENvbnRlbnRcbiAgICAvLyBjcmVhdGUgc3BhbiB3aXRoIGNsYXNzICdpY29ucydcbiAgICAvLyBhZGQgZWRpdCBhbmQgZGVsZXRlIGljb25zXG5cbiAgICBjb25zdCB0YXNrU3BhbiA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZVNwYW5FbGVtZW50KCd0YXNrLWl0ZW0nKTtcbiAgICB0YXNrU3Bhbi50ZXh0Q29udGVudCA9ICd1c2VyIGlucHV0JzsgLy8gVE9ETzogR2V0IHVzZXIgaW5wdXRcblxuICAgIGNvbnN0IGljb25TcGFuID0gY3JlYXRlRWxlbWVudHMuY3JlYXRlU3BhbkVsZW1lbnQoJ2ljb25zJyk7XG4gICAgLy8gVE9ETzogQ2FuJ3QgYWRkIHNlY29uZCBjbGFzcyB3aXRoIHRoaXMgbWV0aG9kIHNvIGZpZ3VyZSBvdXQgYW5vdGhlciB3YXkgdG8gYWRkIGEgc2Vjb25kIGNsYXNzIHRvIGljb25zXG4gICAgY29uc3QgZWRpdEljb24gPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9lZGl0LWljb24uc3ZnJywgJ2VkaXQtaWNvbicpO1xuICAgIGNvbnN0IGRlbGV0ZUljb24gPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9kZWxldGUtaWNvbi5zdmcnLCAnZGVsZXRlLWljb24nKTtcblxuICAgIGljb25TcGFuLmFwcGVuZChlZGl0SWNvbiwgZGVsZXRlSWNvbik7XG4gICAgdGFza1NwYW4uYXBwZW5kKGljb25TcGFuKTtcblxuICAgIHJldHVybiB0YXNrU3Bhbjtcbn1cblxuY29uc3QgYWRkRHVlRGF0ZVRvRE9NID0gKCkgPT4ge1xuICAgIC8vIGNyZWF0ZSBzcGFuIHdpdGggY2xhc3MgJ2R1ZS1kYXRlJ1xuICAgIC8vIGNyZWF0ZSBwcmlvcml0eSBpY29uIHdpdGggY2xhc3MgJ3ByaW9yaXR5LWljb24gcHJpb3JpdHktbG93J1xuICAgIC8vIGNyZWF0ZSBzcGFuIHdpdGggY2xhc3MgJ2RhdGUnIGFuZCBzZXQgdGV4dENvbnRlbnQgdG8gZGVmYXVsdCBkYXRlIChjdXJyZW50IGRhdGUpXG4gICAgLy8gY3JlYXRlIGNhbGVuZGFyIGljb24gd2l0aCBjbGFzcyAnY2FsZW5kYXItaWNvbidcbiAgICBjb25zdCBjcmVhdGVEdWVEYXRlID0gY3JlYXRlRWxlbWVudHMoKTtcblxuICAgIC8vY29uc3QgZHVlRGF0ZVNwYW4gPSBjcmVhdGVEdWVEYXRlLlxufVxuXG5jb25zdCBhZGRUYXNrID0gKCkgPT4ge1xuICAgIC8vIGNyZWF0ZSBsaSB3aXRoIGNsYXNzICd0YXNrJyBhbmQgYXBwZW5kIGV2ZXJ5dGhpbmcgdG8gaXRcblxufVxuXG5leHBvcnQge1xuICAgIHRvZ2dsZVRhc2ssXG4gICAgYWRkVGFza1RvRE9NLFxufSJdLCJuYW1lcyI6WyJodG1sQ2xhc3MiLCJsaSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInNwYW4iLCJjbGFzc0xpc3QiLCJhZGQiLCJzcmMiLCJpbWciLCJwbGFjZWhvbGRlclRleHQiLCJ1c2VySW5wdXQiLCJyZXF1aXJlZCIsImRpdiIsImF3YWl0aW5nSW5wdXQiLCJxdWVyeVNlbGVjdG9yIiwiaGFuZGxlVXNlcklucHV0IiwicHJvamVjdEl0ZW0iLCJwYXJlbnRFbGVtZW50IiwicHJvamVjdFNwYW4iLCJwcm9qZWN0TmFtZSIsInZhbHVlIiwidHJpbSIsInRleHRDb250ZW50IiwicmVtb3ZlIiwiaW5zZXJ0QmVmb3JlIiwiY2hpbGROb2RlcyIsImFkZFByb2plY3RUb05vdGVwYWQiLCJwcm9qZWN0TGlzdCIsImN1cnJlbnRQcm9qZWN0TnVtYmVyIiwiY2hpbGRFbGVtZW50Q291bnQiLCJjaGlsZHJlbiIsIm5vdGVwYWQiLCJwcm9qZWN0RGl2Iiwic2tpcExpbmUiLCJwcm9qZWN0SGVhZGluZyIsImgyIiwiaDMiLCJ0YXNrc0NvbnRhaW5lciIsImFkZFRhc2tMaXN0RWxlbWVudCIsImFkZFRhc2tTcGFuIiwiYWRkSWNvbiIsImFwcGVuZCIsImFkZFByb2plY3QiLCJwcm9qZWN0c0NvbnRhaW5lciIsInByb2plY3RMaXN0RWxlbWVudCIsInByb2plY3RJbnB1dEZvcm0iLCJwcm9qZWN0TmFtZUlucHV0IiwiaWNvblNwYW4iLCJlZGl0SWNvbiIsImRlbGV0ZUljb24iLCJsYXN0RWxlbWVudENoaWxkIiwiYWRkUHJvamVjdFRvU2lkZWJhciIsImlucHV0Rm9ybSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwicHJldmVudERlZmF1bHQiLCJtb2JpbGVUb2dnbGVCdG4iLCJnZXRFbGVtZW50QnlJZCIsInNjcmVlbiIsIndpZHRoIiwiY29udGFpbnMiLCJ0b2dnbGUiLCJzaWRlYmFyIiwidG9nZ2xlU2lkZWJhciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYnV0dG9uIiwidGFyZ2V0IiwiY2xvc2VzdCIsImlucHV0RmllbGQiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiZWRpdFByb2plY3QiLCJjb25zb2xlIiwibG9nIiwidGFza1NwYW4iLCJhZGRUYXNrVG9ET00iXSwic291cmNlUm9vdCI6IiJ9