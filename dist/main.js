(()=>{"use strict";var e={d:(t,n)=>{for(var c in n)e.o(n,c)&&!e.o(t,c)&&Object.defineProperty(t,c,{enumerable:!0,get:n[c]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{qm:()=>s,M_:()=>a,Sx:()=>r,wc:()=>l,QW:()=>i});const n=(()=>{const e=()=>JSON.parse(localStorage.getItem("projects")||"[]");return{getProjects:e,saveProject:t=>{const n=e(),c=n.find((e=>e.id==t.id));c?(c.projectName=t.projectName,c.tasks=t.tasks):(t.id=Math.floor(1e6*Math.random()),n.push(t)),localStorage.setItem("projects",JSON.stringify(n))},deleteProject:t=>{const n=e().filter((e=>e.id!=t));localStorage.setItem("projects",JSON.stringify(n))}}})(),c=(()=>{const e=e=>{l(e)};return{onProjectSelect:t=>{const c=n.getProjects().find((e=>e.id==t)),r=document.querySelector(`[data-project-id='${c.id}']`);e(r)},onProjectAdd:t=>{const c={projectName:t};var r;n.saveProject(c),r=n.getProjects(),i(r);const o=document.querySelector(`[data-project-id='${c.id}']`);console.log(o),e(o)}}})(),r=()=>({createListElement:e=>{const t=document.createElement("li");return t.setAttribute("class",e),t},createSpanElement:e=>{const t=document.createElement("span");return t.classList.add(e),t},createImageElement:(e,t)=>{const n=document.createElement("img");return n.classList.add(t),n.setAttribute("src",e),n.setAttribute("draggable","false"),n},createInputField:e=>{const t=document.createElement("input");return t.setAttribute("type","text"),t.setAttribute("placeholder",e),t.setAttribute("id","user-input"),t.required=!0,t},createForm:()=>document.createElement("form"),createDiv:e=>{const t=document.createElement("div");return t.setAttribute("class",e),t}}),o=()=>{const e=r(),t=e.createSpanElement("icons"),n=e.createImageElement("images/edit-icon.svg","edit-icon"),c=e.createImageElement("images/delete-icon.svg","delete-icon");return n.classList.add("edit-project"),c.classList.add("delete-project"),t.append(n,c),t},a=()=>{const e=r(),t=document.querySelector(".project-list"),n=e.createListElement("project-item"),c=e.createForm(),a=e.createInputField("Project name...");c.append(a);const s=o();n.append(c,s),t.insertBefore(n,t.lastElementChild)},s=()=>{const e=r(),t=document.querySelector(".project-list"),n=t.childElementCount-2,c=t.children[n].textContent,o=document.querySelector("#writing-area"),a=e.createDiv("project"),s=e.createDiv("skip-line"),d=e.createDiv("project-heading"),i=document.createElement("h2");i.setAttribute("class","notepad-text"),i.textContent=c;const l=document.createElement("h3");l.setAttribute("class","notepad-text"),l.textContent="Due Date";const m=document.createElement("ul");m.classList.add("notepad-text","todos");const u=e.createListElement("task"),p=e.createSpanElement("add-task"),g=e.createImageElement("images/add-icon.svg","add-icon");p.append(g,"Add Task"),u.append(p),m.append(u,s),d.append(i,l),a.append(d,m),o.append(a)},d=(e,t)=>{const n=r(),c=n.createListElement("project-item");c.setAttribute("data-project-id",e);const a=n.createSpanElement("project-name");a.textContent=t;const s=o();return c.append(a,s),c},i=e=>{const t=document.querySelector(".project-list"),n=document.querySelector("[data-add-project]");[].slice.call(t.children).forEach((e=>{e.classList.contains("project-item")&&e.remove()}));for(const c of e){const e=d(c.id,c.projectName);t.insertBefore(e,n)}t.querySelectorAll(".project-item").forEach((e=>{e.addEventListener("click",(()=>{c.onProjectSelect(e.dataset.projectId)}))}))},l=e=>{const t=document.querySelector(".active");t&&t.classList.remove("active"),e.classList.add("active"),e.children.item(0)},m=()=>null!=document.querySelector("#user-input"),u=()=>{const e=document.querySelector("#user-input"),t=e.parentElement.parentElement,n=r().createSpanElement("project-name"),c=e.value.trim();c&&(n.textContent=c,e.parentElement.remove(),t.insertBefore(n,t.childNodes[0]))},p=()=>{if(m())return;a();const e=document.querySelector("#user-input"),t=e.parentElement,n=t.parentElement;e.addEventListener("blur",(function(){""!=e.value&&u(),m()||s();const t=n.firstElementChild.textContent;c.onProjectAdd(t)})),t.addEventListener("submit",(function(e){e.preventDefault(),u(),m()||s();const t=n.firstElementChild.textContent;c.onProjectAdd(t)}))};window.onload=()=>{const e=n.getProjects();i(e)},(()=>{const e=document.getElementById("bars-icon-mobile");screen.width<=1024&&e.classList.contains("hidden")&&e.classList.toggle("hidden");const t=document.getElementById("sidebar"),n=()=>{t.classList.toggle("toggle-sidebar"),screen.width<=1024&&e.classList.toggle("hidden")};document.querySelectorAll(".bars-icon").forEach((e=>{e.addEventListener("click",n)}))})(),document.addEventListener("click",(e=>{e.target.closest(".delete-project")&&e.target.closest(".project-item").remove()})),document.querySelector("[data-add-project]").addEventListener("click",p),document.addEventListener("click",(e=>{e.target.classList.contains("edit-project")&&(e=>{if(m())return;const t=r().createForm(),n=r().createInputField("Project name..."),c=e.target.parentElement.previousElementSibling;n.value=c.textContent,c.remove(),t.append(n);const o=e.target.closest(".project-item");o.insertBefore(t,o.childNodes[0]);const a=document.querySelector("#user-input");a.addEventListener("blur",(function(){""!=a.value&&u()})),t.addEventListener("submit",(function(e){e.preventDefault(),u()}))})(e)})),document.addEventListener("click",(e=>{e.target.classList.contains("task-item")&&e.target.parentElement.classList.toggle("completed")})),document.addEventListener("click",(e=>{e.target.classList.contains("add-task")&&(console.log("add task"),(()=>{const e=t.default.createSpanElement("task-item");e.textContent="user input";const n=t.default.createSpanElement("icons"),c=t.default.createImageElement("images/edit-icon.svg","edit-icon"),r=t.default.createImageElement("images/delete-icon.svg","delete-icon");n.append(c,r),e.append(n)})())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YyxhQUV2QixNQUFNaEIsRUFBVyw0QkFBaUMsU0FFNUNDLEVBQVcsNkJBQWtDLHVCQUF3QixhQUNyRUMsRUFBYSw2QkFBa0MseUJBQTBCLGVBRS9FRixFQUFTRyxPQUFPRixFQUFVQyxHQUMxQmtFLEVBQVNqRSxPQUFPSCxJRGlDUnFFLFEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vdG9kby1saXN0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaGFuZGxlcnMuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2NyZWF0ZURPTUVsZW1lbnRzLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Rhc2tzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiXG5jb25zdCB1cGRhdGVTdG9yYWdlID0gKCkgPT4ge1xuICAgIFxuICAgIGNvbnN0IGdldFByb2plY3RzID0gKCkgPT4ge1xuICAgICAgICAvLyBjcmVhdGVzIGFuIGFycmF5IG9mIG9iamVjdHMgXG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncHJvamVjdHMnKSB8fCAnW10nKTtcbiAgICAgICAgcmV0dXJuIHByb2plY3RzO1xuICAgIH1cblxuICAgIGNvbnN0IHNhdmVQcm9qZWN0ID0gKHByb2plY3RUb1NhdmUpID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSBnZXRQcm9qZWN0cygpO1xuXG4gICAgICAgIC8vIGZpbmQgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IG9iamVjdCB0aGF0IG1hdGNoZXMgdGhlIGlkXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gcHJvamVjdHMuZmluZChwcm9qZWN0ID0+IHByb2plY3QuaWQgPT0gcHJvamVjdFRvU2F2ZS5pZCk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZXhpc3RpbmcpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nLnByb2plY3ROYW1lID0gcHJvamVjdFRvU2F2ZS5wcm9qZWN0TmFtZTtcbiAgICAgICAgICAgIGV4aXN0aW5nLnRhc2tzID0gcHJvamVjdFRvU2F2ZS50YXNrcztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHByb2plY3RUb1NhdmUuaWQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKTtcbiAgICAgICAgICAgIC8vIEFkZCBwcm9qZWN0TmFtZVxuICAgICAgICAgICAgLy8gQWRkIFRhc2tzIGFycmF5IGNvbnRhaW5pbmcgYW5vdGhlciBhcnJheSB3aGljaCBpbmNsdWRlcyB0YXNrLCBwcmlvcml0eSwgZHVlRGF0ZSwgYW5kIHRydWUvZmFsc2UgZm9yIGNvbXBsZXRlZCBvciBub3RcbiAgICAgICAgICAgIHByb2plY3RzLnB1c2gocHJvamVjdFRvU2F2ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xuICAgIH1cblxuICAgY29uc3QgZGVsZXRlUHJvamVjdCA9IChpZCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IGdldFByb2plY3RzKCk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRQcm9qZWN0TGlzdCA9IHByb2plY3RzLmZpbHRlcihwcm9qZWN0ID0+IHByb2plY3QuaWQgIT0gaWQpO1xuXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRQcm9qZWN0TGlzdCkpO1xuICAgfVxuXG4gICAgcmV0dXJuIHsgZ2V0UHJvamVjdHMsIHNhdmVQcm9qZWN0LCBkZWxldGVQcm9qZWN0IH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgdXBkYXRlU3RvcmFnZSgpOyIsImltcG9ydCB7IHVwZGF0ZVByb2plY3RMaXN0LCB1cGRhdGVBY3RpdmVUYWIgfSBmcm9tIFwiLi9jcmVhdGVET01FbGVtZW50c1wiO1xuaW1wb3J0IHVwZGF0ZVN0b3JhZ2UgZnJvbSBcIi4vc3RvcmFnZVwiO1xuXG5jb25zdCBoYW5kbGVycyA9ICgpID0+IHtcbiAgICBcbiAgICBjb25zdCBfcmVmcmVzaFByb2plY3RMaXN0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IHVwZGF0ZVN0b3JhZ2UuZ2V0UHJvamVjdHMoKTsgLy8gVXBkYXRlIHByb2plY3RzIGluIHN0b3JhZ2UgICAgICAgIFxuICAgICAgICBfc2V0UHJvamVjdExpc3QocHJvamVjdHMpOyAvLyBVcGRhdGUgcHJvamVjdHMgb24gRE9NXG4gICAgfVxuXG4gICAgY29uc3QgX3NldFByb2plY3RMaXN0ID0gKHByb2plY3RzKSA9PiB7XG4gICAgICAgIHVwZGF0ZVByb2plY3RMaXN0KHByb2plY3RzKTtcbiAgICB9XG5cbiAgICBjb25zdCBfc2V0QWN0aXZlVGFiID0gKHRhYikgPT4ge1xuICAgICAgICB1cGRhdGVBY3RpdmVUYWIodGFiKTtcbiAgICB9XG5cbiAgICAvLyBIZXJlIGJlIGhhbmRsZXJzXG4gICAgY29uc3Qgb25Qcm9qZWN0U2VsZWN0ID0gKHByb2plY3RJZCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IHVwZGF0ZVN0b3JhZ2UuZ2V0UHJvamVjdHMoKTtcbiAgICAgICAgY29uc3QgcHJvamVjdE9iamVjdCA9IHByb2plY3RzLmZpbmQocHJvamVjdCA9PiBwcm9qZWN0LmlkID09IHByb2plY3RJZCk7IC8vIERvbid0IHRoaW5rIGl0IHdpbGwga25vdyB3aGF0IHByb2plY3RzIGlzLCBtaWdodCBoYXZlIHRvIGRlY2xhcmUgdmFyaWFibGVcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRQcm9qZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtcHJvamVjdC1pZD0nJHtwcm9qZWN0T2JqZWN0LmlkfSddYCk7XG4gICAgICAgIF9zZXRBY3RpdmVUYWIoc2VsZWN0ZWRQcm9qZWN0KTtcbiAgICB9XG5cbiAgICBjb25zdCBvblByb2plY3RBZGQgPSAocHJvamVjdE5hbWUpID0+IHtcbiAgICAgICAgLy8gcGFzcyB1c2VyIGlucHV0IGludG8gZnVuY3Rpb25cbiAgICAgICAgY29uc3QgbmV3UHJvamVjdCA9ICB7XG4gICAgICAgICAgICBwcm9qZWN0TmFtZTogcHJvamVjdE5hbWVcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVTdG9yYWdlLnNhdmVQcm9qZWN0KG5ld1Byb2plY3QpO1xuICAgICAgICAvLyBhZGQgaW5wdXQgdG8gcGFnZVxuICAgICAgICBfcmVmcmVzaFByb2plY3RMaXN0KCk7XG4gICAgICAgIGNvbnN0IG5ld1Byb2plY3RET01FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtcHJvamVjdC1pZD0nJHtuZXdQcm9qZWN0LmlkfSddYCk7XG4gICAgICAgIGNvbnNvbGUubG9nKG5ld1Byb2plY3RET01FbGVtZW50KTtcbiAgICAgICAgX3NldEFjdGl2ZVRhYihuZXdQcm9qZWN0RE9NRWxlbWVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgb25Qcm9qZWN0U2VsZWN0LCBvblByb2plY3RBZGQsIH1cbiAgICBcbn1cblxuZXhwb3J0IGRlZmF1bHQgaGFuZGxlcnMoKTsiLCJpbXBvcnQgaGFuZGxlcnMgZnJvbSBcIi4vaGFuZGxlcnNcIlxuXG4vLyBET00gRWxlbWVudHMgRmFjdG9yeSBGdW5jdGlvblxuY29uc3QgY3JlYXRlRWxlbWVudHMgPSAoKSA9PiB7XG4gICAgXG4gICAgY29uc3QgY3JlYXRlTGlzdEVsZW1lbnQgPSAoaHRtbENsYXNzKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgbGkuc2V0QXR0cmlidXRlKCdjbGFzcycsIGh0bWxDbGFzcyk7XG4gICAgICAgIHJldHVybiBsaTtcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVTcGFuRWxlbWVudCA9IChodG1sQ2xhc3MpID0+IHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgc3Bhbi5jbGFzc0xpc3QuYWRkKGh0bWxDbGFzcyk7XG4gICAgICAgIHJldHVybiBzcGFuO1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZUltYWdlRWxlbWVudCA9IChzcmMsIGh0bWxDbGFzcykgPT4ge1xuICAgICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgaW1nLmNsYXNzTGlzdC5hZGQoaHRtbENsYXNzKTtcbiAgICAgICAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgc3JjKTtcbiAgICAgICAgaW1nLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgJ2ZhbHNlJyk7XG4gICAgICAgIHJldHVybiBpbWc7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGNyZWF0ZUZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0Rm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICAgICAgcmV0dXJuIGlucHV0Rm9ybTtcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVJbnB1dEZpZWxkID0gKHBsYWNlaG9sZGVyVGV4dCkgPT4ge1xuICAgICAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICB1c2VySW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgICAgICAgdXNlcklucHV0LnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCBwbGFjZWhvbGRlclRleHQpO1xuICAgICAgICB1c2VySW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsICd1c2VyLWlucHV0Jyk7XG4gICAgICAgIHVzZXJJbnB1dC5yZXF1aXJlZCA9IHRydWU7XG5cbiAgICAgICAgcmV0dXJuIHVzZXJJbnB1dDtcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVEaXYgPSAoaHRtbENsYXNzKSA9PiB7XG4gICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBkaXYuc2V0QXR0cmlidXRlKCdjbGFzcycsIGh0bWxDbGFzcyk7XG4gICAgICAgIHJldHVybiBkaXY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtjcmVhdGVMaXN0RWxlbWVudCwgY3JlYXRlU3BhbkVsZW1lbnQsIGNyZWF0ZUltYWdlRWxlbWVudCwgY3JlYXRlSW5wdXRGaWVsZCwgY3JlYXRlRm9ybSwgY3JlYXRlRGl2fVxufVxuXG5jb25zdCBjcmVhdGVJY29uU3BhbiA9ICgpID0+IHtcbiAgICBjb25zdCB2aWV3ID0gY3JlYXRlRWxlbWVudHMoKTtcblxuICAgIGNvbnN0IGljb25TcGFuID0gdmlldy5jcmVhdGVTcGFuRWxlbWVudCgnaWNvbnMnKTtcbiAgICBjb25zdCBlZGl0SWNvbiA9IHZpZXcuY3JlYXRlSW1hZ2VFbGVtZW50KCdpbWFnZXMvZWRpdC1pY29uLnN2ZycsICdlZGl0LWljb24nKTtcbiAgICBjb25zdCBkZWxldGVJY29uID0gdmlldy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9kZWxldGUtaWNvbi5zdmcnLCAnZGVsZXRlLWljb24nKTtcbiAgICBcbiAgICBlZGl0SWNvbi5jbGFzc0xpc3QuYWRkKCdlZGl0LXByb2plY3QnKTtcbiAgICBkZWxldGVJY29uLmNsYXNzTGlzdC5hZGQoJ2RlbGV0ZS1wcm9qZWN0Jyk7XG4gICAgXG4gICAgaWNvblNwYW4uYXBwZW5kKGVkaXRJY29uLCBkZWxldGVJY29uKTtcbiAgICBcbiAgICByZXR1cm4gaWNvblNwYW47XG59XG5cbmNvbnN0IGFkZFByb2plY3RUb1NpZGViYXIgPSAoKSA9PiB7XG4gICAgY29uc3QgdmlldyA9IGNyZWF0ZUVsZW1lbnRzKCk7XG4gICAgY29uc3QgcHJvamVjdHNDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1saXN0Jyk7XG5cbiAgICBjb25zdCBwcm9qZWN0TGlzdEVsZW1lbnQgPSAgdmlldy5jcmVhdGVMaXN0RWxlbWVudCgncHJvamVjdC1pdGVtJyk7XG4gICAgXG4gICAgY29uc3QgcHJvamVjdElucHV0Rm9ybSA9IHZpZXcuY3JlYXRlRm9ybSgpO1xuICAgIGNvbnN0IHByb2plY3ROYW1lSW5wdXQgPSB2aWV3LmNyZWF0ZUlucHV0RmllbGQoJ1Byb2plY3QgbmFtZS4uLicpO1xuICAgIHByb2plY3RJbnB1dEZvcm0uYXBwZW5kKHByb2plY3ROYW1lSW5wdXQpO1xuXG4gICAgY29uc3QgaWNvblNwYW4gPSBjcmVhdGVJY29uU3BhbigpO1xuICAgIHByb2plY3RMaXN0RWxlbWVudC5hcHBlbmQocHJvamVjdElucHV0Rm9ybSwgaWNvblNwYW4pO1xuICAgIHByb2plY3RzQ29udGFpbmVyLmluc2VydEJlZm9yZShwcm9qZWN0TGlzdEVsZW1lbnQsIHByb2plY3RzQ29udGFpbmVyLmxhc3RFbGVtZW50Q2hpbGQpO1xufVxuXG5jb25zdCBhZGRQcm9qZWN0VG9Ob3RlcGFkID0gKCkgPT4ge1xuICAgIGNvbnN0IHZpZXcgPSBjcmVhdGVFbGVtZW50cygpO1xuICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbGlzdCcpO1xuICAgIGNvbnN0IGN1cnJlbnRQcm9qZWN0TnVtYmVyID0gcHJvamVjdExpc3QuY2hpbGRFbGVtZW50Q291bnQgLSAyO1xuICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvamVjdExpc3QuY2hpbGRyZW5bY3VycmVudFByb2plY3ROdW1iZXJdLnRleHRDb250ZW50O1xuXG4gICAgY29uc3Qgbm90ZXBhZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3cml0aW5nLWFyZWEnKTtcbiAgICBjb25zdCBwcm9qZWN0RGl2ID0gdmlldy5jcmVhdGVEaXYoJ3Byb2plY3QnKTtcbiAgICBjb25zdCBza2lwTGluZSA9IHZpZXcuY3JlYXRlRGl2KCdza2lwLWxpbmUnKTtcbiAgICBcbiAgICBjb25zdCBwcm9qZWN0SGVhZGluZyA9IHZpZXcuY3JlYXRlRGl2KCdwcm9qZWN0LWhlYWRpbmcnKTtcbiAgICBjb25zdCBoMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgaDIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdub3RlcGFkLXRleHQnKTtcbiAgICBoMi50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xuICAgIGNvbnN0IGgzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgICBoMy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25vdGVwYWQtdGV4dCcpO1xuICAgIGgzLnRleHRDb250ZW50ID0gJ0R1ZSBEYXRlJztcbiAgICAgICAgXG4gICAgY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgIHRhc2tzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ25vdGVwYWQtdGV4dCcsICd0b2RvcycpO1xuXG4gICAgY29uc3QgYWRkVGFza0xpc3RFbGVtZW50ID0gdmlldy5jcmVhdGVMaXN0RWxlbWVudCgndGFzaycpO1xuICAgIGNvbnN0IGFkZFRhc2tTcGFuID0gdmlldy5jcmVhdGVTcGFuRWxlbWVudCgnYWRkLXRhc2snKTtcbiAgICBjb25zdCBhZGRJY29uID0gdmlldy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9hZGQtaWNvbi5zdmcnLCAnYWRkLWljb24nKTtcbiAgICBhZGRUYXNrU3Bhbi5hcHBlbmQoYWRkSWNvbiwgJ0FkZCBUYXNrJyk7XG5cbiAgICBhZGRUYXNrTGlzdEVsZW1lbnQuYXBwZW5kKGFkZFRhc2tTcGFuKTtcbiAgICB0YXNrc0NvbnRhaW5lci5hcHBlbmQoYWRkVGFza0xpc3RFbGVtZW50LCBza2lwTGluZSk7XG4gICAgcHJvamVjdEhlYWRpbmcuYXBwZW5kKGgyLCBoMyk7XG4gICAgcHJvamVjdERpdi5hcHBlbmQocHJvamVjdEhlYWRpbmcsIHRhc2tzQ29udGFpbmVyKTtcbiAgICBub3RlcGFkLmFwcGVuZChwcm9qZWN0RGl2KTtcbn1cblxuY29uc3QgX2NyZWF0ZVByb2plY3RJdGVtSFRNTCA9IChpZCwgbmFtZSkgPT4ge1xuICAgIC8vIGNyZWF0ZXMgSFRNTCBmb3IgcHJvamVjdCBpdGVtcyBpbiBzaWRlYmFyIGZyb20gbG9jYWxTdG9yYWdlIGl0ZW1cbiAgICBjb25zdCB2aWV3ID0gY3JlYXRlRWxlbWVudHMoKTtcblxuICAgIGNvbnN0IHByb2plY3RJdGVtID0gdmlldy5jcmVhdGVMaXN0RWxlbWVudCgncHJvamVjdC1pdGVtJyk7XG4gICAgcHJvamVjdEl0ZW0uc2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3QtaWQnLCBpZCk7XG4gICAgY29uc3QgcHJvamVjdE5hbWUgPSB2aWV3LmNyZWF0ZVNwYW5FbGVtZW50KCdwcm9qZWN0LW5hbWUnKTtcbiAgICBwcm9qZWN0TmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgY29uc3QgaWNvblNwYW4gPSBjcmVhdGVJY29uU3BhbigpO1xuXG4gICAgcHJvamVjdEl0ZW0uYXBwZW5kKHByb2plY3ROYW1lLCBpY29uU3Bhbik7XG5cbiAgICByZXR1cm4gcHJvamVjdEl0ZW07XG59XG5cbmNvbnN0IHVwZGF0ZVByb2plY3RMaXN0ID0gKHByb2plY3RzKSA9PiB7XG4gICAgY29uc3QgcHJvamVjdHNMaXN0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbGlzdCcpO1xuICAgIGNvbnN0IGFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hZGQtcHJvamVjdF0nKTtcbiAgICBcbiAgICAvLyBDbGVhciBhbGwgZWxlbWVudHMgb2YgY2xhc3MgJy5wcm9qZWN0LWl0ZW0nXG4gICAgY29uc3QgcHJvamVjdHNBcnJheSA9IFtdLnNsaWNlLmNhbGwocHJvamVjdHNMaXN0Q29udGFpbmVyLmNoaWxkcmVuKTtcbiAgICBwcm9qZWN0c0FycmF5LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucygncHJvamVjdC1pdGVtJykpIGl0ZW0ucmVtb3ZlKCk7XG4gICAgfSk7XG5cbiAgICBmb3IgKGNvbnN0IHByb2plY3Qgb2YgcHJvamVjdHMpIHtcbiAgICAgICAgY29uc3QgaHRtbCA9IF9jcmVhdGVQcm9qZWN0SXRlbUhUTUwocHJvamVjdC5pZCwgcHJvamVjdC5wcm9qZWN0TmFtZSk7XG4gICAgICAgIHByb2plY3RzTGlzdENvbnRhaW5lci5pbnNlcnRCZWZvcmUoaHRtbCwgYWRkUHJvamVjdEJ0bik7XG4gICAgfVxuXG4gICAgLy8gQWRkIGxpc3RlbmVycyBmb3IgZWRpdCwgZGVsZXRlID8/Pz9cbiAgICBwcm9qZWN0c0xpc3RDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3QtaXRlbScpLmZvckVhY2gocHJvamVjdEl0ZW0gPT4ge1xuICAgICAgICBwcm9qZWN0SXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGhhbmRsZXJzLm9uUHJvamVjdFNlbGVjdChwcm9qZWN0SXRlbS5kYXRhc2V0LnByb2plY3RJZCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5jb25zdCB1cGRhdGVBY3RpdmVUYWIgPSAodGFiKSA9PiB7XG4gICAgLy8gZm9yIGFsbCBvdGhlciBwcm9qZWN0cywgY2hhbmdlIGRpc3BsYXkgdG8gbm9uZSwgdG8gYnJpbmcgYmFjayBzZXQgZGlzcGxheSB0byBjb250ZW50cyAgXG4gICAgICAgIC8vIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIC8vIHJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBhbnkgb3RoZXIgc2lkZWJhciBlbGVtZW50XG4gICAgY29uc3QgY3VycmVudEFjdGl2ZVRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKTtcbiAgICBpZiAoY3VycmVudEFjdGl2ZVRhYikgY3VycmVudEFjdGl2ZVRhYi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICB0YWIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgY29uc3QgcHJvamVjdE5hbWVTcGFuID0gdGFiLmNoaWxkcmVuLml0ZW0oMCk7IC8vIFVwZGF0ZSBub3RlcGFkIGhlcmU/XG4gICAgLy9jb25zb2xlLmxvZyhwcm9qZWN0TmFtZVNwYW4pO1xufVxuXG5leHBvcnQgeyBhZGRQcm9qZWN0VG9TaWRlYmFyLCBhZGRQcm9qZWN0VG9Ob3RlcGFkLCBjcmVhdGVFbGVtZW50cywgdXBkYXRlUHJvamVjdExpc3QsIHVwZGF0ZUFjdGl2ZVRhYn07IiwiaW1wb3J0IHsgYWRkUHJvamVjdFRvU2lkZWJhciwgYWRkUHJvamVjdFRvTm90ZXBhZCwgY3JlYXRlRWxlbWVudHMgfSBmcm9tIFwiLi9jcmVhdGVET01FbGVtZW50c1wiO1xuaW1wb3J0IGhhbmRsZXJzIGZyb20gXCIuL2hhbmRsZXJzXCI7XG5cbmNvbnN0IGF3YWl0aW5nSW5wdXQgPSAoKSA9PiB7XG4gICAgY29uc3QgdXNlcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXItaW5wdXQnKTtcbiAgICBpZiAodXNlcklucHV0ICE9IG51bGwpIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5jb25zdCBoYW5kbGVVc2VySW5wdXQgPSAoKSA9PiB7IFxuICAgIC8vIFRoaXMgaXMgRE9NIFN0dWZmXG4gICAgY29uc3QgdXNlcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXItaW5wdXQnKVxuICAgIGNvbnN0IGlucHV0Rm9ybSA9IHVzZXJJbnB1dC5wYXJlbnRFbGVtZW50O1xuICAgIGNvbnN0IHByb2plY3RJdGVtID0gaW5wdXRGb3JtLnBhcmVudEVsZW1lbnQ7XG4gICAgY29uc3QgcHJvamVjdFNwYW4gPSBjcmVhdGVFbGVtZW50cygpLmNyZWF0ZVNwYW5FbGVtZW50KCdwcm9qZWN0LW5hbWUnKTtcbiAgICBcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IHVzZXJJbnB1dC52YWx1ZS50cmltKClcbiAgICBpZiAoIXByb2plY3ROYW1lKSByZXR1cm47XG5cbiAgICBwcm9qZWN0U3Bhbi50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xuICAgIHVzZXJJbnB1dC5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHByb2plY3RJdGVtLmluc2VydEJlZm9yZShwcm9qZWN0U3BhbiwgcHJvamVjdEl0ZW0uY2hpbGROb2Rlc1swXSk7IFxufVxuXG5jb25zdCBhZGRQcm9qZWN0ID0gKCkgPT4ge1xuICAgIGlmIChhd2FpdGluZ0lucHV0KCkpIHJldHVybjtcbiAgICBhZGRQcm9qZWN0VG9TaWRlYmFyKCk7XG4gICAgXG4gICAgY29uc3QgdXNlcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXItaW5wdXQnKVxuICAgIGNvbnN0IGlucHV0Rm9ybSA9IHVzZXJJbnB1dC5wYXJlbnRFbGVtZW50O1xuICAgIGNvbnN0IHByb2plY3RJdGVtID0gaW5wdXRGb3JtLnBhcmVudEVsZW1lbnQ7XG5cbiAgICB1c2VySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHVzZXJJbnB1dC52YWx1ZSAhPSAnJykgaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgIGlmICghYXdhaXRpbmdJbnB1dCgpKSBhZGRQcm9qZWN0VG9Ob3RlcGFkKCk7XG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvamVjdEl0ZW0uZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgIGhhbmRsZXJzLm9uUHJvamVjdEFkZChwcm9qZWN0TmFtZSk7IFxuICAgIH0pO1xuXG4gICAgaW5wdXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgIGlmICghYXdhaXRpbmdJbnB1dCgpKSBhZGRQcm9qZWN0VG9Ob3RlcGFkKCk7XG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvamVjdEl0ZW0uZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgIGhhbmRsZXJzLm9uUHJvamVjdEFkZChwcm9qZWN0TmFtZSk7IFxuICAgIH0pO1xufVxuLy8gVE9ETzogTG9vayBpbnRvIGhvdyB0byBhZGQgbG9jYWwgc3RvcmFnZSB0byBwb3NzaWJseSBtYWtlIGVkaXRpbmcgYW5kIGRlbGV0aW5nIGVhc2llci4gT3IgcmVmZXJlbmNlIGxpYnJhcnkgcHJvamVjdCBmb3IgaXRzIHVzZSBvZiBhcnJheXMgdG8gc3RvcmUgdXNlciBkYXRhXG4vLyBUT0RPOiBBZGQgZnVuY3Rpb24gdG8gZGVsZXRlIHByb2plY3QgZnJvbSBub3RlcGFkIGFzIHdlbGxcbmNvbnN0IGRlbGV0ZVByb2plY3QgPSAoKSA9PiB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLmRlbGV0ZS1wcm9qZWN0JykpIHtcbiAgICAgICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy5wcm9qZWN0LWl0ZW0nKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8gVE9ETzogY3JlYXRlIGZ1bmN0aW9uIHRvIHVwZGF0ZSBwcm9qZWN0IG5hbWUgb24gbm90ZXBhZCB3aGVuIHVzZXIgZWRpdHMgaXRcbiBcbmNvbnN0IGVkaXRQcm9qZWN0ID0gKGUpID0+IHtcbiAgICBpZiAoYXdhaXRpbmdJbnB1dCgpKSByZXR1cm47XG4gICAgXG4gICAgLy8gVGhpcyBpcyBET00gU3R1ZmZcbiAgICBjb25zdCBpbnB1dEZvcm0gPSBjcmVhdGVFbGVtZW50cygpLmNyZWF0ZUZvcm0oKTtcbiAgICBjb25zdCBpbnB1dEZpZWxkID0gY3JlYXRlRWxlbWVudHMoKS5jcmVhdGVJbnB1dEZpZWxkKCdQcm9qZWN0IG5hbWUuLi4nKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgIGlucHV0RmllbGQudmFsdWUgPSBwcm9qZWN0TmFtZS50ZXh0Q29udGVudDtcbiAgICBwcm9qZWN0TmFtZS5yZW1vdmUoKTtcbiAgICBpbnB1dEZvcm0uYXBwZW5kKGlucHV0RmllbGQpO1xuXG4gICAgY29uc3QgcHJvamVjdEl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCcucHJvamVjdC1pdGVtJyk7XG4gICAgcHJvamVjdEl0ZW0uaW5zZXJ0QmVmb3JlKGlucHV0Rm9ybSwgcHJvamVjdEl0ZW0uY2hpbGROb2Rlc1swXSk7XG5cbiAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1pbnB1dCcpO1xuXG4gICAgdXNlcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh1c2VySW5wdXQudmFsdWUgIT0gJycpIGhhbmRsZVVzZXJJbnB1dCgpO1xuICAgICAgICAvL2lmICghYXdhaXRpbmdJbnB1dCgpKSBlZGl0UHJvamVjdFRvTm90ZXBhZCgpO1xuICAgIH0pO1xuXG4gICAgaW5wdXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgIC8vaWYgKCFhd2FpdGluZ0lucHV0KCkpIGVkaXRQcm9qZWN0T25Ob3RlcGFkKCk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCB7IFxuICAgIGFkZFByb2plY3QsXG4gICAgZGVsZXRlUHJvamVjdCxcbiAgICBlZGl0UHJvamVjdFxufSIsImltcG9ydCB7IGFkZFByb2plY3QsIGRlbGV0ZVByb2plY3QsIGVkaXRQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcbmltcG9ydCB1cGRhdGVTdG9yYWdlIGZyb20gXCIuL3N0b3JhZ2VcIjtcbmltcG9ydCB7IHVwZGF0ZVByb2plY3RMaXN0IH0gZnJvbSBcIi4vY3JlYXRlRE9NRWxlbWVudHNcIjtcbmltcG9ydCB7IHRvZ2dsZVRhc2ssIGFkZFRhc2tUb0RPTSB9IGZyb20gXCIuL3Rhc2tzXCI7XG5cbi8vIExvYWQgbG9jYWxTdG9yYWdlIGl0ZW1zIG9uIHBhZ2UgbG9hZFxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0cyA9IHVwZGF0ZVN0b3JhZ2UuZ2V0UHJvamVjdHMoKTtcbiAgICB1cGRhdGVQcm9qZWN0TGlzdChwcm9qZWN0cyk7XG59XG5cbi8vIFNpZGViYXIgTW9kdWxlXG5jb25zdCBzaWRlYmFyQ29udHJvbGxlciA9ICgoKSA9PiB7XG5cbiAgICBjb25zdCBtb2JpbGVUb2dnbGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFycy1pY29uLW1vYmlsZScpO1xuICAgIGlmIChzY3JlZW4ud2lkdGggPD0gMTAyNCAmJiBtb2JpbGVUb2dnbGVCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICBtb2JpbGVUb2dnbGVCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWRlYmFyJyk7XG4gICAgXG4gICAgY29uc3QgdG9nZ2xlU2lkZWJhciA9ICgpID0+IHtcbiAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QudG9nZ2xlKCd0b2dnbGUtc2lkZWJhcicpO1xuICAgICAgICBpZiAoc2NyZWVuLndpZHRoIDw9IDEwMjQpIG1vYmlsZVRvZ2dsZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdG9nZ2xlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhcnMtaWNvbicpO1xuICAgIHRvZ2dsZUJ0bi5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVNpZGViYXIpO1xuICAgIH0pOyAgICAgICAgXG59KSgpO1xuXG5jb25zdCBwcm9qZWN0Q29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgZGVsZXRlUHJvamVjdCgpO1xuICAgIGNvbnN0IGFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hZGQtcHJvamVjdF0nKTtcbiAgICBhZGRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkUHJvamVjdCk7XG4gICAgXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0LXByb2plY3QnKSkge1xuICAgICAgICAgICAgZWRpdFByb2plY3QoZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKCk7XG5cbmNvbnN0IHRhc2tDb250cm9sbGVyID0gKCgpID0+IHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Rhc2staXRlbScpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB0b2dnbGVUYXNrKHRhc2tFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZGQtdGFzaycpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYWRkIHRhc2snKTtcbiAgICAgICAgICAgIGFkZFRhc2tUb0RPTSgpO1xuICAgICAgICB9XG5cbiAgICB9KTtcbn0pKCk7XG4vKlxudXBkYXRlU3RvcmFnZS5zYXZlUHJvamVjdCh7XG4gICAgcHJvamVjdE5hbWU6IFwiUHJvamVjdCAxXCIsXG4gICAgdGFza3M6IFtbXCJGaW5pc2ggdG9kbyBsaXN0XCIsIFwibG93XCIsIFwiZHVlRGF0ZVwiLCBmYWxzZV0sIFtcIkRvIHNvbWV0aGluZ1wiLCBcIm1lZGl1bVwiLCBcImR1ZURhdGVcIiwgdHJ1ZV0sIFtcIkRvIHNvbWV0aGluZyBlbHNlXCIsIFwiaGlnaFwiLCBcImR1ZURhdGVcIiwgZmFsc2VdXSxcbiAgICBpZDogODE2MDg5XG59KTtcbiovXG4vL3N0b3JhZ2UuZGVsZXRlUHJvamVjdCg1ODE4NDApOyIsImltcG9ydCBjcmVhdGVFbGVtZW50cyBmcm9tIFwiLi9jcmVhdGVET01FbGVtZW50c1wiO1xuXG5jb25zdCB0b2dnbGVUYXNrID0gKHRhc2tFbGVtZW50KSA9PiB7XG4gICAgdGFza0VsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnY29tcGxldGVkJyk7XG59XG5cbi8vIFRPRE86IEJlZm9yZSBjb250aW51aW5nIHdpdGggdGhpcyBzdHVmZiwgZ2V0IHRoZSBwcm9qZWN0IGRpdiBzdHVmZiBvbiBub3RlcGFkIHdoZW4gdXNlciBhZGRzIG5ldyBwcm9qZWN0XG5jb25zdCBhZGRUYXNrVG9ET00gPSAoKSA9PiB7XG4gICAgLy8gY3JlYXRlIHNwYW4gd2l0aCBjbGFzcyAndGFzay1pdGVtJ1xuICAgIC8vIHNwYW4gc2hvdWxkIGdldCB1c2VyIGlucHV0IGFuZCBzYXZlIGl0IGFzIHNwYW4udGV4dENvbnRlbnRcbiAgICAvLyBjcmVhdGUgc3BhbiB3aXRoIGNsYXNzICdpY29ucydcbiAgICAvLyBhZGQgZWRpdCBhbmQgZGVsZXRlIGljb25zXG5cbiAgICBjb25zdCB0YXNrU3BhbiA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZVNwYW5FbGVtZW50KCd0YXNrLWl0ZW0nKTtcbiAgICB0YXNrU3Bhbi50ZXh0Q29udGVudCA9ICd1c2VyIGlucHV0JzsgLy8gVE9ETzogR2V0IHVzZXIgaW5wdXRcblxuICAgIGNvbnN0IGljb25TcGFuID0gY3JlYXRlRWxlbWVudHMuY3JlYXRlU3BhbkVsZW1lbnQoJ2ljb25zJyk7XG4gICAgLy8gVE9ETzogQ2FuJ3QgYWRkIHNlY29uZCBjbGFzcyB3aXRoIHRoaXMgbWV0aG9kIHNvIGZpZ3VyZSBvdXQgYW5vdGhlciB3YXkgdG8gYWRkIGEgc2Vjb25kIGNsYXNzIHRvIGljb25zXG4gICAgY29uc3QgZWRpdEljb24gPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9lZGl0LWljb24uc3ZnJywgJ2VkaXQtaWNvbicpO1xuICAgIGNvbnN0IGRlbGV0ZUljb24gPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9kZWxldGUtaWNvbi5zdmcnLCAnZGVsZXRlLWljb24nKTtcblxuICAgIGljb25TcGFuLmFwcGVuZChlZGl0SWNvbiwgZGVsZXRlSWNvbik7XG4gICAgdGFza1NwYW4uYXBwZW5kKGljb25TcGFuKTtcblxuICAgIHJldHVybiB0YXNrU3Bhbjtcbn1cblxuY29uc3QgYWRkRHVlRGF0ZVRvRE9NID0gKCkgPT4ge1xuICAgIC8vIGNyZWF0ZSBzcGFuIHdpdGggY2xhc3MgJ2R1ZS1kYXRlJ1xuICAgIC8vIGNyZWF0ZSBwcmlvcml0eSBpY29uIHdpdGggY2xhc3MgJ3ByaW9yaXR5LWljb24gcHJpb3JpdHktbG93J1xuICAgIC8vIGNyZWF0ZSBzcGFuIHdpdGggY2xhc3MgJ2RhdGUnIGFuZCBzZXQgdGV4dENvbnRlbnQgdG8gZGVmYXVsdCBkYXRlIChjdXJyZW50IGRhdGUpXG4gICAgLy8gY3JlYXRlIGNhbGVuZGFyIGljb24gd2l0aCBjbGFzcyAnY2FsZW5kYXItaWNvbidcbiAgICBjb25zdCBjcmVhdGVEdWVEYXRlID0gY3JlYXRlRWxlbWVudHMoKTtcblxuICAgIC8vY29uc3QgZHVlRGF0ZVNwYW4gPSBjcmVhdGVEdWVEYXRlLlxufVxuXG5jb25zdCBhZGRUYXNrID0gKCkgPT4ge1xuICAgIC8vIGNyZWF0ZSBsaSB3aXRoIGNsYXNzICd0YXNrJyBhbmQgYXBwZW5kIGV2ZXJ5dGhpbmcgdG8gaXRcblxufVxuXG5leHBvcnQge1xuICAgIHRvZ2dsZVRhc2ssXG4gICAgYWRkVGFza1RvRE9NLFxufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJnZXRQcm9qZWN0cyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzYXZlUHJvamVjdCIsInByb2plY3RUb1NhdmUiLCJwcm9qZWN0cyIsImV4aXN0aW5nIiwiZmluZCIsInByb2plY3QiLCJpZCIsInByb2plY3ROYW1lIiwidGFza3MiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwdXNoIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImRlbGV0ZVByb2plY3QiLCJ1cGRhdGVkUHJvamVjdExpc3QiLCJmaWx0ZXIiLCJfc2V0QWN0aXZlVGFiIiwidGFiIiwidXBkYXRlQWN0aXZlVGFiIiwib25Qcm9qZWN0U2VsZWN0IiwicHJvamVjdElkIiwicHJvamVjdE9iamVjdCIsInNlbGVjdGVkUHJvamVjdCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm9uUHJvamVjdEFkZCIsIm5ld1Byb2plY3QiLCJ1cGRhdGVQcm9qZWN0TGlzdCIsIm5ld1Byb2plY3RET01FbGVtZW50IiwiY29uc29sZSIsImxvZyIsImNyZWF0ZUxpc3RFbGVtZW50IiwiaHRtbENsYXNzIiwibGkiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiY3JlYXRlU3BhbkVsZW1lbnQiLCJzcGFuIiwiY2xhc3NMaXN0IiwiYWRkIiwiY3JlYXRlSW1hZ2VFbGVtZW50Iiwic3JjIiwiaW1nIiwiY3JlYXRlSW5wdXRGaWVsZCIsInBsYWNlaG9sZGVyVGV4dCIsInVzZXJJbnB1dCIsInJlcXVpcmVkIiwiY3JlYXRlRm9ybSIsImNyZWF0ZURpdiIsImRpdiIsImNyZWF0ZUljb25TcGFuIiwidmlldyIsImljb25TcGFuIiwiZWRpdEljb24iLCJkZWxldGVJY29uIiwiYXBwZW5kIiwiYWRkUHJvamVjdFRvU2lkZWJhciIsInByb2plY3RzQ29udGFpbmVyIiwicHJvamVjdExpc3RFbGVtZW50IiwicHJvamVjdElucHV0Rm9ybSIsInByb2plY3ROYW1lSW5wdXQiLCJpbnNlcnRCZWZvcmUiLCJsYXN0RWxlbWVudENoaWxkIiwiYWRkUHJvamVjdFRvTm90ZXBhZCIsInByb2plY3RMaXN0IiwiY3VycmVudFByb2plY3ROdW1iZXIiLCJjaGlsZEVsZW1lbnRDb3VudCIsImNoaWxkcmVuIiwidGV4dENvbnRlbnQiLCJub3RlcGFkIiwicHJvamVjdERpdiIsInNraXBMaW5lIiwicHJvamVjdEhlYWRpbmciLCJoMiIsImgzIiwidGFza3NDb250YWluZXIiLCJhZGRUYXNrTGlzdEVsZW1lbnQiLCJhZGRUYXNrU3BhbiIsImFkZEljb24iLCJfY3JlYXRlUHJvamVjdEl0ZW1IVE1MIiwibmFtZSIsInByb2plY3RJdGVtIiwicHJvamVjdHNMaXN0Q29udGFpbmVyIiwiYWRkUHJvamVjdEJ0biIsInNsaWNlIiwiZm9yRWFjaCIsIml0ZW0iLCJjb250YWlucyIsInJlbW92ZSIsImh0bWwiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImRhdGFzZXQiLCJjdXJyZW50QWN0aXZlVGFiIiwiYXdhaXRpbmdJbnB1dCIsImhhbmRsZVVzZXJJbnB1dCIsInBhcmVudEVsZW1lbnQiLCJwcm9qZWN0U3BhbiIsInRyaW0iLCJjaGlsZE5vZGVzIiwiYWRkUHJvamVjdCIsImlucHV0Rm9ybSIsImZpcnN0RWxlbWVudENoaWxkIiwiZSIsInByZXZlbnREZWZhdWx0Iiwid2luZG93Iiwib25sb2FkIiwibW9iaWxlVG9nZ2xlQnRuIiwiZ2V0RWxlbWVudEJ5SWQiLCJzY3JlZW4iLCJ3aWR0aCIsInRvZ2dsZSIsInNpZGViYXIiLCJ0b2dnbGVTaWRlYmFyIiwiYnV0dG9uIiwidGFyZ2V0IiwiY2xvc2VzdCIsImlucHV0RmllbGQiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiZWRpdFByb2plY3QiLCJ0YXNrU3BhbiIsImFkZFRhc2tUb0RPTSJdLCJzb3VyY2VSb290IjoiIn0=