(()=>{"use strict";const e=(()=>{const e=()=>JSON.parse(localStorage.getItem("projects")||"[]"),t=t=>{const n=e(),r=n.find((e=>e.id==t.id));r?(r.projectName=t.projectName,r.tasks=t.tasks):(t.id=Math.floor(1e6*Math.random()),n.push(t)),localStorage.setItem("projects",JSON.stringify(n))};return{getProjects:e,getTasks:t=>e().find((e=>e.id==t)).tasks,saveProject:t,deleteProject:t=>{const n=e().filter((e=>e.id!=t));localStorage.setItem("projects",JSON.stringify(n))},deleteTask:(n,r)=>{const a=e().find((e=>e.id==n)),o=a.tasks.filter((e=>e.taskId!=r));a.tasks=o,t(a)},findTaskToUpdate:(t,n)=>e().find((e=>e.id==t)).tasks.find((e=>e.taskId==n)),updateTask:(t,n)=>{const r=e(),a=r.find((e=>e.id==t)),o=a.tasks,s=o.findIndex((e=>e.taskId==n.taskId));o[s]=n,a.tasks=o,localStorage.setItem("projects",JSON.stringify(r))}}})();function t(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function n(e){t(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===n?new Date(e.getTime()):"number"==typeof e||"[object Number]"===n?new Date(e):("string"!=typeof e&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function r(e){t(1,arguments);var r=n(e);return r.setHours(0,0,0,0),r}function a(e,n){t(2,arguments);var a=r(e),o=r(n);return a.getTime()===o.getTime()}function o(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}var s=36e5,i={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},c=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,d=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,l=/^([+-])(\d{2})(?::?(\d{2}))?$/;function u(e,n){t(1,arguments);var r=n||{},a=null==r.additionalDigits?2:o(r.additionalDigits);if(2!==a&&1!==a&&0!==a)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var s,i=m(e);if(i.date){var c=p(i.date,a);s=g(c.restDateString,c.year)}if(isNaN(s)||!s)return new Date(NaN);var d,l=s.getTime(),u=0;if(i.time&&(u=E(i.time),isNaN(u)||null===u))return new Date(NaN);if(!i.timezone){var f=new Date(l+u),k=new Date(0);return k.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),k.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),k}return d=y(i.timezone),isNaN(d)?new Date(NaN):new Date(l+u+d)}function m(e){var t,n={},r=e.split(i.dateTimeDelimiter);if(r.length>2)return n;if(/:/.test(r[0])?(n.date=null,t=r[0]):(n.date=r[0],t=r[1],i.timeZoneDelimiter.test(n.date)&&(n.date=e.split(i.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var a=i.timezone.exec(t);a?(n.time=t.replace(a[1],""),n.timezone=a[1]):n.time=t}return n}function p(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),r=e.match(n);if(!r)return{year:null};var a=r[1]&&parseInt(r[1]),o=r[2]&&parseInt(r[2]);return{year:null==o?a:100*o,restDateString:e.slice((r[1]||r[2]).length)}}function g(e,t){if(null===t)return null;var n=e.match(c);if(!n)return null;var r=!!n[4],a=f(n[1]),o=f(n[2])-1,s=f(n[3]),i=f(n[4]),d=f(n[5])-1;if(r)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,i,d)?function(e,t,n){var r=new Date(0);r.setUTCFullYear(e,0,4);var a=7*(t-1)+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+a),r}(t,i,d):new Date(NaN);var l=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(v[t]||(j(e)?29:28))}(t,o,s)&&function(e,t){return t>=1&&t<=(j(e)?366:365)}(t,a)?(l.setUTCFullYear(t,o,Math.max(a,s)),l):new Date(NaN)}function f(e){return e?parseInt(e):1}function E(e){var t=e.match(d);if(!t)return null;var n=k(t[1]),r=k(t[2]),a=k(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,r,a)?n*s+6e4*r+1e3*a:NaN}function k(e){return e&&parseFloat(e.replace(",","."))||0}function y(e){if("Z"===e)return 0;var t=e.match(l);if(!t)return 0;var n="+"===t[1]?-1:1,r=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,a)?n*(r*s+6e4*a):NaN}var v=[31,null,31,30,31,30,31,31,30,31,30,31];function j(e){return e%400==0||e%4==0&&e%100}function S(e,r){t(1,arguments);var a=r||{},s=a.locale,i=s&&s.options&&s.options.weekStartsOn,c=null==i?0:o(i),d=null==a.weekStartsOn?c:o(a.weekStartsOn);if(!(d>=0&&d<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var l=n(e),u=l.getDay(),m=(u<d?7:0)+u-d;return l.setDate(l.getDate()-m),l.setHours(0,0,0,0),l}function h(e,n,r){t(2,arguments);var a=S(e,r),o=S(n,r);return a.getTime()===o.getTime()}const T=(()=>{const n=()=>{const t=e.getProjects();w(t)},r=e=>{if(function(e){return t(1,arguments),a(e,Date.now())}(u(e.dueDate)))return e},o=e=>{if(function(e,n){return t(1,arguments),h(e,Date.now(),n)}(u(e.dueDate)))return e},s=e=>{i();const t=document.querySelector(".notepad");e.forEach((e=>{D(e.id);const n=e.tasks,r=t.querySelector(`[data-project-id="${e.id}"]`),a=r.querySelector("ul"),o=r.querySelector(".add-task");n.forEach((e=>{const t=N(e);a.insertBefore(t,o.parentElement)}))}))},i=()=>{document.querySelector("#writing-area").querySelectorAll(".project").forEach((e=>e.remove()))};return{onProjectSelect:t=>{const n=e.getProjects();s(n);const r=n.find((e=>e.id==t)),a=document.querySelector("#sidebar").querySelector(`[data-project-id='${r.id}']`);document.querySelectorAll(".project").forEach((e=>{e.dataset.projectId!=t&&e.remove()})),C(a)},onProjectAdd:t=>{const r={projectName:t,tasks:[]};e.saveProject(r),n(),document.querySelector(`[data-project-id='${r.id}']`)},onProjectNameEdit:(t,r,a=e.getTasks(t))=>{e.saveProject({id:t,projectName:r,tasks:a}),n()},onTaskAdd:(t,n)=>{const r={item:t,taskId:Math.floor(1e6*Math.random()),priority:"low",dueDate:null,isComplete:!1},a=e.getProjects().find((e=>e.id==n));return a.tasks.push(r),e.saveProject(a),r},onTaskNameEdit:(t,n,r)=>{const a=e.findTaskToUpdate(t,n);e.updateTask(t,{item:r,taskId:a.taskId,priority:a.priority,dueDate:a.dueDate,isComplete:a.isComplete})},onTaskPriorityEdit:(t,n,r)=>{const a=e.findTaskToUpdate(t,n);e.updateTask(t,{item:a.item,taskId:a.taskId,priority:r,dueDate:a.dueDate,isComplete:a.isComplete})},onTaskDueDateEdit:(t,n,r)=>{const a=e.findTaskToUpdate(t,n);e.updateTask(t,{item:a.item,taskId:a.taskId,priority:a.priority,dueDate:r,isComplete:a.isComplete})},onTaskCompleteEdit:(t,n,r)=>{const a=e.findTaskToUpdate(t,n);e.updateTask(t,{item:a.item,taskId:a.taskId,priority:a.priority,dueDate:a.dueDate,isComplete:r})},onHomeTabSelect:(e,t)=>{s(e),C(t)},onTodayTabSelect:(e,t)=>{s(e),e.forEach((e=>{const t=e.tasks;0===t.filter((e=>r(e))).length&&document.querySelector(".notepad").querySelector(`[data-project-id="${e.id}"]`).remove(),t.filter((e=>!r(e))).forEach((e=>{const t=document.querySelector(`[data-task-id="${e.taskId}"]`);t&&t.remove()}))})),C(t)},onThisWeekTabSelect:(e,t)=>{s(e),e.forEach((e=>{const t=e.tasks;0===t.filter((e=>o(e))).length&&document.querySelector(".notepad").querySelector(`[data-project-id="${e.id}"]`).remove(),t.filter((e=>!o(e))).forEach((e=>{const t=document.querySelector(`[data-task-id="${e.taskId}"]`);t&&t.remove()}))})),C(t)}}})(),I=()=>({createListElement:e=>{const t=document.createElement("li");return t.setAttribute("class",e),t},createSpanElement:e=>{const t=document.createElement("span");return t.classList.add(e),t},createImageElement:(e,t)=>{const n=document.createElement("img");return n.classList.add(t),n.setAttribute("src",e),n.setAttribute("draggable","false"),n},createInputField:e=>{const t=document.createElement("input");return t.setAttribute("type","text"),t.setAttribute("placeholder",e),t.setAttribute("id","user-input"),t.required=!0,t},createForm:()=>document.createElement("form"),createDiv:e=>{const t=document.createElement("div");return t.setAttribute("class",e),t}}),b=()=>{const e=I(),t=e.createSpanElement("icons"),n=e.createImageElement("images/edit-icon.svg","edit-icon"),r=e.createImageElement("images/delete-icon.svg","delete-icon");return n.classList.add("edit-project"),r.classList.add("delete-project"),t.append(n,r),t},D=t=>{const n=I(),r=e.getProjects().find((e=>e.id==t)).projectName,a=document.querySelector("#writing-area"),o=n.createDiv("project");o.setAttribute("data-project-id",t);const s=n.createDiv("skip-line"),i=n.createDiv("project-heading"),c=document.createElement("h2");c.setAttribute("class","notepad-text"),c.textContent=r;const d=document.createElement("h3");d.setAttribute("class","notepad-text"),d.textContent="Due Date";const l=document.createElement("ul");l.classList.add("notepad-text","todos");const u=n.createListElement("task"),m=n.createSpanElement("add-task"),p=n.createImageElement("images/add-icon.svg","add-icon");m.append(p,"Add Task"),u.append(m),l.append(u,s),i.append(c,d),o.append(i,l),a.append(o)},L=()=>{const e=I().createSpanElement("due-date"),t=I().createImageElement("images/priority-icon.svg","priority-icon");t.classList.add("priority-low");const n=document.createElement("label");n.classList.add("date-label");const r=document.createElement("input");r.setAttribute("type","date"),r.required=!0;const a=I().createImageElement("images/calendar-icon.svg","calendar-icon");return n.append(r,a),e.append(t,n),r.addEventListener("change",(()=>{const e=r.closest(".project").dataset.projectId,t=r.closest("[data-task-id]").dataset.taskId,n=r.value;return T.onTaskDueDateEdit(e,t,n)})),e},q=(e,t)=>{const n=I(),r=n.createListElement("project-item");r.setAttribute("data-project-id",e);const a=n.createSpanElement("project-name");a.textContent=t;const o=b();return r.append(a,o),r},w=e=>{const t=document.querySelector(".project-list"),n=document.querySelector("[data-add-project]");[].slice.call(t.children).forEach((e=>{e.classList.contains("project-item")&&e.remove()}));for(const r of e){const e=q(r.id,r.projectName);t.insertBefore(e,n)}t.querySelectorAll(".project-item").forEach((e=>{e.addEventListener("click",(t=>{const n=document.querySelector("#user-input");"IMG"===t.target.nodeName||n||T.onProjectSelect(e.dataset.projectId)}))}))},N=e=>{const t=I(),n=t.createListElement("task");n.setAttribute("data-task-id",e.taskId);const r=t.createSpanElement("task-item"),a=t.createSpanElement("task-text");a.textContent=e.item;const o=b();r.append(a,o);const s=L();return s.querySelector(".priority-icon").classList.add(`priority-${e.priority}`),s.querySelector("input").value=e.dueDate,e.isComplete&&n.classList.add("completed"),n.append(r,s),n},C=e=>{const t=document.querySelector(".active");t&&t.classList.remove("active"),e.classList.add("active"),e.children.item(0)},P=()=>null!=document.querySelector("#user-input"),A=()=>{const e=document.querySelector("#user-input"),t=e.parentElement.parentElement,n=I().createSpanElement("project-name"),r=e.value.trim();r&&(n.textContent=r,e.parentElement.remove(),t.insertBefore(n,t.childNodes[0]))},x=()=>{if(P())return;(()=>{const e=I(),t=document.querySelector(".project-list"),n=e.createListElement("project-item"),r=e.createForm(),a=e.createInputField("Project name...");r.append(a);const o=b();n.append(r,o),t.insertBefore(n,t.lastElementChild),setTimeout((()=>{a.focus()}),0)})();const e=document.querySelector("#user-input"),t=e.parentElement,n=t.parentElement;e.addEventListener("blur",(function(){if(""==e.value.trim())return void n.remove();A();const t=n.firstElementChild.textContent;T.onProjectAdd(t);const r=document.querySelector(".project-list"),a=r.children[r.childElementCount-2].getAttribute("data-project-id");P()||D(a)})),t.addEventListener("submit",(function(e){e.preventDefault(),A();const t=n.firstElementChild.textContent;T.onProjectAdd(t);const r=document.querySelector(".project-list"),a=r.children[r.childElementCount-2].getAttribute("data-project-id");P()||D(a)}))},U=()=>{const e=document.querySelector("#user-input"),t=e.parentElement,n=t.parentElement.parentElement;e.addEventListener("blur",(function(){const t=n.closest("[data-project-id]").dataset.projectId,r=e.value;F(),r&&$(r,t,n)})),t.addEventListener("submit",(function(t){t.preventDefault();const r=n.closest("[data-project-id]").dataset.projectId,a=e.value;F(),a&&$(a,r,n)}))},$=(e,t,n)=>{if(n.dataset.taskId)return T.onTaskNameEdit(t,n.dataset.taskId,e);const r=T.onTaskAdd(e,t);n.setAttribute("data-task-id",r.taskId)},F=()=>{const e=document.querySelector("#user-input"),t=e.parentElement,n=t.parentElement,r=n.parentElement,a=e.value.trim(),o=I().createSpanElement("task-text");o.append(a),""!=a||r.dataset.taskId?""==a&&r.dataset.taskId||(t.remove(),n.prepend(o)):r.remove()};window.onload=()=>{const t=e.getProjects(),n=document.querySelector('[data-tab="home"]');w(t),T.onHomeTabSelect(t,n)},(()=>{const t=document.getElementById("bars-icon-mobile"),n=document.getElementById("sidebar");window.innerWidth<=1024&&t.classList.contains("hidden")&&t.classList.toggle("hidden"),window.addEventListener("resize",(()=>{n.classList.contains("toggle-sidebar")||window.innerWidth<=1024&&t.classList.contains("hidden")&&t.classList.toggle("hidden")}));const r=()=>{n.classList.toggle("toggle-sidebar"),window.innerWidth<=1024&&t.classList.toggle("hidden")};document.querySelectorAll(".bars-icon").forEach((e=>{e.addEventListener("click",r)}));const a=n.querySelector('[data-tab="home"]'),o=n.querySelector('[data-tab="today"]'),s=n.querySelector('[data-tab="this-week"]');a.addEventListener("click",(()=>{const t=e.getProjects();T.onHomeTabSelect(t,a)})),o.addEventListener("click",(()=>{const t=e.getProjects();T.onTodayTabSelect(t,o)})),s.addEventListener("click",(()=>{const t=e.getProjects();T.onThisWeekTabSelect(t,s)}))})(),document.querySelector(".project-list").addEventListener("click",(t=>{if(t.target.closest(".delete-project")){if(!confirm("Are you sure you want to delete this project and all its tasks? This action cannot be undone."))return;const n=t.target.closest("[data-project-id]").dataset.projectId;document.querySelectorAll(`[data-project-id="${n}"]`).forEach((e=>e.remove())),e.deleteProject(n)}})),document.querySelector("[data-add-project]").addEventListener("click",x),document.querySelector(".project-list").addEventListener("click",(e=>{e.target.classList.contains("edit-project")&&(e=>{if(P())return;const t=I().createForm(),n=I().createInputField("Project name..."),r=e.target.parentElement.previousElementSibling;n.value=r.textContent,r.remove(),t.append(n);const a=e.target.closest(".project-item");a.insertBefore(t,a.childNodes[0]);const o=document.querySelector("#user-input");o.focus();const s=a.dataset.projectId;o.addEventListener("blur",(function(){""!=o.value&&A();const e=a.firstElementChild.textContent;i(s,e),T.onProjectNameEdit(s,e)})),t.addEventListener("submit",(function(e){e.preventDefault(),A();const t=a.firstElementChild.textContent;i(s,t),T.onProjectNameEdit(s,t)}));const i=(e,t)=>{const n=document.querySelector(".notepad").querySelector(`[data-project-id="${e}"]`);n&&(n.childNodes[0].childNodes[0].textContent=t)}})(e)})),document.querySelector(".notepad").addEventListener("click",(t=>{var n,r;t.target.classList.contains("task-text")?(e=>{e.classList.toggle("completed");let t=!1;e.classList.contains("completed")&&(t=!0);const n=e.closest(".project").dataset.projectId,r=e.dataset.taskId;T.onTaskCompleteEdit(n,r,t)})(t.target.closest(".task")):t.target.classList.contains("add-task")?((e=>{if(document.getElementById("user-input"))return;const t=I().createListElement("task"),n=I().createSpanElement("task-item"),r=I().createForm(),a=I().createInputField("Enter Task...");r.append(a),n.append(r);const o=I().createSpanElement("icons"),s=I().createImageElement("images/edit-icon.svg","edit-icon"),i=I().createImageElement("images/delete-icon.svg","delete-icon");o.append(s,i),n.append(o);const c=L();t.append(n,c);const d=e.closest(".todos"),l=d.childElementCount-2;d.insertBefore(t,d.children[l]),setTimeout((()=>{a.focus()}),0)})(t.target),U()):t.target.classList.contains("priority-icon")?(e=>{if(e.parentElement.parentElement.classList.contains("completed"))return;const t=e.closest(".project").dataset.projectId,n=e.closest("[data-task-id]").dataset.taskId,r=e.classList;r.contains("priority-low")?(r.remove("priority-low"),r.add("priority-medium"),T.onTaskPriorityEdit(t,n,"medium")):r.contains("priority-medium")?(r.remove("priority-medium"),r.add("priority-high"),T.onTaskPriorityEdit(t,n,"high")):r.contains("priority-high")&&(r.remove("priority-high"),r.add("priority-low"),T.onTaskPriorityEdit(t,n,"low"))})(t.target):t.target.classList.contains("edit-icon")?(e=>{if(e.classList.contains("completed"))return;const t=e.querySelector(".task-text"),n=t.textContent;t.remove();const r=I().createForm(),a=I().createInputField("Enter Task...");a.value=n,r.append(a);const o=e.querySelector(".task-item"),s=e.querySelector(".icons");o.insertBefore(r,s),e.prepend(o),a.focus(),U()})(t.target.closest(".task")):t.target.classList.contains("delete-icon")&&(n=t.target.closest("[data-project-id]").dataset.projectId,r=t.target.closest("[data-task-id]").dataset.taskId,document.querySelector(`[data-task-id="${r}"]`).remove(),e.deleteTask(n,r))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEdBRWpDOU0sRUFBSzJRLFFBQVFzQixHQUNiMUIsRUFBV1QsUUFDWFEsS0NnQ1FtQyxDQURhN0QsRUFBRUMsT0FBT1YsUUFBUSxVQUcxQlMsRUFBRUMsT0FBTzVDLFVBQVV5QyxTQUFTLGlCRC9CeEJyUCxFQ2dDVXVQLEVBQUVDLE9BQU9WLFFBQVEscUJBQXFCakUsUUFBUTdLLFVEaEM3Q0ssRUNpQ0prUCxFQUFFQyxPQUFPVixRQUFRLGtCQUFrQmpFLFFBQVF4SyxPRGhDckR1SixTQUFTQyxjQUFjLGtCQUFrQnhKLE9BQ2pEb0ssU0FDTCxhQUF5QnpLLEVBQVdLLFEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvc3RvcmFnZS5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vdG9EYXRlL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vc3RhcnRPZkRheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZURheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vcGFyc2VJU08vaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdGFydE9mV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZVdlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2hhbmRsZXJzLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vaXNUb2RheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzVGhpc1dlZWsvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2NyZWF0ZURPTUVsZW1lbnRzLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9wcm9qZWN0cy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdGFza3MuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHVwZGF0ZVN0b3JhZ2UgPSAoKSA9PiB7XG4gICAgXG4gICAgY29uc3QgZ2V0UHJvamVjdHMgPSAoKSA9PiB7XG4gICAgICAgIC8vIGNyZWF0ZXMgYW4gYXJyYXkgb2Ygb2JqZWN0cyBcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0cycpIHx8ICdbXScpO1xuICAgICAgICByZXR1cm4gcHJvamVjdHM7XG4gICAgfVxuXG4gICAgY29uc3QgZ2V0VGFza3MgPSAocHJvamVjdElkKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gZ2V0UHJvamVjdHMoKTtcbiAgICAgICAgY29uc3QgY3VycmVudFByb2plY3QgPSBwcm9qZWN0cy5maW5kKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PSBwcm9qZWN0SWQpO1xuICAgICAgICBjb25zdCB0YXNrcyA9IGN1cnJlbnRQcm9qZWN0LnRhc2tzO1xuICAgICAgICByZXR1cm4gdGFza3M7XG4gICAgfVxuXG4gICAgY29uc3Qgc2F2ZVByb2plY3QgPSAocHJvamVjdFRvU2F2ZSkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IGdldFByb2plY3RzKCk7XG5cbiAgICAgICAgLy8gZmluZCBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3Qgb2JqZWN0IHRoYXQgbWF0Y2hlcyB0aGUgaWRcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBwcm9qZWN0cy5maW5kKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PSBwcm9qZWN0VG9TYXZlLmlkKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgZXhpc3RpbmcucHJvamVjdE5hbWUgPSBwcm9qZWN0VG9TYXZlLnByb2plY3ROYW1lO1xuICAgICAgICAgICAgZXhpc3RpbmcudGFza3MgPSBwcm9qZWN0VG9TYXZlLnRhc2tzO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcHJvamVjdFRvU2F2ZS5pZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDAwMDApO1xuICAgICAgICAgICAgLy8gQWRkIHByb2plY3ROYW1lXG4gICAgICAgICAgICAvLyBBZGQgVGFza3MgYXJyYXkgY29udGFpbmluZyBhbm90aGVyIGFycmF5IHdoaWNoIGluY2x1ZGVzIHRhc2ssIHByaW9yaXR5LCBkdWVEYXRlLCBhbmQgdHJ1ZS9mYWxzZSBmb3IgY29tcGxldGVkIG9yIG5vdFxuICAgICAgICAgICAgcHJvamVjdHMucHVzaChwcm9qZWN0VG9TYXZlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KHByb2plY3RzKSk7XG4gICAgfVxuXG4gICAgY29uc3QgdXBkYXRlVGFzayA9IChwcm9qZWN0SWQsIHVwZGF0ZWRUYXNrKSA9PiB7XG4gICAgICAgIC8vIHRhc2tzIGZvciBjdXJyZW50IHByb2plY3RcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSBnZXRQcm9qZWN0cygpO1xuICAgICAgICBjb25zdCBwcm9qZWN0VG9VcGRhdGUgPSBwcm9qZWN0cy5maW5kKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PSBwcm9qZWN0SWQpO1xuICAgICAgICBjb25zdCB0YXNrc0FycmF5ID0gcHJvamVjdFRvVXBkYXRlLnRhc2tzO1xuICAgICAgICBcbiAgICAgICAgLy8gZmluZCB0YXNrIGluZGV4IGFuZCByZXBsYWNlIHRoZSB0YXNrIGF0IHRoYXQgaW5kZXggdG8gdXBkYXRlXG4gICAgICAgIGNvbnN0IGluZGV4T2ZVcGRhdGVkVGFzayA9IHRhc2tzQXJyYXkuZmluZEluZGV4KCh0YXNrT2JqKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGFza09iai50YXNrSWQgPT0gdXBkYXRlZFRhc2sudGFza0lkO1xuICAgICAgICB9KTtcblxuICAgICAgICB0YXNrc0FycmF5W2luZGV4T2ZVcGRhdGVkVGFza10gPSB1cGRhdGVkVGFzaztcbiAgICAgICAgLy8gU2F2ZSB1cGRhdGVkIHRhc2tzIGFycmF5IHRvIHRoZSBwcm9qZWN0IG9iamVjdFxuICAgICAgICBwcm9qZWN0VG9VcGRhdGUudGFza3MgPSB0YXNrc0FycmF5O1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xuICAgIH1cblxuICAgIGNvbnN0IGZpbmRUYXNrVG9VcGRhdGUgPSAocHJvamVjdElkLCBleGlzdGluZ1Rhc2tJZCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IGdldFByb2plY3RzKCk7ICAgICBcbiAgICAgICAgY29uc3QgcHJvamVjdFRvVXBkYXRlID0gcHJvamVjdHMuZmluZChwcm9qZWN0ID0+IHByb2plY3QuaWQgPT0gcHJvamVjdElkKTtcbiAgICAgICAgY29uc3QgdGFza3NBcnJheSA9IHByb2plY3RUb1VwZGF0ZS50YXNrc1xuICAgICAgICBjb25zdCBleGlzdGluZ1Rhc2sgPSB0YXNrc0FycmF5LmZpbmQodGFzayA9PiB0YXNrLnRhc2tJZCA9PSBleGlzdGluZ1Rhc2tJZCk7XG4gICAgICAgIHJldHVybiBleGlzdGluZ1Rhc2s7XG4gICAgfVxuXG4gICAgY29uc3QgZGVsZXRlUHJvamVjdCA9IChpZCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IGdldFByb2plY3RzKCk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRQcm9qZWN0TGlzdCA9IHByb2plY3RzLmZpbHRlcihwcm9qZWN0ID0+IHByb2plY3QuaWQgIT0gaWQpO1xuXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRQcm9qZWN0TGlzdCkpO1xuICAgIH1cblxuICAgIGNvbnN0IGRlbGV0ZVRhc2sgPSAoaWQsIHRhc2tJZCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IGdldFByb2plY3RzKCk7XG4gICAgICAgIGNvbnN0IHByb2plY3RXaXRoVGFzayA9IHByb2plY3RzLmZpbmQocHJvamVjdCA9PiBwcm9qZWN0LmlkID09IGlkKTtcbiAgICAgICAgY29uc3QgYWxsVGFza3MgPSBwcm9qZWN0V2l0aFRhc2sudGFza3M7XG4gICAgICAgIC8vIEVhY2ggdGFzayBpcyBhbiBvYmplY3RcbiAgICAgICAgY29uc3QgdXBkYXRlZFRhc2tPYmogPSBhbGxUYXNrcy5maWx0ZXIodGFza09iaiA9PiB0YXNrT2JqLnRhc2tJZCAhPSB0YXNrSWQpO1xuICAgICAgICBwcm9qZWN0V2l0aFRhc2sudGFza3MgPSB1cGRhdGVkVGFza09iajtcblxuICAgICAgICBzYXZlUHJvamVjdChwcm9qZWN0V2l0aFRhc2spO1xuICAgIH1cblxuICAgIHJldHVybiB7IGdldFByb2plY3RzLCBnZXRUYXNrcywgc2F2ZVByb2plY3QsIGRlbGV0ZVByb2plY3QsIGRlbGV0ZVRhc2ssIGZpbmRUYXNrVG9VcGRhdGUsIHVwZGF0ZVRhc2sgfVxufVxuXG5leHBvcnQgZGVmYXVsdCB1cGRhdGVTdG9yYWdlKCk7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59IiwiaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENsb25lIHRoZSBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKG5ldyBEYXRlKDIwMTQsIDEsIDExLCAxMSwgMzAsIDMwKSlcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgdGhlIHRpbWVzdGFtcCB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKDEzOTIwOTg0MzAwMDApXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgYXJndW1lbnQgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0LmlvL2ZqdWxlXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgZGF5IGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZkRheShuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBUdWUgU2VwIDAyIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mRGF5KGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiaW1wb3J0IHN0YXJ0T2ZEYXkgZnJvbSBcIi4uL3N0YXJ0T2ZEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzU2FtZURheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheT9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgZGF5P1xuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSBkYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDQgU2VwdGVtYmVyIDA2OjAwOjAwIGFuZCA0IFNlcHRlbWJlciAxODowMDowMCBpbiB0aGUgc2FtZSBkYXk/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQsIDYsIDApLCBuZXcgRGF0ZSgyMDE0LCA4LCA0LCAxOCwgMCkpXG4gKiAvLz0+IHRydWVcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1NhbWVEYXkoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQpIHtcbiAgcmVxdWlyZWRBcmdzKDIsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlTGVmdFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZUxlZnQpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZkRheSA9IHN0YXJ0T2ZEYXkoZGlydHlEYXRlUmlnaHQpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mRGF5LmdldFRpbWUoKSA9PT0gZGF0ZVJpZ2h0U3RhcnRPZkRheS5nZXRUaW1lKCk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9JbnRlZ2VyKGRpcnR5TnVtYmVyKSB7XG4gIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG5cbiAgaWYgKGlzTmFOKG51bWJlcikpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbn0iLCJpbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi9fbGliL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbnZhciBNSUxMSVNFQ09ORFNfSU5fSE9VUiA9IDM2MDAwMDA7XG52YXIgTUlMTElTRUNPTkRTX0lOX01JTlVURSA9IDYwMDAwO1xudmFyIERFRkFVTFRfQURESVRJT05BTF9ESUdJVFMgPSAyO1xudmFyIHBhdHRlcm5zID0ge1xuICBkYXRlVGltZURlbGltaXRlcjogL1tUIF0vLFxuICB0aW1lWm9uZURlbGltaXRlcjogL1taIF0vaSxcbiAgdGltZXpvbmU6IC8oW1orLV0uKikkL1xufTtcbnZhciBkYXRlUmVnZXggPSAvXi0/KD86KFxcZHszfSl8KFxcZHsyfSkoPzotPyhcXGR7Mn0pKT98VyhcXGR7Mn0pKD86LT8oXFxkezF9KSk/fCkkLztcbnZhciB0aW1lUmVnZXggPSAvXihcXGR7Mn0oPzpbLixdXFxkKik/KSg/Ojo/KFxcZHsyfSg/OlsuLF1cXGQqKT8pKT8oPzo6PyhcXGR7Mn0oPzpbLixdXFxkKik/KSk/JC87XG52YXIgdGltZXpvbmVSZWdleCA9IC9eKFsrLV0pKFxcZHsyfSkoPzo6PyhcXGR7Mn0pKT8kLztcbi8qKlxuICogQG5hbWUgcGFyc2VJU09cbiAqIEBjYXRlZ29yeSBDb21tb24gSGVscGVyc1xuICogQHN1bW1hcnkgUGFyc2UgSVNPIHN0cmluZ1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUGFyc2UgdGhlIGdpdmVuIHN0cmluZyBpbiBJU08gODYwMSBmb3JtYXQgYW5kIHJldHVybiBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEZ1bmN0aW9uIGFjY2VwdHMgY29tcGxldGUgSVNPIDg2MDEgZm9ybWF0cyBhcyB3ZWxsIGFzIHBhcnRpYWwgaW1wbGVtZW50YXRpb25zLlxuICogSVNPIDg2MDE6IGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSVNPXzg2MDFcbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXNuJ3QgYSBzdHJpbmcsIHRoZSBmdW5jdGlvbiBjYW5ub3QgcGFyc2UgdGhlIHN0cmluZyBvclxuICogdGhlIHZhbHVlcyBhcmUgaW52YWxpZCwgaXQgcmV0dXJucyBJbnZhbGlkIERhdGUuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiAtIFRoZSBwcmV2aW91cyBgcGFyc2VgIGltcGxlbWVudGF0aW9uIHdhcyByZW5hbWVkIHRvIGBwYXJzZUlTT2AuXG4gKlxuICogICBgYGBqYXZhc2NyaXB0XG4gKiAgIC8vIEJlZm9yZSB2Mi4wLjBcbiAqICAgcGFyc2UoJzIwMTYtMDEtMDEnKVxuICpcbiAqICAgLy8gdjIuMC4wIG9ud2FyZFxuICogICBwYXJzZUlTTygnMjAxNi0wMS0wMScpXG4gKiAgIGBgYFxuICpcbiAqIC0gYHBhcnNlSVNPYCBub3cgdmFsaWRhdGVzIHNlcGFyYXRlIGRhdGUgYW5kIHRpbWUgdmFsdWVzIGluIElTTy04NjAxIHN0cmluZ3NcbiAqICAgYW5kIHJldHVybnMgYEludmFsaWQgRGF0ZWAgaWYgdGhlIGRhdGUgaXMgaW52YWxpZC5cbiAqXG4gKiAgIGBgYGphdmFzY3JpcHRcbiAqICAgcGFyc2VJU08oJzIwMTgtMTMtMzInKVxuICogICAvLz0+IEludmFsaWQgRGF0ZVxuICogICBgYGBcbiAqXG4gKiAtIGBwYXJzZUlTT2Agbm93IGRvZXNuJ3QgZmFsbCBiYWNrIHRvIGBuZXcgRGF0ZWAgY29uc3RydWN0b3JcbiAqICAgaWYgaXQgZmFpbHMgdG8gcGFyc2UgYSBzdHJpbmcgYXJndW1lbnQuIEluc3RlYWQsIGl0IHJldHVybnMgYEludmFsaWQgRGF0ZWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHswfDF8Mn0gW29wdGlvbnMuYWRkaXRpb25hbERpZ2l0cz0yXSAtIHRoZSBhZGRpdGlvbmFsIG51bWJlciBvZiBkaWdpdHMgaW4gdGhlIGV4dGVuZGVkIHllYXIgZm9ybWF0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMuYWRkaXRpb25hbERpZ2l0c2AgbXVzdCBiZSAwLCAxIG9yIDJcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCBzdHJpbmcgJzIwMTQtMDItMTFUMTE6MzA6MzAnIHRvIGRhdGU6XG4gKiB2YXIgcmVzdWx0ID0gcGFyc2VJU08oJzIwMTQtMDItMTFUMTE6MzA6MzAnKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQ29udmVydCBzdHJpbmcgJyswMjAxNDEwMScgdG8gZGF0ZSxcbiAqIC8vIGlmIHRoZSBhZGRpdGlvbmFsIG51bWJlciBvZiBkaWdpdHMgaW4gdGhlIGV4dGVuZGVkIHllYXIgZm9ybWF0IGlzIDE6XG4gKiB2YXIgcmVzdWx0ID0gcGFyc2VJU08oJyswMjAxNDEwMScsIHsgYWRkaXRpb25hbERpZ2l0czogMSB9KVxuICogLy89PiBGcmkgQXByIDExIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBwYXJzZUlTTyhhcmd1bWVudCwgZGlydHlPcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgb3B0aW9ucyA9IGRpcnR5T3B0aW9ucyB8fCB7fTtcbiAgdmFyIGFkZGl0aW9uYWxEaWdpdHMgPSBvcHRpb25zLmFkZGl0aW9uYWxEaWdpdHMgPT0gbnVsbCA/IERFRkFVTFRfQURESVRJT05BTF9ESUdJVFMgOiB0b0ludGVnZXIob3B0aW9ucy5hZGRpdGlvbmFsRGlnaXRzKTtcblxuICBpZiAoYWRkaXRpb25hbERpZ2l0cyAhPT0gMiAmJiBhZGRpdGlvbmFsRGlnaXRzICE9PSAxICYmIGFkZGl0aW9uYWxEaWdpdHMgIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignYWRkaXRpb25hbERpZ2l0cyBtdXN0IGJlIDAsIDEgb3IgMicpO1xuICB9XG5cbiAgaWYgKCEodHlwZW9mIGFyZ3VtZW50ID09PSAnc3RyaW5nJyB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpID09PSAnW29iamVjdCBTdHJpbmddJykpIHtcbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxuXG4gIHZhciBkYXRlU3RyaW5ncyA9IHNwbGl0RGF0ZVN0cmluZyhhcmd1bWVudCk7XG4gIHZhciBkYXRlO1xuXG4gIGlmIChkYXRlU3RyaW5ncy5kYXRlKSB7XG4gICAgdmFyIHBhcnNlWWVhclJlc3VsdCA9IHBhcnNlWWVhcihkYXRlU3RyaW5ncy5kYXRlLCBhZGRpdGlvbmFsRGlnaXRzKTtcbiAgICBkYXRlID0gcGFyc2VEYXRlKHBhcnNlWWVhclJlc3VsdC5yZXN0RGF0ZVN0cmluZywgcGFyc2VZZWFyUmVzdWx0LnllYXIpO1xuICB9XG5cbiAgaWYgKGlzTmFOKGRhdGUpIHx8ICFkYXRlKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gIH1cblxuICB2YXIgdGltZXN0YW1wID0gZGF0ZS5nZXRUaW1lKCk7XG4gIHZhciB0aW1lID0gMDtcbiAgdmFyIG9mZnNldDtcblxuICBpZiAoZGF0ZVN0cmluZ3MudGltZSkge1xuICAgIHRpbWUgPSBwYXJzZVRpbWUoZGF0ZVN0cmluZ3MudGltZSk7XG5cbiAgICBpZiAoaXNOYU4odGltZSkgfHwgdGltZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRhdGVTdHJpbmdzLnRpbWV6b25lKSB7XG4gICAgb2Zmc2V0ID0gcGFyc2VUaW1lem9uZShkYXRlU3RyaW5ncy50aW1lem9uZSk7XG5cbiAgICBpZiAoaXNOYU4ob2Zmc2V0KSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBkaXJ0eURhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXAgKyB0aW1lKTsgLy8ganMgcGFyc2VkIHN0cmluZyBhc3N1bWluZyBpdCdzIGluIFVUQyB0aW1lem9uZVxuICAgIC8vIGJ1dCB3ZSBuZWVkIGl0IHRvIGJlIHBhcnNlZCBpbiBvdXIgdGltZXpvbmVcbiAgICAvLyBzbyB3ZSB1c2UgdXRjIHZhbHVlcyB0byBidWlsZCBkYXRlIGluIG91ciB0aW1lem9uZS5cbiAgICAvLyBZZWFyIHZhbHVlcyBmcm9tIDAgdG8gOTkgbWFwIHRvIHRoZSB5ZWFycyAxOTAwIHRvIDE5OTlcbiAgICAvLyBzbyBzZXQgeWVhciBleHBsaWNpdGx5IHdpdGggc2V0RnVsbFllYXIuXG5cbiAgICB2YXIgcmVzdWx0ID0gbmV3IERhdGUoMCk7XG4gICAgcmVzdWx0LnNldEZ1bGxZZWFyKGRpcnR5RGF0ZS5nZXRVVENGdWxsWWVhcigpLCBkaXJ0eURhdGUuZ2V0VVRDTW9udGgoKSwgZGlydHlEYXRlLmdldFVUQ0RhdGUoKSk7XG4gICAgcmVzdWx0LnNldEhvdXJzKGRpcnR5RGF0ZS5nZXRVVENIb3VycygpLCBkaXJ0eURhdGUuZ2V0VVRDTWludXRlcygpLCBkaXJ0eURhdGUuZ2V0VVRDU2Vjb25kcygpLCBkaXJ0eURhdGUuZ2V0VVRDTWlsbGlzZWNvbmRzKCkpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICByZXR1cm4gbmV3IERhdGUodGltZXN0YW1wICsgdGltZSArIG9mZnNldCk7XG59XG5cbmZ1bmN0aW9uIHNwbGl0RGF0ZVN0cmluZyhkYXRlU3RyaW5nKSB7XG4gIHZhciBkYXRlU3RyaW5ncyA9IHt9O1xuICB2YXIgYXJyYXkgPSBkYXRlU3RyaW5nLnNwbGl0KHBhdHRlcm5zLmRhdGVUaW1lRGVsaW1pdGVyKTtcbiAgdmFyIHRpbWVTdHJpbmc7IC8vIFRoZSByZWdleCBtYXRjaCBzaG91bGQgb25seSByZXR1cm4gYXQgbWF4aW11bSB0d28gYXJyYXkgZWxlbWVudHMuXG4gIC8vIFtkYXRlXSwgW3RpbWVdLCBvciBbZGF0ZSwgdGltZV0uXG5cbiAgaWYgKGFycmF5Lmxlbmd0aCA+IDIpIHtcbiAgICByZXR1cm4gZGF0ZVN0cmluZ3M7XG4gIH1cblxuICBpZiAoLzovLnRlc3QoYXJyYXlbMF0pKSB7XG4gICAgZGF0ZVN0cmluZ3MuZGF0ZSA9IG51bGw7XG4gICAgdGltZVN0cmluZyA9IGFycmF5WzBdO1xuICB9IGVsc2Uge1xuICAgIGRhdGVTdHJpbmdzLmRhdGUgPSBhcnJheVswXTtcbiAgICB0aW1lU3RyaW5nID0gYXJyYXlbMV07XG5cbiAgICBpZiAocGF0dGVybnMudGltZVpvbmVEZWxpbWl0ZXIudGVzdChkYXRlU3RyaW5ncy5kYXRlKSkge1xuICAgICAgZGF0ZVN0cmluZ3MuZGF0ZSA9IGRhdGVTdHJpbmcuc3BsaXQocGF0dGVybnMudGltZVpvbmVEZWxpbWl0ZXIpWzBdO1xuICAgICAgdGltZVN0cmluZyA9IGRhdGVTdHJpbmcuc3Vic3RyKGRhdGVTdHJpbmdzLmRhdGUubGVuZ3RoLCBkYXRlU3RyaW5nLmxlbmd0aCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHRpbWVTdHJpbmcpIHtcbiAgICB2YXIgdG9rZW4gPSBwYXR0ZXJucy50aW1lem9uZS5leGVjKHRpbWVTdHJpbmcpO1xuXG4gICAgaWYgKHRva2VuKSB7XG4gICAgICBkYXRlU3RyaW5ncy50aW1lID0gdGltZVN0cmluZy5yZXBsYWNlKHRva2VuWzFdLCAnJyk7XG4gICAgICBkYXRlU3RyaW5ncy50aW1lem9uZSA9IHRva2VuWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICBkYXRlU3RyaW5ncy50aW1lID0gdGltZVN0cmluZztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZGF0ZVN0cmluZ3M7XG59XG5cbmZ1bmN0aW9uIHBhcnNlWWVhcihkYXRlU3RyaW5nLCBhZGRpdGlvbmFsRGlnaXRzKSB7XG4gIHZhciByZWdleCA9IG5ldyBSZWdFeHAoJ14oPzooXFxcXGR7NH18WystXVxcXFxkeycgKyAoNCArIGFkZGl0aW9uYWxEaWdpdHMpICsgJ30pfChcXFxcZHsyfXxbKy1dXFxcXGR7JyArICgyICsgYWRkaXRpb25hbERpZ2l0cykgKyAnfSkkKScpO1xuICB2YXIgY2FwdHVyZXMgPSBkYXRlU3RyaW5nLm1hdGNoKHJlZ2V4KTsgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHllYXJcblxuICBpZiAoIWNhcHR1cmVzKSByZXR1cm4ge1xuICAgIHllYXI6IG51bGxcbiAgfTtcbiAgdmFyIHllYXIgPSBjYXB0dXJlc1sxXSAmJiBwYXJzZUludChjYXB0dXJlc1sxXSk7XG4gIHZhciBjZW50dXJ5ID0gY2FwdHVyZXNbMl0gJiYgcGFyc2VJbnQoY2FwdHVyZXNbMl0pO1xuICByZXR1cm4ge1xuICAgIHllYXI6IGNlbnR1cnkgPT0gbnVsbCA/IHllYXIgOiBjZW50dXJ5ICogMTAwLFxuICAgIHJlc3REYXRlU3RyaW5nOiBkYXRlU3RyaW5nLnNsaWNlKChjYXB0dXJlc1sxXSB8fCBjYXB0dXJlc1syXSkubGVuZ3RoKVxuICB9O1xufVxuXG5mdW5jdGlvbiBwYXJzZURhdGUoZGF0ZVN0cmluZywgeWVhcikge1xuICAvLyBJbnZhbGlkIElTTy1mb3JtYXR0ZWQgeWVhclxuICBpZiAoeWVhciA9PT0gbnVsbCkgcmV0dXJuIG51bGw7XG4gIHZhciBjYXB0dXJlcyA9IGRhdGVTdHJpbmcubWF0Y2goZGF0ZVJlZ2V4KTsgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHN0cmluZ1xuXG4gIGlmICghY2FwdHVyZXMpIHJldHVybiBudWxsO1xuICB2YXIgaXNXZWVrRGF0ZSA9ICEhY2FwdHVyZXNbNF07XG4gIHZhciBkYXlPZlllYXIgPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzFdKTtcbiAgdmFyIG1vbnRoID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1syXSkgLSAxO1xuICB2YXIgZGF5ID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1szXSk7XG4gIHZhciB3ZWVrID0gcGFyc2VEYXRlVW5pdChjYXB0dXJlc1s0XSk7XG4gIHZhciBkYXlPZldlZWsgPSBwYXJzZURhdGVVbml0KGNhcHR1cmVzWzVdKSAtIDE7XG5cbiAgaWYgKGlzV2Vla0RhdGUpIHtcbiAgICBpZiAoIXZhbGlkYXRlV2Vla0RhdGUoeWVhciwgd2VlaywgZGF5T2ZXZWVrKSkge1xuICAgICAgcmV0dXJuIG5ldyBEYXRlKE5hTik7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRheU9mSVNPV2Vla1llYXIoeWVhciwgd2VlaywgZGF5T2ZXZWVrKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKDApO1xuXG4gICAgaWYgKCF2YWxpZGF0ZURhdGUoeWVhciwgbW9udGgsIGRheSkgfHwgIXZhbGlkYXRlRGF5T2ZZZWFyRGF0ZSh5ZWFyLCBkYXlPZlllYXIpKSB7XG4gICAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgICB9XG5cbiAgICBkYXRlLnNldFVUQ0Z1bGxZZWFyKHllYXIsIG1vbnRoLCBNYXRoLm1heChkYXlPZlllYXIsIGRheSkpO1xuICAgIHJldHVybiBkYXRlO1xuICB9XG59XG5cbmZ1bmN0aW9uIHBhcnNlRGF0ZVVuaXQodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID8gcGFyc2VJbnQodmFsdWUpIDogMTtcbn1cblxuZnVuY3Rpb24gcGFyc2VUaW1lKHRpbWVTdHJpbmcpIHtcbiAgdmFyIGNhcHR1cmVzID0gdGltZVN0cmluZy5tYXRjaCh0aW1lUmVnZXgpO1xuICBpZiAoIWNhcHR1cmVzKSByZXR1cm4gbnVsbDsgLy8gSW52YWxpZCBJU08tZm9ybWF0dGVkIHRpbWVcblxuICB2YXIgaG91cnMgPSBwYXJzZVRpbWVVbml0KGNhcHR1cmVzWzFdKTtcbiAgdmFyIG1pbnV0ZXMgPSBwYXJzZVRpbWVVbml0KGNhcHR1cmVzWzJdKTtcbiAgdmFyIHNlY29uZHMgPSBwYXJzZVRpbWVVbml0KGNhcHR1cmVzWzNdKTtcblxuICBpZiAoIXZhbGlkYXRlVGltZShob3VycywgbWludXRlcywgc2Vjb25kcykpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgcmV0dXJuIGhvdXJzICogTUlMTElTRUNPTkRTX0lOX0hPVVIgKyBtaW51dGVzICogTUlMTElTRUNPTkRTX0lOX01JTlVURSArIHNlY29uZHMgKiAxMDAwO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRpbWVVbml0KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAmJiBwYXJzZUZsb2F0KHZhbHVlLnJlcGxhY2UoJywnLCAnLicpKSB8fCAwO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRpbWV6b25lKHRpbWV6b25lU3RyaW5nKSB7XG4gIGlmICh0aW1lem9uZVN0cmluZyA9PT0gJ1onKSByZXR1cm4gMDtcbiAgdmFyIGNhcHR1cmVzID0gdGltZXpvbmVTdHJpbmcubWF0Y2godGltZXpvbmVSZWdleCk7XG4gIGlmICghY2FwdHVyZXMpIHJldHVybiAwO1xuICB2YXIgc2lnbiA9IGNhcHR1cmVzWzFdID09PSAnKycgPyAtMSA6IDE7XG4gIHZhciBob3VycyA9IHBhcnNlSW50KGNhcHR1cmVzWzJdKTtcbiAgdmFyIG1pbnV0ZXMgPSBjYXB0dXJlc1szXSAmJiBwYXJzZUludChjYXB0dXJlc1szXSkgfHwgMDtcblxuICBpZiAoIXZhbGlkYXRlVGltZXpvbmUoaG91cnMsIG1pbnV0ZXMpKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHJldHVybiBzaWduICogKGhvdXJzICogTUlMTElTRUNPTkRTX0lOX0hPVVIgKyBtaW51dGVzICogTUlMTElTRUNPTkRTX0lOX01JTlVURSk7XG59XG5cbmZ1bmN0aW9uIGRheU9mSVNPV2Vla1llYXIoaXNvV2Vla1llYXIsIHdlZWssIGRheSkge1xuICB2YXIgZGF0ZSA9IG5ldyBEYXRlKDApO1xuICBkYXRlLnNldFVUQ0Z1bGxZZWFyKGlzb1dlZWtZZWFyLCAwLCA0KTtcbiAgdmFyIGZvdXJ0aE9mSmFudWFyeURheSA9IGRhdGUuZ2V0VVRDRGF5KCkgfHwgNztcbiAgdmFyIGRpZmYgPSAod2VlayAtIDEpICogNyArIGRheSArIDEgLSBmb3VydGhPZkphbnVhcnlEYXk7XG4gIGRhdGUuc2V0VVRDRGF0ZShkYXRlLmdldFVUQ0RhdGUoKSArIGRpZmYpO1xuICByZXR1cm4gZGF0ZTtcbn0gLy8gVmFsaWRhdGlvbiBmdW5jdGlvbnNcbi8vIEZlYnJ1YXJ5IGlzIG51bGwgdG8gaGFuZGxlIHRoZSBsZWFwIHllYXIgKHVzaW5nIHx8KVxuXG5cbnZhciBkYXlzSW5Nb250aHMgPSBbMzEsIG51bGwsIDMxLCAzMCwgMzEsIDMwLCAzMSwgMzEsIDMwLCAzMSwgMzAsIDMxXTtcblxuZnVuY3Rpb24gaXNMZWFwWWVhckluZGV4KHllYXIpIHtcbiAgcmV0dXJuIHllYXIgJSA0MDAgPT09IDAgfHwgeWVhciAlIDQgPT09IDAgJiYgeWVhciAlIDEwMDtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVEYXRlKHllYXIsIG1vbnRoLCBkYXRlKSB7XG4gIHJldHVybiBtb250aCA+PSAwICYmIG1vbnRoIDw9IDExICYmIGRhdGUgPj0gMSAmJiBkYXRlIDw9IChkYXlzSW5Nb250aHNbbW9udGhdIHx8IChpc0xlYXBZZWFySW5kZXgoeWVhcikgPyAyOSA6IDI4KSk7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRGF5T2ZZZWFyRGF0ZSh5ZWFyLCBkYXlPZlllYXIpIHtcbiAgcmV0dXJuIGRheU9mWWVhciA+PSAxICYmIGRheU9mWWVhciA8PSAoaXNMZWFwWWVhckluZGV4KHllYXIpID8gMzY2IDogMzY1KTtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVXZWVrRGF0ZShfeWVhciwgd2VlaywgZGF5KSB7XG4gIHJldHVybiB3ZWVrID49IDEgJiYgd2VlayA8PSA1MyAmJiBkYXkgPj0gMCAmJiBkYXkgPD0gNjtcbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVUaW1lKGhvdXJzLCBtaW51dGVzLCBzZWNvbmRzKSB7XG4gIGlmIChob3VycyA9PT0gMjQpIHtcbiAgICByZXR1cm4gbWludXRlcyA9PT0gMCAmJiBzZWNvbmRzID09PSAwO1xuICB9XG5cbiAgcmV0dXJuIHNlY29uZHMgPj0gMCAmJiBzZWNvbmRzIDwgNjAgJiYgbWludXRlcyA+PSAwICYmIG1pbnV0ZXMgPCA2MCAmJiBob3VycyA+PSAwICYmIGhvdXJzIDwgMjU7XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlVGltZXpvbmUoX2hvdXJzLCBtaW51dGVzKSB7XG4gIHJldHVybiBtaW51dGVzID49IDAgJiYgbWludXRlcyA8PSA1OTtcbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBTdW4gQXVnIDMxIDIwMTQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdGhlIHdlZWsgc3RhcnRzIG9uIE1vbmRheSwgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gTW9uIFNlcCAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZldlZWsoZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9O1xuICB2YXIgbG9jYWxlID0gb3B0aW9ucy5sb2NhbGU7XG4gIHZhciBsb2NhbGVXZWVrU3RhcnRzT24gPSBsb2NhbGUgJiYgbG9jYWxlLm9wdGlvbnMgJiYgbG9jYWxlLm9wdGlvbnMud2Vla1N0YXJ0c09uO1xuICB2YXIgZGVmYXVsdFdlZWtTdGFydHNPbiA9IGxvY2FsZVdlZWtTdGFydHNPbiA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihsb2NhbGVXZWVrU3RhcnRzT24pO1xuICB2YXIgd2Vla1N0YXJ0c09uID0gb3B0aW9ucy53ZWVrU3RhcnRzT24gPT0gbnVsbCA/IGRlZmF1bHRXZWVrU3RhcnRzT24gOiB0b0ludGVnZXIob3B0aW9ucy53ZWVrU3RhcnRzT24pOyAvLyBUZXN0IGlmIHdlZWtTdGFydHNPbiBpcyBiZXR3ZWVuIDAgYW5kIDYgX2FuZF8gaXMgbm90IE5hTlxuXG4gIGlmICghKHdlZWtTdGFydHNPbiA+PSAwICYmIHdlZWtTdGFydHNPbiA8PSA2KSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd3ZWVrU3RhcnRzT24gbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDYgaW5jbHVzaXZlbHknKTtcbiAgfVxuXG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICB2YXIgZGlmZiA9IChkYXkgPCB3ZWVrU3RhcnRzT24gPyA3IDogMCkgKyBkYXkgLSB3ZWVrU3RhcnRzT247XG4gIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRpZmYpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJpbXBvcnQgc3RhcnRPZldlZWsgZnJvbSBcIi4uL3N0YXJ0T2ZXZWVrL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuXG4vKipcbiAqIEBuYW1lIGlzU2FtZVdlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIEFyZSB0aGUgZ2l2ZW4gZGF0ZXMgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGVzIGFyZSBpbiB0aGUgc2FtZSB3ZWVrXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogdmFyIHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB3ZWVrIHN0YXJ0cyB3aXRoIE1vbmRheSxcbiAqIC8vIGFyZSAzMSBBdWd1c3QgMjAxNCBhbmQgNCBTZXB0ZW1iZXIgMjAxNCBpbiB0aGUgc2FtZSB3ZWVrP1xuICogdmFyIHJlc3VsdCA9IGlzU2FtZVdlZWsobmV3IERhdGUoMjAxNCwgNywgMzEpLCBuZXcgRGF0ZSgyMDE0LCA4LCA0KSwge1xuICogICB3ZWVrU3RhcnRzT246IDFcbiAqIH0pXG4gKiAvLz0+IGZhbHNlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzU2FtZVdlZWsoZGlydHlEYXRlTGVmdCwgZGlydHlEYXRlUmlnaHQsIGRpcnR5T3B0aW9ucykge1xuICByZXF1aXJlZEFyZ3MoMiwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGVMZWZ0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkaXJ0eURhdGVMZWZ0LCBkaXJ0eU9wdGlvbnMpO1xuICB2YXIgZGF0ZVJpZ2h0U3RhcnRPZldlZWsgPSBzdGFydE9mV2VlayhkaXJ0eURhdGVSaWdodCwgZGlydHlPcHRpb25zKTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZldlZWsuZ2V0VGltZSgpID09PSBkYXRlUmlnaHRTdGFydE9mV2Vlay5nZXRUaW1lKCk7XG59IiwiaW1wb3J0IHsgdXBkYXRlUHJvamVjdExpc3QsIHVwZGF0ZUFjdGl2ZVRhYiwgYWRkUHJvamVjdFRvTm90ZXBhZCwgbG9hZFRhc2sgfSBmcm9tIFwiLi9jcmVhdGVET01FbGVtZW50c1wiO1xuaW1wb3J0IHVwZGF0ZVN0b3JhZ2UgZnJvbSBcIi4vc3RvcmFnZVwiO1xuaW1wb3J0IHsgaXNUaGlzV2VlaywgaXNUb2RheSwgcGFyc2VJU08gfSBmcm9tIFwiZGF0ZS1mbnNcIjtcblxuY29uc3QgaGFuZGxlcnMgPSAoKSA9PiB7XG4gICAgXG4gICAgY29uc3QgX3JlZnJlc2hQcm9qZWN0TGlzdCA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSB1cGRhdGVTdG9yYWdlLmdldFByb2plY3RzKCk7IC8vIFVwZGF0ZSBwcm9qZWN0cyBpbiBzdG9yYWdlICAgICAgICBcbiAgICAgICAgdXBkYXRlUHJvamVjdExpc3QocHJvamVjdHMpOyAvLyBVcGRhdGUgcHJvamVjdHMgb24gRE9NXG4gICAgfVxuXG4gICAgY29uc3Qgb25Ib21lVGFiU2VsZWN0ID0gKHByb2plY3RzLCB0YWIpID0+IHtcbiAgICAgICAgbG9hZEFsbFByb2plY3RzKHByb2plY3RzKTsgIFxuICAgICAgICB1cGRhdGVBY3RpdmVUYWIodGFiKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgb25Ub2RheVRhYlNlbGVjdCA9IChwcm9qZWN0cywgdGFiKSA9PiB7XG4gICAgICAgIGxvYWRBbGxQcm9qZWN0cyhwcm9qZWN0cyk7XG4gICAgICAgIC8vIEZpbHRlciBwcm9qZWN0cyB0aGF0IGhhdmUgdGFza3MgZHVlIHRvZGF5XG4gICAgICAgIHByb2plY3RzLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXNrcyA9IHByb2plY3QudGFza3M7XG5cbiAgICAgICAgICAgIGNvbnN0IHRvZGF5c1Rhc2tzID0gdGFza3MuZmlsdGVyKHRhc2sgPT4gZHVlVG9kYXkodGFzaykpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBIaWRlIHByb2plY3QgY29udGFpbmVyIGlmIG5vIHRhc2tzIGR1ZSB0b2RheVxuICAgICAgICAgICAgaWYgKHRvZGF5c1Rhc2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5vdGVwYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm90ZXBhZCcpXG4gICAgICAgICAgICAgICAgY29uc3QgcHJvamVjdENvbnRhaW5lciA9IG5vdGVwYWQucXVlcnlTZWxlY3RvcihgW2RhdGEtcHJvamVjdC1pZD1cIiR7cHJvamVjdC5pZH1cIl1gKTtcbiAgICAgICAgICAgICAgICBwcm9qZWN0Q29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGFza3MgdGhhdCBhcmUgbm90IGR1ZSB0b2RheSBmcm9tIERPTVxuICAgICAgICAgICAgY29uc3Qgbm90RHVlVG9kYXkgPSB0YXNrcy5maWx0ZXIodGFzayA9PiAhZHVlVG9kYXkodGFzaykpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBub3REdWVUb2RheS5mb3JFYWNoKHRhc2sgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhc2tDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YXNrLWlkPVwiJHt0YXNrLnRhc2tJZH1cIl1gKTtcbiAgICAgICAgICAgICAgICBpZiAodGFza0NvbnRhaW5lcikgdGFza0NvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdXBkYXRlQWN0aXZlVGFiKHRhYik7XG4gICAgfVxuXG4gICAgY29uc3QgZHVlVG9kYXkgPSAodGFzaykgPT4ge1xuICAgICAgICBpZiAoaXNUb2RheShwYXJzZUlTTyh0YXNrLmR1ZURhdGUpKSkgcmV0dXJuIHRhc2s7XG4gICAgfVxuXG4gICAgY29uc3Qgb25UaGlzV2Vla1RhYlNlbGVjdCA9IChwcm9qZWN0cywgdGFiKSA9PiB7XG4gICAgICAgIGxvYWRBbGxQcm9qZWN0cyhwcm9qZWN0cyk7XG5cbiAgICAgICAgcHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tzID0gcHJvamVjdC50YXNrcztcbiAgICAgICAgICAgIGNvbnN0IHRoaXNXZWVrc1Rhc2tzID0gdGFza3MuZmlsdGVyKHRhc2sgPT4gZHVlVGhpc1dlZWsodGFzaykpO1xuXG4gICAgICAgICAgICAvLyBIaWRlIHByb2plY3QgY29udGFpbmVyIGlmIG5vIHRhc2tzIGR1ZSB0aGlzIHdlZWtcbiAgICAgICAgICAgIGlmICh0aGlzV2Vla3NUYXNrcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBub3RlcGFkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5vdGVwYWQnKVxuICAgICAgICAgICAgICAgIGNvbnN0IHByb2plY3RDb250YWluZXIgPSBub3RlcGFkLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXByb2plY3QtaWQ9XCIke3Byb2plY3QuaWR9XCJdYCk7XG4gICAgICAgICAgICAgICAgcHJvamVjdENvbnRhaW5lci5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRhc2tzIHRoYXQgYXJlIG5vdCBkdWUgdGhpcyB3ZWVrIGZyb20gRE9NXG4gICAgICAgICAgICBjb25zdCBub3REdWVUaGlzV2VlayA9IHRhc2tzLmZpbHRlcih0YXNrID0+ICFkdWVUaGlzV2Vlayh0YXNrKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG5vdER1ZVRoaXNXZWVrLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXRhc2staWQ9XCIke3Rhc2sudGFza0lkfVwiXWApO1xuICAgICAgICAgICAgICAgIGlmICh0YXNrQ29udGFpbmVyKSB0YXNrQ29udGFpbmVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyAgIFxuICAgICAgICB1cGRhdGVBY3RpdmVUYWIodGFiKTtcbiAgICB9XG5cbiAgICBjb25zdCBkdWVUaGlzV2VlayA9ICh0YXNrKSA9PiB7XG4gICAgICAgIGlmIChpc1RoaXNXZWVrKHBhcnNlSVNPKHRhc2suZHVlRGF0ZSkpKSByZXR1cm4gdGFzaztcbiAgICB9XG5cbiAgICBjb25zdCBsb2FkQWxsUHJvamVjdHMgPSAocHJvamVjdHMpID0+IHtcbiAgICAgICAgY2xlYXJQcm9qZWN0c0Zyb21ET00oKTtcbiAgICAgICAgY29uc3Qgbm90ZXBhZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ub3RlcGFkJyk7XG4gICAgICAgIFxuICAgICAgICBwcm9qZWN0cy5mb3JFYWNoKHByb2plY3QgPT4ge1xuICAgICAgICAgICAgYWRkUHJvamVjdFRvTm90ZXBhZChwcm9qZWN0LmlkKTtcblxuICAgICAgICAgICAgY29uc3QgcHJvamVjdFRhc2tzID0gcHJvamVjdC50YXNrcztcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RDb250YWluZXIgPSBub3RlcGFkLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXByb2plY3QtaWQ9XCIke3Byb2plY3QuaWR9XCJdYCk7XG4gICAgICAgICAgICBjb25zdCB0YXNrc0xpc3QgPSBwcm9qZWN0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3VsJyk7XG4gICAgICAgICAgICBjb25zdCBhZGRUYXNrQnRuID0gcHJvamVjdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYWRkLXRhc2snKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgcHJvamVjdFRhc2tzLmZvckVhY2godGFzayA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdGFza1RvQWRkID0gbG9hZFRhc2sodGFzayk7XG4gICAgICAgICAgICAgICAgdGFza3NMaXN0Lmluc2VydEJlZm9yZSh0YXNrVG9BZGQsIGFkZFRhc2tCdG4ucGFyZW50RWxlbWVudCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfSAgXG5cbiAgICBjb25zdCBjbGVhclByb2plY3RzRnJvbURPTSA9ICgpID0+IHtcbiAgICAgICAgY29uc3Qgd3JpdGluZ0FyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjd3JpdGluZy1hcmVhJyk7XG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gd3JpdGluZ0FyZWEucXVlcnlTZWxlY3RvckFsbCgnLnByb2plY3QnKTtcbiAgICAgICAgcHJvamVjdHMuZm9yRWFjaChwcm9qZWN0ID0+IHByb2plY3QucmVtb3ZlKCkpO1xuICAgIH1cblxuICAgIGNvbnN0IG9uUHJvamVjdFNlbGVjdCA9IChwcm9qZWN0SWQpID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSB1cGRhdGVTdG9yYWdlLmdldFByb2plY3RzKCk7XG4gICAgICAgIGxvYWRBbGxQcm9qZWN0cyhwcm9qZWN0cyk7XG4gICAgICAgIGNvbnN0IHByb2plY3RPYmplY3QgPSBwcm9qZWN0cy5maW5kKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PSBwcm9qZWN0SWQpO1xuICAgICAgICBjb25zdCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NpZGViYXInKTtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRQcm9qZWN0ID0gc2lkZWJhci5xdWVyeVNlbGVjdG9yKGBbZGF0YS1wcm9qZWN0LWlkPScke3Byb2plY3RPYmplY3QuaWR9J11gKTtcbiAgICAgICAgY29uc3QgcHJvamVjdHNPbk5vdGVwYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdCcpO1xuXG4gICAgICAgIHByb2plY3RzT25Ob3RlcGFkLmZvckVhY2gocHJvamVjdCA9PiB7XG4gICAgICAgICAgICBpZiAocHJvamVjdC5kYXRhc2V0LnByb2plY3RJZCAhPSBwcm9qZWN0SWQpIHtcbiAgICAgICAgICAgICAgICBwcm9qZWN0LnJlbW92ZSgpO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgfSk7XG4gICAgICAgIHVwZGF0ZUFjdGl2ZVRhYihzZWxlY3RlZFByb2plY3QpO1xuICAgIH1cblxuICAgIGNvbnN0IG9uUHJvamVjdEFkZCA9IChwcm9qZWN0TmFtZSkgPT4ge1xuICAgICAgICAvLyBwYXNzIHVzZXIgaW5wdXQgaW50byBmdW5jdGlvblxuICAgICAgICBjb25zdCBuZXdQcm9qZWN0ID0gIHtcbiAgICAgICAgICAgIHByb2plY3ROYW1lOiBwcm9qZWN0TmFtZSxcbiAgICAgICAgICAgIHRhc2tzOiBbXVxuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVN0b3JhZ2Uuc2F2ZVByb2plY3QobmV3UHJvamVjdCk7XG4gICAgICAgIC8vIGFkZCBpbnB1dCB0byBwYWdlXG4gICAgICAgIF9yZWZyZXNoUHJvamVjdExpc3QoKTtcbiAgICAgICAgY29uc3QgbmV3UHJvamVjdERPTUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1wcm9qZWN0LWlkPScke25ld1Byb2plY3QuaWR9J11gKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3Qgb25UYXNrQWRkID0gKHRhc2ssIGlkKSA9PiB7XG4gICAgICAgIGNvbnN0IG5ld1Rhc2sgPSB7XG4gICAgICAgICAgICBpdGVtOiB0YXNrLCBcbiAgICAgICAgICAgIHRhc2tJZDogTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDAwMCksXG4gICAgICAgICAgICBwcmlvcml0eTogJ2xvdycsXG4gICAgICAgICAgICBkdWVEYXRlOiBudWxsLFxuICAgICAgICAgICAgaXNDb21wbGV0ZTogZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IHVwZGF0ZVN0b3JhZ2UuZ2V0UHJvamVjdHMoKTtcbiAgICAgICAgY29uc3QgcHJvamVjdFRvVXBkYXRlID0gcHJvamVjdHMuZmluZChwcm9qZWN0ID0+IHByb2plY3QuaWQgPT0gaWQpO1xuICAgICAgICBwcm9qZWN0VG9VcGRhdGUudGFza3MucHVzaChuZXdUYXNrKTtcbiAgICAgICAgdXBkYXRlU3RvcmFnZS5zYXZlUHJvamVjdChwcm9qZWN0VG9VcGRhdGUpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIG5ld1Rhc2s7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IG9uUHJvamVjdE5hbWVFZGl0ID0gKHByb2plY3RJZCwgcHJvamVjdE5hbWUsIHRhc2tzID0gdXBkYXRlU3RvcmFnZS5nZXRUYXNrcyhwcm9qZWN0SWQpKSA9PiB7XG4gICAgICAgIHVwZGF0ZVN0b3JhZ2Uuc2F2ZVByb2plY3Qoe1xuICAgICAgICAgICAgaWQ6IHByb2plY3RJZCxcbiAgICAgICAgICAgIHByb2plY3ROYW1lOiBwcm9qZWN0TmFtZSxcbiAgICAgICAgICAgIHRhc2tzOiB0YXNrc1xuICAgICAgICB9KTtcblxuICAgICAgICBfcmVmcmVzaFByb2plY3RMaXN0KCk7XG4gICAgfVxuXG4gICAgY29uc3Qgb25UYXNrTmFtZUVkaXQgPSAocHJvamVjdElkLCB0YXNrSWQsIG5ld1Rhc2tOYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVGFzayA9IHVwZGF0ZVN0b3JhZ2UuZmluZFRhc2tUb1VwZGF0ZShwcm9qZWN0SWQsIHRhc2tJZCk7XG4gICAgICAgIHVwZGF0ZVN0b3JhZ2UudXBkYXRlVGFzayhwcm9qZWN0SWQsIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBuZXdUYXNrTmFtZSxcbiAgICAgICAgICAgICAgICB0YXNrSWQ6IGV4aXN0aW5nVGFzay50YXNrSWQsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IGV4aXN0aW5nVGFzay5wcmlvcml0eSxcbiAgICAgICAgICAgICAgICBkdWVEYXRlOiBleGlzdGluZ1Rhc2suZHVlRGF0ZSxcbiAgICAgICAgICAgICAgICBpc0NvbXBsZXRlOiBleGlzdGluZ1Rhc2suaXNDb21wbGV0ZVxuICAgICAgICAgICAgfSk7ICBcbiAgICB9XG5cbiAgICBjb25zdCBvblRhc2tQcmlvcml0eUVkaXQgPSAocHJvamVjdElkLCB0YXNrSWQsIG5ld1ByaW9yaXR5KSA9PiB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVGFzayA9IHVwZGF0ZVN0b3JhZ2UuZmluZFRhc2tUb1VwZGF0ZShwcm9qZWN0SWQsIHRhc2tJZCk7XG4gICAgICAgIHVwZGF0ZVN0b3JhZ2UudXBkYXRlVGFzayhwcm9qZWN0SWQsIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBleGlzdGluZ1Rhc2suaXRlbSxcbiAgICAgICAgICAgICAgICB0YXNrSWQ6IGV4aXN0aW5nVGFzay50YXNrSWQsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IG5ld1ByaW9yaXR5LFxuICAgICAgICAgICAgICAgIGR1ZURhdGU6IGV4aXN0aW5nVGFzay5kdWVEYXRlLFxuICAgICAgICAgICAgICAgIGlzQ29tcGxldGU6IGV4aXN0aW5nVGFzay5pc0NvbXBsZXRlXG4gICAgICAgICAgICB9KTsgIFxuICAgIH1cblxuICAgIGNvbnN0IG9uVGFza0R1ZURhdGVFZGl0ID0gKHByb2plY3RJZCwgdGFza0lkLCBuZXdEdWVEYXRlKSA9PiB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nVGFzayA9IHVwZGF0ZVN0b3JhZ2UuZmluZFRhc2tUb1VwZGF0ZShwcm9qZWN0SWQsIHRhc2tJZCk7XG4gICAgICAgIHVwZGF0ZVN0b3JhZ2UudXBkYXRlVGFzayhwcm9qZWN0SWQsIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBleGlzdGluZ1Rhc2suaXRlbSxcbiAgICAgICAgICAgICAgICB0YXNrSWQ6IGV4aXN0aW5nVGFzay50YXNrSWQsXG4gICAgICAgICAgICAgICAgcHJpb3JpdHk6IGV4aXN0aW5nVGFzay5wcmlvcml0eSxcbiAgICAgICAgICAgICAgICBkdWVEYXRlOiBuZXdEdWVEYXRlLFxuICAgICAgICAgICAgICAgIGlzQ29tcGxldGU6IGV4aXN0aW5nVGFzay5pc0NvbXBsZXRlXG4gICAgICAgICAgICB9KTsgIFxuICAgIH1cblxuICAgIGNvbnN0IG9uVGFza0NvbXBsZXRlRWRpdCA9IChwcm9qZWN0SWQsIHRhc2tJZCwgaXNDb21wbGV0ZSkgPT4ge1xuICAgICAgICBjb25zdCBleGlzdGluZ1Rhc2sgPSB1cGRhdGVTdG9yYWdlLmZpbmRUYXNrVG9VcGRhdGUocHJvamVjdElkLCB0YXNrSWQpO1xuICAgICAgICB1cGRhdGVTdG9yYWdlLnVwZGF0ZVRhc2socHJvamVjdElkLCB7XG4gICAgICAgICAgICAgICAgaXRlbTogZXhpc3RpbmdUYXNrLml0ZW0sXG4gICAgICAgICAgICAgICAgdGFza0lkOiBleGlzdGluZ1Rhc2sudGFza0lkLFxuICAgICAgICAgICAgICAgIHByaW9yaXR5OiBleGlzdGluZ1Rhc2sucHJpb3JpdHksXG4gICAgICAgICAgICAgICAgZHVlRGF0ZTogZXhpc3RpbmdUYXNrLmR1ZURhdGUsXG4gICAgICAgICAgICAgICAgaXNDb21wbGV0ZTogaXNDb21wbGV0ZVxuICAgICAgICAgICAgfSk7ICBcbiAgICB9XG5cbiAgICByZXR1cm4geyBvblByb2plY3RTZWxlY3QsIG9uUHJvamVjdEFkZCwgb25Qcm9qZWN0TmFtZUVkaXQsIG9uVGFza0FkZCwgb25UYXNrTmFtZUVkaXQsIG9uVGFza1ByaW9yaXR5RWRpdCwgb25UYXNrRHVlRGF0ZUVkaXQsIG9uVGFza0NvbXBsZXRlRWRpdCwgb25Ib21lVGFiU2VsZWN0LCBvblRvZGF5VGFiU2VsZWN0LCBvblRoaXNXZWVrVGFiU2VsZWN0IH1cbiAgICBcbn1cblxuZXhwb3J0IGRlZmF1bHQgaGFuZGxlcnMoKTsiLCJpbXBvcnQgaXNTYW1lRGF5IGZyb20gXCIuLi9pc1NhbWVEYXkvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIGlzVG9kYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgdG9kYXk/XG4gKlxuICogPiDimqDvuI8gUGxlYXNlIG5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIGlzIG5vdCBwcmVzZW50IGluIHRoZSBGUCBzdWJtb2R1bGUgYXNcbiAqID4gaXQgdXNlcyBgRGF0ZS5ub3coKWAgaW50ZXJuYWxseSBoZW5jZSBpbXB1cmUgYW5kIGNhbid0IGJlIHNhZmVseSBjdXJyaWVkLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBkYXRlIHRvIGNoZWNrXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGUgaXMgdG9kYXlcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyA2IE9jdG9iZXIgMjAxNCwgaXMgNiBPY3RvYmVyIDE0OjAwOjAwIHRvZGF5P1xuICogdmFyIHJlc3VsdCA9IGlzVG9kYXkobmV3IERhdGUoMjAxNCwgOSwgNiwgMTQsIDApKVxuICogLy89PiB0cnVlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUb2RheShkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBpc1NhbWVEYXkoZGlydHlEYXRlLCBEYXRlLm5vdygpKTtcbn0iLCJpbXBvcnQgaXNTYW1lV2VlayBmcm9tIFwiLi4vaXNTYW1lV2Vlay9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcblxuLyoqXG4gKiBAbmFtZSBpc1RoaXNXZWVrXG4gKiBAY2F0ZWdvcnkgV2VlayBIZWxwZXJzXG4gKiBAc3VtbWFyeSBJcyB0aGUgZ2l2ZW4gZGF0ZSBpbiB0aGUgc2FtZSB3ZWVrIGFzIHRoZSBjdXJyZW50IGRhdGU/XG4gKiBAcHVyZSBmYWxzZVxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogSXMgdGhlIGdpdmVuIGRhdGUgaW4gdGhlIHNhbWUgd2VlayBhcyB0aGUgY3VycmVudCBkYXRlP1xuICpcbiAqID4g4pqg77iPIFBsZWFzZSBub3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyBub3QgcHJlc2VudCBpbiB0aGUgRlAgc3VibW9kdWxlIGFzXG4gKiA+IGl0IHVzZXMgYERhdGUubm93KClgIGludGVybmFsbHkgaGVuY2UgaW1wdXJlIGFuZCBjYW4ndCBiZSBzYWZlbHkgY3VycmllZC5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIHRoZSBvYmplY3Qgd2l0aCBvcHRpb25zXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gdGhlIGRhdGUgaXMgaW4gdGhpcyB3ZWVrXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdG9kYXkgaXMgMjUgU2VwdGVtYmVyIDIwMTQsIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIHZhciByZXN1bHQgPSBpc1RoaXNXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIxKSlcbiAqIC8vPT4gdHJ1ZVxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBJZiB0b2RheSBpcyAyNSBTZXB0ZW1iZXIgMjAxNCBhbmQgd2VlayBzdGFydHMgd2l0aCBNb25kYXlcbiAqIC8vIGlzIDIxIFNlcHRlbWJlciAyMDE0IGluIHRoaXMgd2Vlaz9cbiAqIHZhciByZXN1bHQgPSBpc1RoaXNXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIxKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNUaGlzV2VlayhkaXJ0eURhdGUsIG9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHJldHVybiBpc1NhbWVXZWVrKGRpcnR5RGF0ZSwgRGF0ZS5ub3coKSwgb3B0aW9ucyk7XG59IiwiaW1wb3J0IGhhbmRsZXJzIGZyb20gXCIuL2hhbmRsZXJzXCJcbmltcG9ydCB1cGRhdGVTdG9yYWdlIGZyb20gXCIuL3N0b3JhZ2VcIjtcblxuLy8gRE9NIEVsZW1lbnRzIEZhY3RvcnkgRnVuY3Rpb25cbmNvbnN0IGNyZWF0ZUVsZW1lbnRzID0gKCkgPT4ge1xuICAgIFxuICAgIGNvbnN0IGNyZWF0ZUxpc3RFbGVtZW50ID0gKGh0bWxDbGFzcykgPT4ge1xuICAgICAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgICAgIGxpLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBodG1sQ2xhc3MpO1xuICAgICAgICByZXR1cm4gbGk7XG4gICAgfVxuXG4gICAgY29uc3QgY3JlYXRlU3BhbkVsZW1lbnQgPSAoaHRtbENsYXNzKSA9PiB7XG4gICAgICAgIGNvbnN0IHNwYW4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgIHNwYW4uY2xhc3NMaXN0LmFkZChodG1sQ2xhc3MpO1xuICAgICAgICByZXR1cm4gc3BhbjtcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVJbWFnZUVsZW1lbnQgPSAoc3JjLCBodG1sQ2xhc3MpID0+IHtcbiAgICAgICAgY29uc3QgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgIGltZy5jbGFzc0xpc3QuYWRkKGh0bWxDbGFzcyk7XG4gICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIHNyYyk7XG4gICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoJ2RyYWdnYWJsZScsICdmYWxzZScpO1xuICAgICAgICByZXR1cm4gaW1nO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjcmVhdGVGb3JtID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dEZvcm0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdmb3JtJyk7XG4gICAgICAgIHJldHVybiBpbnB1dEZvcm07XG4gICAgfVxuXG4gICAgY29uc3QgY3JlYXRlSW5wdXRGaWVsZCA9IChwbGFjZWhvbGRlclRleHQpID0+IHtcbiAgICAgICAgY29uc3QgdXNlcklucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgdXNlcklucHV0LnNldEF0dHJpYnV0ZSgndHlwZScsICd0ZXh0Jyk7XG4gICAgICAgIHVzZXJJbnB1dC5zZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJywgcGxhY2Vob2xkZXJUZXh0KTtcbiAgICAgICAgdXNlcklucHV0LnNldEF0dHJpYnV0ZSgnaWQnLCAndXNlci1pbnB1dCcpO1xuICAgICAgICB1c2VySW5wdXQucmVxdWlyZWQgPSB0cnVlO1xuXG4gICAgICAgIHJldHVybiB1c2VySW5wdXQ7XG4gICAgfVxuXG4gICAgY29uc3QgY3JlYXRlRGl2ID0gKGh0bWxDbGFzcykgPT4ge1xuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZGl2LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBodG1sQ2xhc3MpO1xuICAgICAgICByZXR1cm4gZGl2O1xuICAgIH1cblxuICAgIHJldHVybiB7Y3JlYXRlTGlzdEVsZW1lbnQsIGNyZWF0ZVNwYW5FbGVtZW50LCBjcmVhdGVJbWFnZUVsZW1lbnQsIGNyZWF0ZUlucHV0RmllbGQsIGNyZWF0ZUZvcm0sIGNyZWF0ZURpdn1cbn1cblxuY29uc3QgY3JlYXRlSWNvblNwYW4gPSAoKSA9PiB7XG4gICAgY29uc3QgdmlldyA9IGNyZWF0ZUVsZW1lbnRzKCk7XG5cbiAgICBjb25zdCBpY29uU3BhbiA9IHZpZXcuY3JlYXRlU3BhbkVsZW1lbnQoJ2ljb25zJyk7XG4gICAgY29uc3QgZWRpdEljb24gPSB2aWV3LmNyZWF0ZUltYWdlRWxlbWVudCgnaW1hZ2VzL2VkaXQtaWNvbi5zdmcnLCAnZWRpdC1pY29uJyk7XG4gICAgY29uc3QgZGVsZXRlSWNvbiA9IHZpZXcuY3JlYXRlSW1hZ2VFbGVtZW50KCdpbWFnZXMvZGVsZXRlLWljb24uc3ZnJywgJ2RlbGV0ZS1pY29uJyk7XG4gICAgXG4gICAgZWRpdEljb24uY2xhc3NMaXN0LmFkZCgnZWRpdC1wcm9qZWN0Jyk7XG4gICAgZGVsZXRlSWNvbi5jbGFzc0xpc3QuYWRkKCdkZWxldGUtcHJvamVjdCcpO1xuICAgIFxuICAgIGljb25TcGFuLmFwcGVuZChlZGl0SWNvbiwgZGVsZXRlSWNvbik7XG4gICAgXG4gICAgcmV0dXJuIGljb25TcGFuO1xufVxuXG5jb25zdCBhZGRQcm9qZWN0VG9TaWRlYmFyID0gKCkgPT4ge1xuICAgIGNvbnN0IHZpZXcgPSBjcmVhdGVFbGVtZW50cygpO1xuICAgIGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbGlzdCcpO1xuXG4gICAgY29uc3QgcHJvamVjdExpc3RFbGVtZW50ID0gIHZpZXcuY3JlYXRlTGlzdEVsZW1lbnQoJ3Byb2plY3QtaXRlbScpO1xuICAgIFxuICAgIGNvbnN0IHByb2plY3RJbnB1dEZvcm0gPSB2aWV3LmNyZWF0ZUZvcm0oKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZUlucHV0ID0gdmlldy5jcmVhdGVJbnB1dEZpZWxkKCdQcm9qZWN0IG5hbWUuLi4nKTtcbiAgICBwcm9qZWN0SW5wdXRGb3JtLmFwcGVuZChwcm9qZWN0TmFtZUlucHV0KTtcblxuICAgIGNvbnN0IGljb25TcGFuID0gY3JlYXRlSWNvblNwYW4oKTtcbiAgICBwcm9qZWN0TGlzdEVsZW1lbnQuYXBwZW5kKHByb2plY3RJbnB1dEZvcm0sIGljb25TcGFuKTtcbiAgICBwcm9qZWN0c0NvbnRhaW5lci5pbnNlcnRCZWZvcmUocHJvamVjdExpc3RFbGVtZW50LCBwcm9qZWN0c0NvbnRhaW5lci5sYXN0RWxlbWVudENoaWxkKTtcblxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBwcm9qZWN0TmFtZUlucHV0LmZvY3VzKCk7XG4gICAgfSwgMCk7XG59XG5cbmNvbnN0IGFkZFByb2plY3RUb05vdGVwYWQgPSAocHJvamVjdElkKSA9PiB7XG4gICAgY29uc3QgdmlldyA9IGNyZWF0ZUVsZW1lbnRzKCk7XG5cbiAgICBjb25zdCBwcm9qZWN0cyA9IHVwZGF0ZVN0b3JhZ2UuZ2V0UHJvamVjdHMoKTtcbiAgICBjb25zdCBwcm9qZWN0VG9BZGQgPSBwcm9qZWN0cy5maW5kKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PSBwcm9qZWN0SWQpO1xuICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvamVjdFRvQWRkLnByb2plY3ROYW1lO1xuXG4gICAgY29uc3Qgbm90ZXBhZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN3cml0aW5nLWFyZWEnKTtcbiAgICBjb25zdCBwcm9qZWN0RGl2ID0gdmlldy5jcmVhdGVEaXYoJ3Byb2plY3QnKTtcbiAgICBwcm9qZWN0RGl2LnNldEF0dHJpYnV0ZSgnZGF0YS1wcm9qZWN0LWlkJywgcHJvamVjdElkKTtcbiAgICBjb25zdCBza2lwTGluZSA9IHZpZXcuY3JlYXRlRGl2KCdza2lwLWxpbmUnKTtcbiAgICBcbiAgICBjb25zdCBwcm9qZWN0SGVhZGluZyA9IHZpZXcuY3JlYXRlRGl2KCdwcm9qZWN0LWhlYWRpbmcnKTtcbiAgICBjb25zdCBoMiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gyJyk7XG4gICAgaDIuc2V0QXR0cmlidXRlKCdjbGFzcycsICdub3RlcGFkLXRleHQnKTtcbiAgICBoMi50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xuICAgIGNvbnN0IGgzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDMnKTtcbiAgICBoMy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25vdGVwYWQtdGV4dCcpO1xuICAgIGgzLnRleHRDb250ZW50ID0gJ0R1ZSBEYXRlJztcbiAgICAgICAgXG4gICAgY29uc3QgdGFza3NDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpO1xuICAgIHRhc2tzQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ25vdGVwYWQtdGV4dCcsICd0b2RvcycpO1xuXG4gICAgY29uc3QgYWRkVGFza0xpc3RFbGVtZW50ID0gdmlldy5jcmVhdGVMaXN0RWxlbWVudCgndGFzaycpO1xuICAgIGNvbnN0IGFkZFRhc2tTcGFuID0gdmlldy5jcmVhdGVTcGFuRWxlbWVudCgnYWRkLXRhc2snKTtcbiAgICBjb25zdCBhZGRJY29uID0gdmlldy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9hZGQtaWNvbi5zdmcnLCAnYWRkLWljb24nKTtcbiAgICBhZGRUYXNrU3Bhbi5hcHBlbmQoYWRkSWNvbiwgJ0FkZCBUYXNrJyk7XG5cbiAgICBhZGRUYXNrTGlzdEVsZW1lbnQuYXBwZW5kKGFkZFRhc2tTcGFuKTtcbiAgICB0YXNrc0NvbnRhaW5lci5hcHBlbmQoYWRkVGFza0xpc3RFbGVtZW50LCBza2lwTGluZSk7XG4gICAgcHJvamVjdEhlYWRpbmcuYXBwZW5kKGgyLCBoMyk7XG4gICAgcHJvamVjdERpdi5hcHBlbmQocHJvamVjdEhlYWRpbmcsIHRhc2tzQ29udGFpbmVyKTtcbiAgICBub3RlcGFkLmFwcGVuZChwcm9qZWN0RGl2KTtcbn1cblxuY29uc3QgYWRkRHVlRGF0ZVRvRE9NID0gKCkgPT4ge1xuICAgIGNvbnN0IGR1ZURhdGVTcGFuID0gY3JlYXRlRWxlbWVudHMoKS5jcmVhdGVTcGFuRWxlbWVudCgnZHVlLWRhdGUnKTtcblxuICAgIGNvbnN0IHByaW9yaXR5SWNvbiA9IGNyZWF0ZUVsZW1lbnRzKCkuY3JlYXRlSW1hZ2VFbGVtZW50KCdpbWFnZXMvcHJpb3JpdHktaWNvbi5zdmcnLCAncHJpb3JpdHktaWNvbicpXG4gICAgcHJpb3JpdHlJY29uLmNsYXNzTGlzdC5hZGQoJ3ByaW9yaXR5LWxvdycpO1xuICAgIFxuICAgIGNvbnN0IGRhdGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgZGF0ZUxhYmVsLmNsYXNzTGlzdC5hZGQoJ2RhdGUtbGFiZWwnKTtcbiAgICBcbiAgICBjb25zdCBkYXRlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIGRhdGVJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAnZGF0ZScpO1xuICAgIGRhdGVJbnB1dC5yZXF1aXJlZCA9IHRydWU7XG5cbiAgICBjb25zdCBjYWxlbmRhckljb24gPSBjcmVhdGVFbGVtZW50cygpLmNyZWF0ZUltYWdlRWxlbWVudCgnaW1hZ2VzL2NhbGVuZGFyLWljb24uc3ZnJywgJ2NhbGVuZGFyLWljb24nKTtcblxuICAgIGRhdGVMYWJlbC5hcHBlbmQoZGF0ZUlucHV0LCBjYWxlbmRhckljb24pO1xuICAgIGR1ZURhdGVTcGFuLmFwcGVuZChwcmlvcml0eUljb24sIGRhdGVMYWJlbCk7XG4gICAgXG4gICAgLy8gdXBkYXRlIGxvY2FsU3RvcmFnZSBvbiBkdWUgZGF0ZSBjaGFuZ2VcbiAgICBkYXRlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0SWQgPSBkYXRlSW5wdXQuY2xvc2VzdCgnLnByb2plY3QnKS5kYXRhc2V0LnByb2plY3RJZDtcbiAgICAgICAgY29uc3QgdGFza0lkID0gZGF0ZUlucHV0LmNsb3Nlc3QoJ1tkYXRhLXRhc2staWRdJykuZGF0YXNldC50YXNrSWQ7XG4gICAgICAgIGNvbnN0IG5ld0R1ZURhdGUgPSBkYXRlSW5wdXQudmFsdWU7XG5cbiAgICAgICAgcmV0dXJuIGhhbmRsZXJzLm9uVGFza0R1ZURhdGVFZGl0KHByb2plY3RJZCwgdGFza0lkLCBuZXdEdWVEYXRlKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBkdWVEYXRlU3Bhbjtcbn1cblxuLy8gY3JlYXRlcyBIVE1MIGZvciBwcm9qZWN0IGl0ZW1zIGluIHNpZGViYXIgZnJvbSBsb2NhbFN0b3JhZ2UgaXRlbVxuY29uc3QgX2NyZWF0ZVByb2plY3RJdGVtSFRNTCA9IChpZCwgbmFtZSkgPT4ge1xuICAgIGNvbnN0IHZpZXcgPSBjcmVhdGVFbGVtZW50cygpO1xuXG4gICAgY29uc3QgcHJvamVjdEl0ZW0gPSB2aWV3LmNyZWF0ZUxpc3RFbGVtZW50KCdwcm9qZWN0LWl0ZW0nKTtcbiAgICBwcm9qZWN0SXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdC1pZCcsIGlkKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IHZpZXcuY3JlYXRlU3BhbkVsZW1lbnQoJ3Byb2plY3QtbmFtZScpO1xuICAgIHByb2plY3ROYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBjb25zdCBpY29uU3BhbiA9IGNyZWF0ZUljb25TcGFuKCk7XG5cbiAgICBwcm9qZWN0SXRlbS5hcHBlbmQocHJvamVjdE5hbWUsIGljb25TcGFuKTtcblxuICAgIHJldHVybiBwcm9qZWN0SXRlbTtcbn1cbi8vIFVwZGF0ZXMgcHJvamVjdCBsaXN0IGluIHRoZSBzaWRlYmFyIFxuY29uc3QgdXBkYXRlUHJvamVjdExpc3QgPSAocHJvamVjdHMpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0c0xpc3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1saXN0Jyk7XG4gICAgY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFkZC1wcm9qZWN0XScpO1xuICAgIFxuICAgIC8vIENsZWFyIGFsbCBlbGVtZW50cyBvZiBjbGFzcyAnLnByb2plY3QtaXRlbSdcbiAgICBjb25zdCBwcm9qZWN0c0FycmF5ID0gW10uc2xpY2UuY2FsbChwcm9qZWN0c0xpc3RDb250YWluZXIuY2hpbGRyZW4pO1xuICAgIHByb2plY3RzQXJyYXkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdwcm9qZWN0LWl0ZW0nKSkgaXRlbS5yZW1vdmUoKTtcbiAgICB9KTtcblxuICAgIGZvciAoY29uc3QgcHJvamVjdCBvZiBwcm9qZWN0cykge1xuICAgICAgICBjb25zdCBodG1sID0gX2NyZWF0ZVByb2plY3RJdGVtSFRNTChwcm9qZWN0LmlkLCBwcm9qZWN0LnByb2plY3ROYW1lKTtcbiAgICAgICAgcHJvamVjdHNMaXN0Q29udGFpbmVyLmluc2VydEJlZm9yZShodG1sLCBhZGRQcm9qZWN0QnRuKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgbGlzdGVuZXJzIGZvciBlZGl0LCBkZWxldGUgPz8/P1xuICAgIHByb2plY3RzTGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdC1pdGVtJykuZm9yRWFjaChwcm9qZWN0SXRlbSA9PiB7XG4gICAgICAgIHByb2plY3RJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHVzZXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyLWlucHV0Jyk7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQubm9kZU5hbWUgPT09ICdJTUcnIHx8IHVzZXJJbnB1dCkgcmV0dXJuO1xuICAgICAgICAgICAgaGFuZGxlcnMub25Qcm9qZWN0U2VsZWN0KHByb2plY3RJdGVtLmRhdGFzZXQucHJvamVjdElkKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmNvbnN0IGxvYWRUYXNrID0gICh0YXNrT2JqKSA9PiB7XG4gICAgY29uc3QgdmlldyA9IGNyZWF0ZUVsZW1lbnRzKCk7XG5cbiAgICBjb25zdCB0YXNrID0gdmlldy5jcmVhdGVMaXN0RWxlbWVudCgndGFzaycpO1xuICAgIHRhc2suc2V0QXR0cmlidXRlKCdkYXRhLXRhc2staWQnLCB0YXNrT2JqLnRhc2tJZCk7XG5cbiAgICBjb25zdCB0YXNrSXRlbSA9IHZpZXcuY3JlYXRlU3BhbkVsZW1lbnQoJ3Rhc2staXRlbScpO1xuICAgIFxuICAgIGNvbnN0IHRhc2tOYW1lU3BhbiA9IHZpZXcuY3JlYXRlU3BhbkVsZW1lbnQoJ3Rhc2stdGV4dCcpO1xuICAgIHRhc2tOYW1lU3Bhbi50ZXh0Q29udGVudCA9IHRhc2tPYmouaXRlbTtcbiAgICBcbiAgICBjb25zdCBpY29uU3BhbiA9IGNyZWF0ZUljb25TcGFuKCk7XG4gICAgdGFza0l0ZW0uYXBwZW5kKHRhc2tOYW1lU3BhbiwgaWNvblNwYW4pO1xuICAgXG4gICAgY29uc3QgZHVlRGF0ZVNwYW4gPSBhZGREdWVEYXRlVG9ET00oKTtcblxuICAgIGNvbnN0IHByaW9yaXR5SWNvbiA9IGR1ZURhdGVTcGFuLnF1ZXJ5U2VsZWN0b3IoJy5wcmlvcml0eS1pY29uJyk7XG4gICAgcHJpb3JpdHlJY29uLmNsYXNzTGlzdC5hZGQoYHByaW9yaXR5LSR7dGFza09iai5wcmlvcml0eX1gKTtcbiAgICBcbiAgICBjb25zdCBkYXRlSW5wdXQgPSBkdWVEYXRlU3Bhbi5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuICAgIGRhdGVJbnB1dC52YWx1ZSA9IHRhc2tPYmouZHVlRGF0ZTtcbiAgXG4gICAgaWYgKHRhc2tPYmouaXNDb21wbGV0ZSkgdGFzay5jbGFzc0xpc3QuYWRkKCdjb21wbGV0ZWQnKTtcblxuICAgIHRhc2suYXBwZW5kKHRhc2tJdGVtLCBkdWVEYXRlU3Bhbik7XG5cbiAgICByZXR1cm4gdGFzaztcbn1cblxuY29uc3QgdXBkYXRlQWN0aXZlVGFiID0gKHRhYikgPT4ge1xuICAgIC8vIGZvciBhbGwgb3RoZXIgcHJvamVjdHMsIGNoYW5nZSBkaXNwbGF5IHRvIG5vbmUsIHRvIGJyaW5nIGJhY2sgc2V0IGRpc3BsYXkgdG8gY29udGVudHMgIFxuICAgICAgICAvLyBpdGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAvLyByZW1vdmUgYWN0aXZlIGNsYXNzIGZyb20gYW55IG90aGVyIHNpZGViYXIgZWxlbWVudFxuICAgIGNvbnN0IGN1cnJlbnRBY3RpdmVUYWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYWN0aXZlJyk7XG4gICAgaWYgKGN1cnJlbnRBY3RpdmVUYWIpIGN1cnJlbnRBY3RpdmVUYWIuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgdGFiLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIGNvbnN0IHByb2plY3ROYW1lU3BhbiA9IHRhYi5jaGlsZHJlbi5pdGVtKDApOyAvLyBVcGRhdGUgbm90ZXBhZCBoZXJlP1xuICAgIC8vY29uc29sZS5sb2cocHJvamVjdE5hbWVTcGFuKTtcbn1cblxuZXhwb3J0IHsgYWRkUHJvamVjdFRvU2lkZWJhciwgYWRkUHJvamVjdFRvTm90ZXBhZCwgYWRkRHVlRGF0ZVRvRE9NLCBjcmVhdGVFbGVtZW50cywgdXBkYXRlUHJvamVjdExpc3QsIHVwZGF0ZUFjdGl2ZVRhYiwgbG9hZFRhc2sgfTsiLCJpbXBvcnQgeyBhZGRQcm9qZWN0VG9TaWRlYmFyLCBhZGRQcm9qZWN0VG9Ob3RlcGFkLCBjcmVhdGVFbGVtZW50cyB9IGZyb20gXCIuL2NyZWF0ZURPTUVsZW1lbnRzXCI7XG5pbXBvcnQgaGFuZGxlcnMgZnJvbSBcIi4vaGFuZGxlcnNcIjtcbmltcG9ydCB1cGRhdGVTdG9yYWdlIGZyb20gXCIuL3N0b3JhZ2VcIlxuXG5jb25zdCBhd2FpdGluZ0lucHV0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyLWlucHV0Jyk7XG4gICAgaWYgKHVzZXJJbnB1dCAhPSBudWxsKSByZXR1cm4gdHJ1ZTtcblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuY29uc3QgaGFuZGxlVXNlcklucHV0ID0gKCkgPT4geyBcbiAgICAvLyBUaGlzIGlzIERPTSBTdHVmZlxuICAgIGNvbnN0IHVzZXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyLWlucHV0JylcbiAgICBjb25zdCBpbnB1dEZvcm0gPSB1c2VySW5wdXQucGFyZW50RWxlbWVudDtcbiAgICBjb25zdCBwcm9qZWN0SXRlbSA9IGlucHV0Rm9ybS5wYXJlbnRFbGVtZW50O1xuICAgIGNvbnN0IHByb2plY3RTcGFuID0gY3JlYXRlRWxlbWVudHMoKS5jcmVhdGVTcGFuRWxlbWVudCgncHJvamVjdC1uYW1lJyk7XG4gICAgXG4gICAgY29uc3QgcHJvamVjdE5hbWUgPSB1c2VySW5wdXQudmFsdWUudHJpbSgpO1xuICAgIGlmICghcHJvamVjdE5hbWUpIHJldHVybjtcblxuICAgIHByb2plY3RTcGFuLnRleHRDb250ZW50ID0gcHJvamVjdE5hbWU7XG4gICAgdXNlcklucHV0LnBhcmVudEVsZW1lbnQucmVtb3ZlKCk7XG4gICAgcHJvamVjdEl0ZW0uaW5zZXJ0QmVmb3JlKHByb2plY3RTcGFuLCBwcm9qZWN0SXRlbS5jaGlsZE5vZGVzWzBdKTsgXG59XG5cbmNvbnN0IGFkZFByb2plY3QgPSAoKSA9PiB7XG4gICAgaWYgKGF3YWl0aW5nSW5wdXQoKSkgcmV0dXJuO1xuICAgIGFkZFByb2plY3RUb1NpZGViYXIoKTtcbiAgICBcbiAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1pbnB1dCcpO1xuICAgIGNvbnN0IGlucHV0Rm9ybSA9IHVzZXJJbnB1dC5wYXJlbnRFbGVtZW50O1xuICAgIGNvbnN0IHByb2plY3RJdGVtID0gaW5wdXRGb3JtLnBhcmVudEVsZW1lbnQ7XG5cbiAgICB1c2VySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHVzZXJJbnB1dC52YWx1ZS50cmltKCkgPT0gJycpIHtcbiAgICAgICAgICAgIHByb2plY3RJdGVtLnJlbW92ZSgpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZVVzZXJJbnB1dCgpO1xuXG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvamVjdEl0ZW0uZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgIGhhbmRsZXJzLm9uUHJvamVjdEFkZChwcm9qZWN0TmFtZSk7IFxuXG4gICAgICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbGlzdCcpO1xuICAgICAgICAvLyBTZWxlY3QgbGFzdCBwcm9qZWN0IGFkZGVkIGFuZCBnZXQgaWQgYXR0cmlidXRlXG4gICAgICAgIGNvbnN0IHByb2plY3RJZCA9IHByb2plY3RMaXN0LmNoaWxkcmVuW3Byb2plY3RMaXN0LmNoaWxkRWxlbWVudENvdW50IC0gMl0uZ2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3QtaWQnKTtcbiAgICAgICAgaWYgKCFhd2FpdGluZ0lucHV0KCkpIGFkZFByb2plY3RUb05vdGVwYWQocHJvamVjdElkKTtcbiAgICB9KTtcblxuICAgIGlucHV0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGhhbmRsZVVzZXJJbnB1dCgpO1xuICAgICAgICBjb25zdCBwcm9qZWN0TmFtZSA9IHByb2plY3RJdGVtLmZpcnN0RWxlbWVudENoaWxkLnRleHRDb250ZW50O1xuICAgICAgICBoYW5kbGVycy5vblByb2plY3RBZGQocHJvamVjdE5hbWUpOyBcbiAgICAgICAgY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1saXN0Jyk7XG4gICAgICAgIGNvbnN0IHByb2plY3RJZCA9IHByb2plY3RMaXN0LmNoaWxkcmVuW3Byb2plY3RMaXN0LmNoaWxkRWxlbWVudENvdW50IC0gMl0uZ2V0QXR0cmlidXRlKCdkYXRhLXByb2plY3QtaWQnKTtcbiAgICAgICAgaWYgKCFhd2FpdGluZ0lucHV0KCkpIGFkZFByb2plY3RUb05vdGVwYWQocHJvamVjdElkKTtcbiAgICB9KTtcbn1cblxuY29uc3QgZGVsZXRlUHJvamVjdCA9ICgpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWxpc3QnKTtcbiAgICBwcm9qZWN0TGlzdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldC5jbG9zZXN0KCcuZGVsZXRlLXByb2plY3QnKSkge1xuICAgICAgICAgICAgY29uc3QgZG9EZWxldGUgPSBjb25maXJtKCdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgcHJvamVjdCBhbmQgYWxsIGl0cyB0YXNrcz8gVGhpcyBhY3Rpb24gY2Fubm90IGJlIHVuZG9uZS4nKTtcbiAgICAgICAgICAgIGlmICghZG9EZWxldGUpIHJldHVybjtcbiAgICAgICAgICAgIGNvbnN0IHByb2plY3RJZCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLXByb2plY3QtaWRdJykuZGF0YXNldC5wcm9qZWN0SWQ7XG4gICAgICAgICAgICBjb25zdCBwcm9qZWN0RWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGBbZGF0YS1wcm9qZWN0LWlkPVwiJHtwcm9qZWN0SWR9XCJdYCk7XG4gICAgICAgICAgICBwcm9qZWN0RWxlbWVudHMuZm9yRWFjaChlbGVtZW50ID0+IGVsZW1lbnQucmVtb3ZlKCkpO1xuICAgICAgICAgICAgdXBkYXRlU3RvcmFnZS5kZWxldGVQcm9qZWN0KHByb2plY3RJZCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiBcbmNvbnN0IGVkaXRQcm9qZWN0ID0gKGUpID0+IHtcbiAgICBpZiAoYXdhaXRpbmdJbnB1dCgpKSByZXR1cm47XG4gICAgXG4gICAgLy8gVGhpcyBpcyBET00gU3R1ZmZcbiAgICBjb25zdCBpbnB1dEZvcm0gPSBjcmVhdGVFbGVtZW50cygpLmNyZWF0ZUZvcm0oKTtcbiAgICBjb25zdCBpbnB1dEZpZWxkID0gY3JlYXRlRWxlbWVudHMoKS5jcmVhdGVJbnB1dEZpZWxkKCdQcm9qZWN0IG5hbWUuLi4nKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgIGlucHV0RmllbGQudmFsdWUgPSBwcm9qZWN0TmFtZS50ZXh0Q29udGVudDtcbiAgICBwcm9qZWN0TmFtZS5yZW1vdmUoKTtcbiAgICBpbnB1dEZvcm0uYXBwZW5kKGlucHV0RmllbGQpO1xuICAgIFxuICAgIGNvbnN0IHByb2plY3RJdGVtID0gZS50YXJnZXQuY2xvc2VzdCgnLnByb2plY3QtaXRlbScpO1xuICAgIHByb2plY3RJdGVtLmluc2VydEJlZm9yZShpbnB1dEZvcm0sIHByb2plY3RJdGVtLmNoaWxkTm9kZXNbMF0pO1xuICAgIFxuICAgIGNvbnN0IHVzZXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyLWlucHV0Jyk7XG4gICAgdXNlcklucHV0LmZvY3VzKCk7XG4gICAgXG4gICAgY29uc3QgcHJvamVjdElkID0gcHJvamVjdEl0ZW0uZGF0YXNldC5wcm9qZWN0SWQ7XG5cbiAgICB1c2VySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHVzZXJJbnB1dC52YWx1ZSAhPSAnJykgaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvamVjdEl0ZW0uZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgIHVwZGF0ZU5hbWVPbk5vdGVwYWQocHJvamVjdElkLCBwcm9qZWN0TmFtZSk7XG4gICAgICAgIGhhbmRsZXJzLm9uUHJvamVjdE5hbWVFZGl0KHByb2plY3RJZCwgcHJvamVjdE5hbWUpO1xuICAgIH0pO1xuXG4gICAgaW5wdXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvamVjdEl0ZW0uZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgIHVwZGF0ZU5hbWVPbk5vdGVwYWQocHJvamVjdElkLCBwcm9qZWN0TmFtZSk7XG4gICAgICAgIGhhbmRsZXJzLm9uUHJvamVjdE5hbWVFZGl0KHByb2plY3RJZCwgcHJvamVjdE5hbWUpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgdXBkYXRlTmFtZU9uTm90ZXBhZCA9IChwcm9qZWN0SWQsIHByb2plY3ROYW1lKSA9PiB7XG4gICAgICAgIGNvbnN0IG5vdGVwYWQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubm90ZXBhZCcpO1xuICAgICAgICBjb25zdCBwcm9qZWN0VGFza3NDb250YWluZXIgPSBub3RlcGFkLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLXByb2plY3QtaWQ9XCIke3Byb2plY3RJZH1cIl1gKTtcbiAgICAgICAgaWYgKHByb2plY3RUYXNrc0NvbnRhaW5lcikge1xuICAgICAgICAgICAgcHJvamVjdFRhc2tzQ29udGFpbmVyLmNoaWxkTm9kZXNbMF0uY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgeyBcbiAgICBhZGRQcm9qZWN0LFxuICAgIGRlbGV0ZVByb2plY3QsXG4gICAgZWRpdFByb2plY3Rcbn0iLCJpbXBvcnQge2NyZWF0ZUVsZW1lbnRzLCBhZGREdWVEYXRlVG9ET019IGZyb20gXCIuL2NyZWF0ZURPTUVsZW1lbnRzXCI7XG5pbXBvcnQge2Zvcm1hdH0gZnJvbSBcImRhdGUtZm5zXCI7XG5pbXBvcnQgaGFuZGxlcnMgZnJvbSBcIi4vaGFuZGxlcnNcIjtcbmltcG9ydCB1cGRhdGVTdG9yYWdlIGZyb20gXCIuL3N0b3JhZ2VcIjtcblxuY29uc3QgdG9nZ2xlVGFzayA9ICh0YXNrRWxlbWVudCkgPT4ge1xuICAgIHRhc2tFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ2NvbXBsZXRlZCcpO1xuICAgIGxldCBpc0NvbXBsZXRlID0gZmFsc2U7XG5cbiAgICBpZiAodGFza0VsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZWQnKSkge1xuICAgICAgICBpc0NvbXBsZXRlID0gdHJ1ZTtcbiAgICB9XG4gICAgY29uc3QgcHJvamVjdElkID0gdGFza0VsZW1lbnQuY2xvc2VzdCgnLnByb2plY3QnKS5kYXRhc2V0LnByb2plY3RJZDtcbiAgICBjb25zdCB0YXNrSWQgPSB0YXNrRWxlbWVudC5kYXRhc2V0LnRhc2tJZDtcblxuICAgIHJldHVybiBoYW5kbGVycy5vblRhc2tDb21wbGV0ZUVkaXQocHJvamVjdElkLCB0YXNrSWQsIGlzQ29tcGxldGUpO1xufVxuXG5jb25zdCBhZGRUYXNrVG9ET00gPSAoYWRkVGFza0J0bikgPT4ge1xuICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlci1pbnB1dCcpKSByZXR1cm47XG4gICAgY29uc3QgdGFza0xpc3RFbGVtZW50ID0gY3JlYXRlRWxlbWVudHMoKS5jcmVhdGVMaXN0RWxlbWVudCgndGFzaycpO1xuICAgIGNvbnN0IHRhc2tTcGFuID0gY3JlYXRlRWxlbWVudHMoKS5jcmVhdGVTcGFuRWxlbWVudCgndGFzay1pdGVtJyk7XG4gICAgY29uc3QgaW5wdXRGb3JtID0gY3JlYXRlRWxlbWVudHMoKS5jcmVhdGVGb3JtKCk7XG4gICAgY29uc3QgaW5wdXRGaWVsZCA9IGNyZWF0ZUVsZW1lbnRzKCkuY3JlYXRlSW5wdXRGaWVsZCgnRW50ZXIgVGFzay4uLicpO1xuICAgIFxuICAgIGlucHV0Rm9ybS5hcHBlbmQoaW5wdXRGaWVsZCk7XG4gICAgdGFza1NwYW4uYXBwZW5kKGlucHV0Rm9ybSk7XG5cbiAgICBjb25zdCBpY29uU3BhbiA9IGNyZWF0ZUVsZW1lbnRzKCkuY3JlYXRlU3BhbkVsZW1lbnQoJ2ljb25zJyk7XG4gICAgY29uc3QgZWRpdEljb24gPSBjcmVhdGVFbGVtZW50cygpLmNyZWF0ZUltYWdlRWxlbWVudCgnaW1hZ2VzL2VkaXQtaWNvbi5zdmcnLCAnZWRpdC1pY29uJyk7XG4gICAgY29uc3QgZGVsZXRlSWNvbiA9IGNyZWF0ZUVsZW1lbnRzKCkuY3JlYXRlSW1hZ2VFbGVtZW50KCdpbWFnZXMvZGVsZXRlLWljb24uc3ZnJywgJ2RlbGV0ZS1pY29uJyk7XG5cbiAgICBpY29uU3Bhbi5hcHBlbmQoZWRpdEljb24sIGRlbGV0ZUljb24pO1xuICAgIHRhc2tTcGFuLmFwcGVuZChpY29uU3Bhbik7XG4gICAgY29uc3QgZHVlRGF0ZSA9IGFkZER1ZURhdGVUb0RPTSgpO1xuICAgIHRhc2tMaXN0RWxlbWVudC5hcHBlbmQodGFza1NwYW4sIGR1ZURhdGUpO1xuICAgIFxuICAgIGNvbnN0IGNvbnRhaW5lciA9IGFkZFRhc2tCdG4uY2xvc2VzdCgnLnRvZG9zJyk7XG4gICAgY29uc3QgbnVtYmVyT2ZUYXNrcyA9IGNvbnRhaW5lci5jaGlsZEVsZW1lbnRDb3VudCAtIDI7XG5cbiAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKHRhc2tMaXN0RWxlbWVudCwgY29udGFpbmVyLmNoaWxkcmVuW251bWJlck9mVGFza3NdKTtcbiAgICBcbiAgICAvLyBXaGF0IGlzIHRoaXM/Pz9cbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgaW5wdXRGaWVsZC5mb2N1cygpO1xuICAgIH0sIDApO1xuXG4gICAgcmV0dXJuIHRhc2tTcGFuO1xufVxuXG5jb25zdCBlZGl0VGFzayA9ICh0YXNrKSA9PiB7XG4gICAgaWYgKHRhc2suY2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZWQnKSkgcmV0dXJuO1xuICAgIGNvbnN0IHRhc2tUZXh0U3BhbiA9IHRhc2sucXVlcnlTZWxlY3RvcignLnRhc2stdGV4dCcpO1xuICAgIGNvbnN0IHRhc2tOYW1lID0gdGFza1RleHRTcGFuLnRleHRDb250ZW50O1xuICAgIHRhc2tUZXh0U3Bhbi5yZW1vdmUoKTtcbiAgICBcbiAgICBjb25zdCBpbnB1dEZvcm0gPSBjcmVhdGVFbGVtZW50cygpLmNyZWF0ZUZvcm0oKTtcbiAgICBjb25zdCBpbnB1dEZpZWxkID0gY3JlYXRlRWxlbWVudHMoKS5jcmVhdGVJbnB1dEZpZWxkKCdFbnRlciBUYXNrLi4uJyk7XG4gICAgXG4gICAgaW5wdXRGaWVsZC52YWx1ZSA9IHRhc2tOYW1lO1xuICAgIGlucHV0Rm9ybS5hcHBlbmQoaW5wdXRGaWVsZCk7XG5cbiAgICBjb25zdCB0YXNrU3BhbiA9IHRhc2sucXVlcnlTZWxlY3RvcignLnRhc2staXRlbScpO1xuICAgIGNvbnN0IGljb25TcGFuID0gdGFzay5xdWVyeVNlbGVjdG9yKCcuaWNvbnMnKTtcblxuICAgIHRhc2tTcGFuLmluc2VydEJlZm9yZShpbnB1dEZvcm0sIGljb25TcGFuKTtcblxuICAgIHRhc2sucHJlcGVuZCh0YXNrU3Bhbik7XG4gICAgaW5wdXRGaWVsZC5mb2N1cygpO1xuICAgIGFkZFRhc2soKTtcbn1cblxuY29uc3QgZGVsZXRlVGFzayA9IChwcm9qZWN0SWQsIHRhc2tJZCkgPT4ge1xuICAgIGNvbnN0IHRhc2sgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS10YXNrLWlkPVwiJHt0YXNrSWR9XCJdYCk7XG4gICAgdGFzay5yZW1vdmUoKTtcbiAgICB1cGRhdGVTdG9yYWdlLmRlbGV0ZVRhc2socHJvamVjdElkLCB0YXNrSWQpO1xufVxuXG5jb25zdCBhZGRUYXNrID0gKCkgPT4ge1xuICAgIGNvbnN0IGlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1pbnB1dCcpO1xuICAgIGNvbnN0IGlucHV0Rm9ybSA9IGlucHV0RmllbGQucGFyZW50RWxlbWVudDtcbiAgICBjb25zdCB0YXNrQ29udGFpbmVyID0gaW5wdXRGb3JtLnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudDtcbiAgICBcbiAgICBpbnB1dEZpZWxkLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnN0IHByb2plY3RJZCA9IHRhc2tDb250YWluZXIuY2xvc2VzdCgnW2RhdGEtcHJvamVjdC1pZF0nKS5kYXRhc2V0LnByb2plY3RJZDtcbiAgICAgICAgY29uc3QgdGFzayA9IGlucHV0RmllbGQudmFsdWU7XG4gICAgICAgIHZhbGlkYXRlVXNlcklucHV0KCk7XG4gICAgICAgIGlmICh0YXNrKSBjcmVhdGVUYXNrKHRhc2ssIHByb2plY3RJZCwgdGFza0NvbnRhaW5lcik7XG4gICAgfSk7XG4gICAgXG4gICAgaW5wdXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgY29uc3QgcHJvamVjdElkID0gdGFza0NvbnRhaW5lci5jbG9zZXN0KCdbZGF0YS1wcm9qZWN0LWlkXScpLmRhdGFzZXQucHJvamVjdElkO1xuICAgICAgICBjb25zdCB0YXNrID0gaW5wdXRGaWVsZC52YWx1ZTtcbiAgICAgICAgdmFsaWRhdGVVc2VySW5wdXQoKTtcbiAgICAgICAgaWYgKHRhc2spIGNyZWF0ZVRhc2sodGFzaywgcHJvamVjdElkLCB0YXNrQ29udGFpbmVyKTtcbiAgICB9KTtcbn1cblxuY29uc3QgY3JlYXRlVGFzayA9ICh0YXNrLCBwcm9qZWN0SWQsIHRhc2tDb250YWluZXIpID0+IHtcbiAgICBpZiAodGFza0NvbnRhaW5lci5kYXRhc2V0LnRhc2tJZCkge1xuICAgICAgICByZXR1cm4gaGFuZGxlcnMub25UYXNrTmFtZUVkaXQocHJvamVjdElkLCB0YXNrQ29udGFpbmVyLmRhdGFzZXQudGFza0lkLCB0YXNrKTtcbiAgICB9XG4gICAgY29uc3QgdGFza09iaiA9IGhhbmRsZXJzLm9uVGFza0FkZCh0YXNrLCBwcm9qZWN0SWQpO1xuICAgIHRhc2tDb250YWluZXIuc2V0QXR0cmlidXRlKCdkYXRhLXRhc2staWQnLCB0YXNrT2JqLnRhc2tJZCk7XG59XG5cbmNvbnN0IHZhbGlkYXRlVXNlcklucHV0ID0gKCkgPT4ge1xuICAgIGNvbnN0IGlucHV0RmllbGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1pbnB1dCcpO1xuICAgIGNvbnN0IGlucHV0Rm9ybSA9IGlucHV0RmllbGQucGFyZW50RWxlbWVudDtcbiAgICBjb25zdCB0YXNrSXRlbSA9IGlucHV0Rm9ybS5wYXJlbnRFbGVtZW50O1xuICAgIGNvbnN0IHRhc2tDb250YWluZXIgPSB0YXNrSXRlbS5wYXJlbnRFbGVtZW50O1xuXG4gICAgY29uc3QgdXNlcklucHV0ID0gaW5wdXRGaWVsZC52YWx1ZS50cmltKCk7XG4gICAgY29uc3QgdGFza1RleHRTcGFuID0gY3JlYXRlRWxlbWVudHMoKS5jcmVhdGVTcGFuRWxlbWVudCgndGFzay10ZXh0Jyk7XG4gICAgdGFza1RleHRTcGFuLmFwcGVuZCh1c2VySW5wdXQpO1xuXG4gICAgLy8gUmVtb3ZlcyB0YXNrIGNvbnRhaW5lciBpZiB0YXNrIGlzbid0IHlldCBpbiBsb2NhbFN0b3JhZ2UgKGhhcyBhIHRhc2tJZCBkYXRhIGF0dHJpYnV0ZSlcbiAgICBpZiAodXNlcklucHV0ID09ICcnICYmICF0YXNrQ29udGFpbmVyLmRhdGFzZXQudGFza0lkKSB7XG4gICAgICAgIHRhc2tDb250YWluZXIucmVtb3ZlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9IFxuICAgIGVsc2UgaWYgKHVzZXJJbnB1dCA9PSAnJyAmJiB0YXNrQ29udGFpbmVyLmRhdGFzZXQudGFza0lkKSByZXR1cm47XG4gICAgaW5wdXRGb3JtLnJlbW92ZSgpO1xuICAgIHRhc2tJdGVtLnByZXBlbmQodGFza1RleHRTcGFuKTtcbn1cblxuY29uc3QgdXBkYXRlUHJpb3JpdHkgPSAoZXZlbnRUYXJnZXQpID0+IHtcbiAgICBjb25zdCB0YXNrSXRlbUNsYXNzTGlzdCA9IGV2ZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQucGFyZW50RWxlbWVudC5jbGFzc0xpc3Q7XG4gICAgaWYgKHRhc2tJdGVtQ2xhc3NMaXN0LmNvbnRhaW5zKCdjb21wbGV0ZWQnKSkgcmV0dXJuO1xuICAgIGNvbnN0IHByb2plY3RJZCA9IGV2ZW50VGFyZ2V0LmNsb3Nlc3QoJy5wcm9qZWN0JykuZGF0YXNldC5wcm9qZWN0SWQ7XG4gICAgY29uc3QgdGFza0lkID0gZXZlbnRUYXJnZXQuY2xvc2VzdCgnW2RhdGEtdGFzay1pZF0nKS5kYXRhc2V0LnRhc2tJZDtcblxuICAgIGNvbnN0IHByaW9yaXR5Q2xhc3NMaXN0ID0gZXZlbnRUYXJnZXQuY2xhc3NMaXN0O1xuXG4gICAgaWYgKHByaW9yaXR5Q2xhc3NMaXN0LmNvbnRhaW5zKCdwcmlvcml0eS1sb3cnKSkge1xuICAgICAgICBwcmlvcml0eUNsYXNzTGlzdC5yZW1vdmUoJ3ByaW9yaXR5LWxvdycpO1xuICAgICAgICBwcmlvcml0eUNsYXNzTGlzdC5hZGQoJ3ByaW9yaXR5LW1lZGl1bScpO1xuICAgICAgICByZXR1cm4gaGFuZGxlcnMub25UYXNrUHJpb3JpdHlFZGl0KHByb2plY3RJZCwgdGFza0lkLCAnbWVkaXVtJyk7IFxuICAgIH1cbiAgICBpZiAocHJpb3JpdHlDbGFzc0xpc3QuY29udGFpbnMoJ3ByaW9yaXR5LW1lZGl1bScpKSB7XG4gICAgICAgIHByaW9yaXR5Q2xhc3NMaXN0LnJlbW92ZSgncHJpb3JpdHktbWVkaXVtJyk7XG4gICAgICAgIHByaW9yaXR5Q2xhc3NMaXN0LmFkZCgncHJpb3JpdHktaGlnaCcpO1xuICAgICAgICByZXR1cm4gaGFuZGxlcnMub25UYXNrUHJpb3JpdHlFZGl0KHByb2plY3RJZCwgdGFza0lkLCAnaGlnaCcpO1xuICAgIH1cbiAgICBpZiAocHJpb3JpdHlDbGFzc0xpc3QuY29udGFpbnMoJ3ByaW9yaXR5LWhpZ2gnKSkge1xuICAgICAgICBwcmlvcml0eUNsYXNzTGlzdC5yZW1vdmUoJ3ByaW9yaXR5LWhpZ2gnKTtcbiAgICAgICAgcHJpb3JpdHlDbGFzc0xpc3QuYWRkKCdwcmlvcml0eS1sb3cnKTtcbiAgICAgICAgcmV0dXJuIGhhbmRsZXJzLm9uVGFza1ByaW9yaXR5RWRpdChwcm9qZWN0SWQsIHRhc2tJZCwgJ2xvdycpO1xuICAgIH1cbn1cblxuZXhwb3J0IHtcbiAgICB0b2dnbGVUYXNrLFxuICAgIGFkZFRhc2tUb0RPTSxcbiAgICBhZGRUYXNrLFxuICAgIHVwZGF0ZVByaW9yaXR5LFxuICAgIGRlbGV0ZVRhc2ssXG4gICAgZWRpdFRhc2tcbn0iLCJpbXBvcnQgeyBhZGRQcm9qZWN0LCBkZWxldGVQcm9qZWN0LCBlZGl0UHJvamVjdCB9IGZyb20gXCIuL3Byb2plY3RzXCI7XG5pbXBvcnQgdXBkYXRlU3RvcmFnZSBmcm9tIFwiLi9zdG9yYWdlXCI7XG5pbXBvcnQgeyB1cGRhdGVQcm9qZWN0TGlzdCB9IGZyb20gXCIuL2NyZWF0ZURPTUVsZW1lbnRzXCI7XG5pbXBvcnQgeyB0b2dnbGVUYXNrLCBhZGRUYXNrVG9ET00sIGFkZFRhc2ssIHVwZGF0ZVByaW9yaXR5LCBkZWxldGVUYXNrLCBlZGl0VGFzaywgYWRqdXN0RWxlbWVudEhlaWdodCB9IGZyb20gXCIuL3Rhc2tzXCI7XG5pbXBvcnQgaGFuZGxlcnMgZnJvbSBcIi4vaGFuZGxlcnNcIjtcblxuLy8gTG9hZCBsb2NhbFN0b3JhZ2UgaXRlbXMgb24gcGFnZSBsb2FkXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb2plY3RzID0gdXBkYXRlU3RvcmFnZS5nZXRQcm9qZWN0cygpO1xuICAgIGNvbnN0IHRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXRhYj1cImhvbWVcIl0nKTtcbiAgIFxuICAgIHVwZGF0ZVByb2plY3RMaXN0KHByb2plY3RzKTtcbiAgICBoYW5kbGVycy5vbkhvbWVUYWJTZWxlY3QocHJvamVjdHMsIHRhYik7XG4vKlxuICAgIGNvbnN0IG1vYmlsZVRvZ2dsZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdiYXJzLWljb24tbW9iaWxlJyk7XG4gICAgY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzaWRlYmFyJyk7XG5cbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPD0gMTAyNCAmJiBtb2JpbGVUb2dnbGVCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICBtb2JpbGVUb2dnbGVCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgfSovXG59XG5cbi8vIFNpZGViYXIgTW9kdWxlXG5jb25zdCBzaWRlYmFyQ29udHJvbGxlciA9ICgoKSA9PiB7XG5cbiAgICBjb25zdCBtb2JpbGVUb2dnbGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFycy1pY29uLW1vYmlsZScpO1xuICAgIGNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lkZWJhcicpO1xuXG4gICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoIDw9IDEwMjQgJiYgbW9iaWxlVG9nZ2xlQnRuLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgbW9iaWxlVG9nZ2xlQnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICAgIH1cbiAgICBcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgKCkgPT4ge1xuICAgICAgICBpZiAoc2lkZWJhci5jbGFzc0xpc3QuY29udGFpbnMoJ3RvZ2dsZS1zaWRlYmFyJykpIHJldHVybjtcbiAgICAgICAgIFxuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPD0gMTAyNCAmJiBtb2JpbGVUb2dnbGVCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICAgICAgbW9iaWxlVG9nZ2xlQnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCB0b2dnbGVTaWRlYmFyID0gKCkgPT4ge1xuICAgICAgICBzaWRlYmFyLmNsYXNzTGlzdC50b2dnbGUoJ3RvZ2dsZS1zaWRlYmFyJyk7XG4gICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSAxMDI0KSBtb2JpbGVUb2dnbGVCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRvZ2dsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXJzLWljb24nKTtcbiAgICB0b2dnbGVCdG4uZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVTaWRlYmFyKTtcbiAgICB9KTsgICAgICAgIFxuXG4gICAgY29uc3QgaG9tZVRhYiA9IHNpZGViYXIucXVlcnlTZWxlY3RvcignW2RhdGEtdGFiPVwiaG9tZVwiXScpO1xuICAgIGNvbnN0IHRvZGF5VGFiID0gc2lkZWJhci5xdWVyeVNlbGVjdG9yKCdbZGF0YS10YWI9XCJ0b2RheVwiXScpO1xuICAgIGNvbnN0IHRoaXNXZWVrVGFiID0gc2lkZWJhci5xdWVyeVNlbGVjdG9yKCdbZGF0YS10YWI9XCJ0aGlzLXdlZWtcIl0nKTtcblxuICAgIFxuICAgIGhvbWVUYWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gdXBkYXRlU3RvcmFnZS5nZXRQcm9qZWN0cygpO1xuICAgICAgICBoYW5kbGVycy5vbkhvbWVUYWJTZWxlY3QocHJvamVjdHMsIGhvbWVUYWIpO1xuICAgIH0pO1xuXG4gICAgdG9kYXlUYWIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gdXBkYXRlU3RvcmFnZS5nZXRQcm9qZWN0cygpO1xuICAgICAgICBoYW5kbGVycy5vblRvZGF5VGFiU2VsZWN0KHByb2plY3RzLCB0b2RheVRhYik7XG4gICAgfSk7XG5cbiAgICB0aGlzV2Vla1RhYi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSB1cGRhdGVTdG9yYWdlLmdldFByb2plY3RzKCk7XG4gICAgICAgIGhhbmRsZXJzLm9uVGhpc1dlZWtUYWJTZWxlY3QocHJvamVjdHMsIHRoaXNXZWVrVGFiKTtcbiAgICB9KTtcblxufSkoKTtcblxuY29uc3QgcHJvamVjdENvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICAgIGRlbGV0ZVByb2plY3QoKTtcbiAgICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYWRkLXByb2plY3RdJyk7XG4gICAgYWRkUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFByb2plY3QpO1xuICAgIGNvbnN0IHByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbGlzdCcpO1xuXG4gICAgcHJvamVjdExpc3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0LXByb2plY3QnKSkge1xuICAgICAgICAgICAgZWRpdFByb2plY3QoZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKCk7XG5cbmNvbnN0IHRhc2tDb250cm9sbGVyID0gKCgpID0+IHtcbiAgICBjb25zdCBub3RlcGFkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm5vdGVwYWQnKTtcbiAgICBub3RlcGFkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygndGFzay10ZXh0JykpIHtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tFbGVtZW50ID0gZS50YXJnZXQuY2xvc2VzdCgnLnRhc2snKTtcbiAgICAgICAgICAgIHRvZ2dsZVRhc2sodGFza0VsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYWRkLXRhc2snKSkge1xuICAgICAgICAgICAgYWRkVGFza1RvRE9NKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIGFkZFRhc2soKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3ByaW9yaXR5LWljb24nKSkge1xuICAgICAgICAgICAgdXBkYXRlUHJpb3JpdHkoZS50YXJnZXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0LWljb24nKSkge1xuICAgICAgICAgICAgY29uc3QgdGFzayA9IGUudGFyZ2V0LmNsb3Nlc3QoJy50YXNrJyk7XG4gICAgICAgICAgICBlZGl0VGFzayh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZGVsZXRlLWljb24nKSkge1xuICAgICAgICAgICAgY29uc3QgcHJvamVjdElkID0gZS50YXJnZXQuY2xvc2VzdCgnW2RhdGEtcHJvamVjdC1pZF0nKS5kYXRhc2V0LnByb2plY3RJZDtcbiAgICAgICAgICAgIGNvbnN0IHRhc2tJZCA9IGUudGFyZ2V0LmNsb3Nlc3QoJ1tkYXRhLXRhc2staWRdJykuZGF0YXNldC50YXNrSWQ7XG4gICAgICAgICAgICBkZWxldGVUYXNrKHByb2plY3RJZCwgdGFza0lkKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSkoKTsiXSwibmFtZXMiOlsiZ2V0UHJvamVjdHMiLCJKU09OIiwicGFyc2UiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwic2F2ZVByb2plY3QiLCJwcm9qZWN0VG9TYXZlIiwicHJvamVjdHMiLCJleGlzdGluZyIsImZpbmQiLCJwcm9qZWN0IiwiaWQiLCJwcm9qZWN0TmFtZSIsInRhc2tzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwicHVzaCIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJnZXRUYXNrcyIsInByb2plY3RJZCIsImRlbGV0ZVByb2plY3QiLCJ1cGRhdGVkUHJvamVjdExpc3QiLCJmaWx0ZXIiLCJkZWxldGVUYXNrIiwidGFza0lkIiwicHJvamVjdFdpdGhUYXNrIiwidXBkYXRlZFRhc2tPYmoiLCJ0YXNrT2JqIiwiZmluZFRhc2tUb1VwZGF0ZSIsImV4aXN0aW5nVGFza0lkIiwidGFzayIsInVwZGF0ZVRhc2siLCJ1cGRhdGVkVGFzayIsInByb2plY3RUb1VwZGF0ZSIsInRhc2tzQXJyYXkiLCJpbmRleE9mVXBkYXRlZFRhc2siLCJmaW5kSW5kZXgiLCJyZXF1aXJlZEFyZ3MiLCJyZXF1aXJlZCIsImFyZ3MiLCJsZW5ndGgiLCJUeXBlRXJyb3IiLCJ0b0RhdGUiLCJhcmd1bWVudCIsImFyZ3VtZW50cyIsImFyZ1N0ciIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsIkRhdGUiLCJnZXRUaW1lIiwiY29uc29sZSIsIndhcm4iLCJFcnJvciIsInN0YWNrIiwiTmFOIiwic3RhcnRPZkRheSIsImRpcnR5RGF0ZSIsImRhdGUiLCJzZXRIb3VycyIsImlzU2FtZURheSIsImRpcnR5RGF0ZUxlZnQiLCJkaXJ0eURhdGVSaWdodCIsImRhdGVMZWZ0U3RhcnRPZkRheSIsImRhdGVSaWdodFN0YXJ0T2ZEYXkiLCJ0b0ludGVnZXIiLCJkaXJ0eU51bWJlciIsIm51bWJlciIsIk51bWJlciIsImlzTmFOIiwiY2VpbCIsIk1JTExJU0VDT05EU19JTl9IT1VSIiwicGF0dGVybnMiLCJkYXRlVGltZURlbGltaXRlciIsInRpbWVab25lRGVsaW1pdGVyIiwidGltZXpvbmUiLCJkYXRlUmVnZXgiLCJ0aW1lUmVnZXgiLCJ0aW1lem9uZVJlZ2V4IiwicGFyc2VJU08iLCJkaXJ0eU9wdGlvbnMiLCJvcHRpb25zIiwiYWRkaXRpb25hbERpZ2l0cyIsIlJhbmdlRXJyb3IiLCJkYXRlU3RyaW5ncyIsInNwbGl0RGF0ZVN0cmluZyIsInBhcnNlWWVhclJlc3VsdCIsInBhcnNlWWVhciIsInBhcnNlRGF0ZSIsInJlc3REYXRlU3RyaW5nIiwieWVhciIsIm9mZnNldCIsInRpbWVzdGFtcCIsInRpbWUiLCJwYXJzZVRpbWUiLCJyZXN1bHQiLCJzZXRGdWxsWWVhciIsImdldFVUQ0Z1bGxZZWFyIiwiZ2V0VVRDTW9udGgiLCJnZXRVVENEYXRlIiwiZ2V0VVRDSG91cnMiLCJnZXRVVENNaW51dGVzIiwiZ2V0VVRDU2Vjb25kcyIsImdldFVUQ01pbGxpc2Vjb25kcyIsInBhcnNlVGltZXpvbmUiLCJkYXRlU3RyaW5nIiwidGltZVN0cmluZyIsImFycmF5Iiwic3BsaXQiLCJ0ZXN0Iiwic3Vic3RyIiwidG9rZW4iLCJleGVjIiwicmVwbGFjZSIsInJlZ2V4IiwiUmVnRXhwIiwiY2FwdHVyZXMiLCJtYXRjaCIsInBhcnNlSW50IiwiY2VudHVyeSIsInNsaWNlIiwiaXNXZWVrRGF0ZSIsImRheU9mWWVhciIsInBhcnNlRGF0ZVVuaXQiLCJtb250aCIsImRheSIsIndlZWsiLCJkYXlPZldlZWsiLCJfeWVhciIsInZhbGlkYXRlV2Vla0RhdGUiLCJpc29XZWVrWWVhciIsInNldFVUQ0Z1bGxZZWFyIiwiZGlmZiIsImdldFVUQ0RheSIsInNldFVUQ0RhdGUiLCJkYXlPZklTT1dlZWtZZWFyIiwiZGF5c0luTW9udGhzIiwiaXNMZWFwWWVhckluZGV4IiwidmFsaWRhdGVEYXRlIiwidmFsaWRhdGVEYXlPZlllYXJEYXRlIiwibWF4IiwidmFsdWUiLCJob3VycyIsInBhcnNlVGltZVVuaXQiLCJtaW51dGVzIiwic2Vjb25kcyIsInZhbGlkYXRlVGltZSIsInBhcnNlRmxvYXQiLCJ0aW1lem9uZVN0cmluZyIsInNpZ24iLCJfaG91cnMiLCJ2YWxpZGF0ZVRpbWV6b25lIiwic3RhcnRPZldlZWsiLCJsb2NhbGUiLCJsb2NhbGVXZWVrU3RhcnRzT24iLCJ3ZWVrU3RhcnRzT24iLCJkZWZhdWx0V2Vla1N0YXJ0c09uIiwiZ2V0RGF5Iiwic2V0RGF0ZSIsImdldERhdGUiLCJpc1NhbWVXZWVrIiwiZGF0ZUxlZnRTdGFydE9mV2VlayIsImRhdGVSaWdodFN0YXJ0T2ZXZWVrIiwiX3JlZnJlc2hQcm9qZWN0TGlzdCIsInVwZGF0ZVByb2plY3RMaXN0IiwiZHVlVG9kYXkiLCJub3ciLCJpc1RvZGF5IiwiZHVlRGF0ZSIsImR1ZVRoaXNXZWVrIiwiaXNUaGlzV2VlayIsImxvYWRBbGxQcm9qZWN0cyIsImNsZWFyUHJvamVjdHNGcm9tRE9NIiwibm90ZXBhZCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImZvckVhY2giLCJhZGRQcm9qZWN0VG9Ob3RlcGFkIiwicHJvamVjdFRhc2tzIiwicHJvamVjdENvbnRhaW5lciIsInRhc2tzTGlzdCIsImFkZFRhc2tCdG4iLCJ0YXNrVG9BZGQiLCJsb2FkVGFzayIsImluc2VydEJlZm9yZSIsInBhcmVudEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwicmVtb3ZlIiwib25Qcm9qZWN0U2VsZWN0IiwicHJvamVjdE9iamVjdCIsInNlbGVjdGVkUHJvamVjdCIsImRhdGFzZXQiLCJ1cGRhdGVBY3RpdmVUYWIiLCJvblByb2plY3RBZGQiLCJuZXdQcm9qZWN0Iiwib25Qcm9qZWN0TmFtZUVkaXQiLCJvblRhc2tBZGQiLCJuZXdUYXNrIiwiaXRlbSIsInByaW9yaXR5IiwiaXNDb21wbGV0ZSIsIm9uVGFza05hbWVFZGl0IiwibmV3VGFza05hbWUiLCJleGlzdGluZ1Rhc2siLCJvblRhc2tQcmlvcml0eUVkaXQiLCJuZXdQcmlvcml0eSIsIm9uVGFza0R1ZURhdGVFZGl0IiwibmV3RHVlRGF0ZSIsIm9uVGFza0NvbXBsZXRlRWRpdCIsIm9uSG9tZVRhYlNlbGVjdCIsInRhYiIsIm9uVG9kYXlUYWJTZWxlY3QiLCJ0YXNrQ29udGFpbmVyIiwib25UaGlzV2Vla1RhYlNlbGVjdCIsImNyZWF0ZUVsZW1lbnRzIiwiY3JlYXRlTGlzdEVsZW1lbnQiLCJodG1sQ2xhc3MiLCJsaSIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJjcmVhdGVTcGFuRWxlbWVudCIsInNwYW4iLCJjbGFzc0xpc3QiLCJhZGQiLCJjcmVhdGVJbWFnZUVsZW1lbnQiLCJzcmMiLCJpbWciLCJjcmVhdGVJbnB1dEZpZWxkIiwicGxhY2Vob2xkZXJUZXh0IiwidXNlcklucHV0IiwiY3JlYXRlRm9ybSIsImNyZWF0ZURpdiIsImRpdiIsImNyZWF0ZUljb25TcGFuIiwidmlldyIsImljb25TcGFuIiwiZWRpdEljb24iLCJkZWxldGVJY29uIiwiYXBwZW5kIiwicHJvamVjdERpdiIsInNraXBMaW5lIiwicHJvamVjdEhlYWRpbmciLCJoMiIsInRleHRDb250ZW50IiwiaDMiLCJ0YXNrc0NvbnRhaW5lciIsImFkZFRhc2tMaXN0RWxlbWVudCIsImFkZFRhc2tTcGFuIiwiYWRkSWNvbiIsImFkZER1ZURhdGVUb0RPTSIsImR1ZURhdGVTcGFuIiwicHJpb3JpdHlJY29uIiwiZGF0ZUxhYmVsIiwiZGF0ZUlucHV0IiwiY2FsZW5kYXJJY29uIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNsb3Nlc3QiLCJfY3JlYXRlUHJvamVjdEl0ZW1IVE1MIiwibmFtZSIsInByb2plY3RJdGVtIiwicHJvamVjdHNMaXN0Q29udGFpbmVyIiwiYWRkUHJvamVjdEJ0biIsImNoaWxkcmVuIiwiY29udGFpbnMiLCJodG1sIiwiZSIsInRhcmdldCIsIm5vZGVOYW1lIiwidGFza0l0ZW0iLCJ0YXNrTmFtZVNwYW4iLCJjdXJyZW50QWN0aXZlVGFiIiwiYXdhaXRpbmdJbnB1dCIsImhhbmRsZVVzZXJJbnB1dCIsInByb2plY3RTcGFuIiwidHJpbSIsImNoaWxkTm9kZXMiLCJhZGRQcm9qZWN0IiwicHJvamVjdHNDb250YWluZXIiLCJwcm9qZWN0TGlzdEVsZW1lbnQiLCJwcm9qZWN0SW5wdXRGb3JtIiwicHJvamVjdE5hbWVJbnB1dCIsImxhc3RFbGVtZW50Q2hpbGQiLCJzZXRUaW1lb3V0IiwiZm9jdXMiLCJhZGRQcm9qZWN0VG9TaWRlYmFyIiwiaW5wdXRGb3JtIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJwcm9qZWN0TGlzdCIsImNoaWxkRWxlbWVudENvdW50IiwiZ2V0QXR0cmlidXRlIiwicHJldmVudERlZmF1bHQiLCJhZGRUYXNrIiwiaW5wdXRGaWVsZCIsInZhbGlkYXRlVXNlcklucHV0IiwiY3JlYXRlVGFzayIsInRhc2tUZXh0U3BhbiIsInByZXBlbmQiLCJ3aW5kb3ciLCJvbmxvYWQiLCJtb2JpbGVUb2dnbGVCdG4iLCJnZXRFbGVtZW50QnlJZCIsInNpZGViYXIiLCJpbm5lcldpZHRoIiwidG9nZ2xlIiwidG9nZ2xlU2lkZWJhciIsImJ1dHRvbiIsImhvbWVUYWIiLCJ0b2RheVRhYiIsInRoaXNXZWVrVGFiIiwiY29uZmlybSIsImVsZW1lbnQiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwidXBkYXRlTmFtZU9uTm90ZXBhZCIsInByb2plY3RUYXNrc0NvbnRhaW5lciIsImVkaXRQcm9qZWN0IiwidGFza0VsZW1lbnQiLCJ0b2dnbGVUYXNrIiwidGFza0xpc3RFbGVtZW50IiwidGFza1NwYW4iLCJjb250YWluZXIiLCJudW1iZXJPZlRhc2tzIiwiYWRkVGFza1RvRE9NIiwiZXZlbnRUYXJnZXQiLCJwcmlvcml0eUNsYXNzTGlzdCIsInVwZGF0ZVByaW9yaXR5IiwidGFza05hbWUiLCJlZGl0VGFzayJdLCJzb3VyY2VSb290IjoiIn0=