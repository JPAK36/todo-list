(()=>{"use strict";var e={d:(t,n)=>{for(var c in n)e.o(n,c)&&!e.o(t,c)&&Object.defineProperty(t,c,{enumerable:!0,get:n[c]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{qm:()=>s,M_:()=>a,Sx:()=>r,wc:()=>l,QW:()=>i});const n=(()=>{const e=()=>JSON.parse(localStorage.getItem("projects")||"[]");return{getProjects:e,saveProject:t=>{const n=e(),c=n.find((e=>e.id==t.id));c?(c.projectName=t.projectName,c.tasks=t.tasks,c.dueDate=t.dueDate,c.priority=t.priority):(t.id=Math.floor(1e6*Math.random()),n.push(t)),localStorage.setItem("projects",JSON.stringify(n))},deleteProject:t=>{const n=e().filter((e=>e.id!=t));localStorage.setItem("projects",JSON.stringify(n))}}})(),c={onProjectSelect:e=>{const t=n.getProjects().find((t=>t.id==e));l(t)},onProjectAdd:e=>{const t={projectName:e};var c;n.saveProject(t),c=n.getProjects(),i(c)}},r=()=>({createListElement:e=>{const t=document.createElement("li");return t.setAttribute("class",e),t},createSpanElement:e=>{const t=document.createElement("span");return t.classList.add(e),t},createImageElement:(e,t)=>{const n=document.createElement("img");return n.classList.add(t),n.setAttribute("src",e),n.setAttribute("draggable","false"),n},createInputField:e=>{const t=document.createElement("input");return t.setAttribute("type","text"),t.setAttribute("placeholder",e),t.setAttribute("id","user-input"),t.required=!0,t},createForm:()=>document.createElement("form"),createDiv:e=>{const t=document.createElement("div");return t.setAttribute("class",e),t}}),o=()=>{const e=r(),t=e.createSpanElement("icons"),n=e.createImageElement("images/edit-icon.svg","edit-icon"),c=e.createImageElement("images/delete-icon.svg","delete-icon");return n.classList.add("edit-project"),c.classList.add("delete-project"),t.append(n,c),t},a=()=>{const e=r(),t=document.querySelector(".project-list"),n=e.createListElement("project-item"),c=e.createForm(),a=e.createInputField("Project name...");c.append(a);const s=o();n.append(c,s),t.insertBefore(n,t.lastElementChild)},s=()=>{const e=r(),t=document.querySelector(".project-list"),n=t.childElementCount-2,c=t.children[n].textContent,o=document.querySelector("#writing-area"),a=e.createDiv("project"),s=e.createDiv("skip-line"),d=e.createDiv("project-heading"),i=document.createElement("h2");i.setAttribute("class","notepad-text"),i.textContent=c;const l=document.createElement("h3");l.setAttribute("class","notepad-text"),l.textContent="Due Date";const m=document.createElement("ul");m.classList.add("notepad-text","todos");const u=e.createListElement("task"),p=e.createSpanElement("add-task"),g=e.createImageElement("images/add-icon.svg","add-icon");p.append(g,"Add Task"),u.append(p),m.append(u,s),d.append(i,l),a.append(d,m),o.append(a)},d=(e,t)=>{const n=r(),c=n.createListElement("project-item");c.setAttribute("data-project-id",e);const a=n.createSpanElement("project-name");a.textContent=t;const s=o();return c.append(a,s),c},i=e=>{const t=document.querySelector(".project-list"),n=document.querySelector("[data-add-project]");[].slice.call(t.children).forEach((e=>{e.classList.contains("project-item")&&e.remove()}));for(const c of e){const e=d(c.id,c.projectName);t.insertBefore(e,n)}t.querySelectorAll(".project-item").forEach((e=>{e.addEventListener("click",(()=>{c.onProjectSelect(e.dataset.projectId)}))}))},l=e=>{document.querySelector(".active").classList.remove("active");const t=document.querySelector(`[data-project-id='${e.id}']`);t.classList.add("active");const n=t.children.item(0);console.log(n)},m=()=>null!=document.querySelector("#user-input"),u=()=>{const e=document.querySelector("#user-input"),t=e.parentElement.parentElement,n=r().createSpanElement("project-name"),c=e.value.trim();c&&(n.textContent=c,e.parentElement.remove(),t.insertBefore(n,t.childNodes[0]))},p=()=>{if(m())return;a();const e=document.querySelector("#user-input"),t=e.parentElement,n=t.parentElement;e.addEventListener("blur",(function(){""!=e.value&&u(),m()||s();const t=n.firstElementChild.textContent;c.onProjectAdd(t)})),t.addEventListener("submit",(function(e){e.preventDefault(),u(),m()||s();const t=n.firstElementChild.textContent;c.onProjectAdd(t)}))};window.onload=()=>{const e=n.getProjects();i(e)},(()=>{const e=document.getElementById("bars-icon-mobile");screen.width<=1024&&e.classList.contains("hidden")&&e.classList.toggle("hidden");const t=document.getElementById("sidebar"),n=()=>{t.classList.toggle("toggle-sidebar"),screen.width<=1024&&e.classList.toggle("hidden")};document.querySelectorAll(".bars-icon").forEach((e=>{e.addEventListener("click",n)}))})(),document.addEventListener("click",(e=>{e.target.closest(".delete-project")&&e.target.closest(".project-item").remove()})),document.querySelector("[data-add-project]").addEventListener("click",p),document.addEventListener("click",(e=>{e.target.classList.contains("edit-project")&&(e=>{if(m())return;const t=r().createForm(),n=r().createInputField("Project name..."),c=e.target.parentElement.previousElementSibling;n.value=c.textContent,c.remove(),t.append(n);const o=e.target.closest(".project-item");o.insertBefore(t,o.childNodes[0]);const a=document.querySelector("#user-input");a.addEventListener("blur",(function(){""!=a.value&&u()})),t.addEventListener("submit",(function(e){e.preventDefault(),u()}))})(e)})),document.addEventListener("click",(e=>{e.target.classList.contains("task-item")&&e.target.parentElement.classList.toggle("completed")})),document.addEventListener("click",(e=>{e.target.classList.contains("add-task")&&(console.log("add task"),(()=>{const e=t.default.createSpanElement("task-item");e.textContent="user input";const n=t.default.createSpanElement("icons"),c=t.default.createImageElement("images/edit-icon.svg","edit-icon"),r=t.default.createImageElement("images/delete-icon.svg","delete-icon");n.append(c,r),e.append(n)})())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LDZCQUFrQyx5QkFBMEIsZUFFL0VGLEVBQVNHLE9BQU9GLEVBQVVDLEdBQzFCc0UsRUFBU3JFLE9BQU9ILElEaUNSeUUsUSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b2RvLWxpc3Qvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3RvZG8tbGlzdC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9zdG9yYWdlLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9oYW5kbGVycy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvY3JlYXRlRE9NRWxlbWVudHMuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3RzLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdGFza3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJcbmNvbnN0IHVwZGF0ZVN0b3JhZ2UgPSAoKSA9PiB7XG4gICAgXG4gICAgY29uc3QgZ2V0UHJvamVjdHMgPSAoKSA9PiB7XG4gICAgICAgIC8vIGNyZWF0ZXMgYW4gYXJyYXkgb2Ygb2JqZWN0cyBcbiAgICAgICAgY29uc3QgcHJvamVjdHMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwcm9qZWN0cycpIHx8ICdbXScpO1xuICAgICAgICByZXR1cm4gcHJvamVjdHM7XG4gICAgfVxuXG4gICAgY29uc3Qgc2F2ZVByb2plY3QgPSAocHJvamVjdFRvU2F2ZSkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IGdldFByb2plY3RzKCk7XG5cbiAgICAgICAgLy8gZmluZCBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3Qgb2JqZWN0IHRoYXQgbWF0Y2hlcyB0aGUgaWRcbiAgICAgICAgY29uc3QgZXhpc3RpbmcgPSBwcm9qZWN0cy5maW5kKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PSBwcm9qZWN0VG9TYXZlLmlkKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgZXhpc3RpbmcucHJvamVjdE5hbWUgPSBwcm9qZWN0VG9TYXZlLnByb2plY3ROYW1lO1xuICAgICAgICAgICAgZXhpc3RpbmcudGFza3MgPSBwcm9qZWN0VG9TYXZlLnRhc2tzO1xuICAgICAgICAgICAgZXhpc3RpbmcuZHVlRGF0ZSA9IHByb2plY3RUb1NhdmUuZHVlRGF0ZTtcbiAgICAgICAgICAgIGV4aXN0aW5nLnByaW9yaXR5ID0gcHJvamVjdFRvU2F2ZS5wcmlvcml0eTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHByb2plY3RUb1NhdmUuaWQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKTtcbiAgICAgICAgICAgIC8vIEFkZCBwcm9qZWN0TmFtZVxuICAgICAgICAgICAgLy8gQWRkIFRhc2tzIGFycmF5IGNvbnRhaW5pbmcgYW5vdGhlciBhcnJheSB3aGljaCBpbmNsdWRlcyB0YXNrLCBwcmlvcml0eSwgZHVlRGF0ZSwgYW5kIHRydWUvZmFsc2UgZm9yIGNvbXBsZXRlZCBvciBub3RcbiAgICAgICAgICAgIHByb2plY3RzLnB1c2gocHJvamVjdFRvU2F2ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgncHJvamVjdHMnLCBKU09OLnN0cmluZ2lmeShwcm9qZWN0cykpO1xuICAgIH1cblxuICAgY29uc3QgZGVsZXRlUHJvamVjdCA9IChpZCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IGdldFByb2plY3RzKCk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRQcm9qZWN0TGlzdCA9IHByb2plY3RzLmZpbHRlcihwcm9qZWN0ID0+IHByb2plY3QuaWQgIT0gaWQpO1xuXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdwcm9qZWN0cycsIEpTT04uc3RyaW5naWZ5KHVwZGF0ZWRQcm9qZWN0TGlzdCkpO1xuICAgfVxuXG4gICAgcmV0dXJuIHsgZ2V0UHJvamVjdHMsIHNhdmVQcm9qZWN0LCBkZWxldGVQcm9qZWN0IH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgdXBkYXRlU3RvcmFnZSgpOyIsImltcG9ydCB7IHVwZGF0ZVByb2plY3RMaXN0LCB1cGRhdGVBY3RpdmVUYWIgfSBmcm9tIFwiLi9jcmVhdGVET01FbGVtZW50c1wiO1xuaW1wb3J0IHVwZGF0ZVN0b3JhZ2UgZnJvbSBcIi4vc3RvcmFnZVwiO1xuXG5jb25zdCBoYW5kbGVycyA9ICgpID0+IHtcbiAgICBcbiAgICBjb25zdCBfcmVmcmVzaFByb2plY3RMaXN0ID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBwcm9qZWN0cyA9IHVwZGF0ZVN0b3JhZ2UuZ2V0UHJvamVjdHMoKTsgLy8gVXBkYXRlIHByb2plY3RzIGluIHN0b3JhZ2VcbiAgICAgICAgX3NldFByb2plY3RMaXN0KHByb2plY3RzKTsgLy8gVXBkYXRlIHByb2plY3RzIG9uIERPTVxuICAgICAgICAvL19zZXRBY3RpdmVUYWIodGFiKVxuICAgIH1cblxuICAgIGNvbnN0IF9zZXRQcm9qZWN0TGlzdCA9IChwcm9qZWN0cykgPT4ge1xuICAgICAgICB1cGRhdGVQcm9qZWN0TGlzdChwcm9qZWN0cyk7IC8vIFRPRE86IGNyZWF0ZSB1cGRhdGVQcm9qZWN0TGlzdCBmdW5jdGlvblxuICAgIH1cblxuICAgIGNvbnN0IF9zZXRBY3RpdmVUYWIgPSAodGFiKSA9PiB7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVRhYiA9IHRhYjtcbiAgICAgICAgdXBkYXRlQWN0aXZlVGFiKHRhYikgLy8gVE9ETzogY3JlYXRlIHVwZGF0ZUFjdGl2ZVRhYiBmdW5jdGlvblxuICAgIH1cblxuICAgIC8vIEhlcmUgYmUgaGFuZGxlcnNcbiAgICBjb25zdCBvblByb2plY3RTZWxlY3QgPSAocHJvamVjdElkKSA9PiB7XG4gICAgICAgIGNvbnN0IHByb2plY3RzID0gdXBkYXRlU3RvcmFnZS5nZXRQcm9qZWN0cygpO1xuICAgICAgICBjb25zdCBzZWxlY3RlZFByb2plY3QgPSBwcm9qZWN0cy5maW5kKHByb2plY3QgPT4gcHJvamVjdC5pZCA9PSBwcm9qZWN0SWQpOyAvLyBEb24ndCB0aGluayBpdCB3aWxsIGtub3cgd2hhdCBwcm9qZWN0cyBpcywgbWlnaHQgaGF2ZSB0byBkZWNsYXJlIHZhcmlhYmxlXG4gICAgICAgIC8vY29uc29sZS5sb2coc2VsZWN0ZWRQcm9qZWN0KTtcbiAgICAgICAgX3NldEFjdGl2ZVRhYihzZWxlY3RlZFByb2plY3QpO1xuICAgIH1cblxuICAgIGNvbnN0IG9uUHJvamVjdEFkZCA9IChwcm9qZWN0TmFtZSkgPT4ge1xuICAgICAgICAvLyBwYXNzIHVzZXIgaW5wdXQgaW50byBmdW5jdGlvblxuICAgICAgICBjb25zdCBuZXdQcm9qZWN0ID0gIHtcbiAgICAgICAgICAgIHByb2plY3ROYW1lOiBwcm9qZWN0TmFtZVxuICAgICAgICB9XG4gICAgICAgIHVwZGF0ZVN0b3JhZ2Uuc2F2ZVByb2plY3QobmV3UHJvamVjdCk7XG4gICAgICAgIC8vIGFkZCBpbnB1dCB0byBwYWdlXG4gICAgICAgIF9yZWZyZXNoUHJvamVjdExpc3QoKTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBvblByb2plY3RTZWxlY3QsIG9uUHJvamVjdEFkZCwgfVxuICAgIFxufVxuXG5leHBvcnQgZGVmYXVsdCBoYW5kbGVycygpOyIsImltcG9ydCBoYW5kbGVycyBmcm9tIFwiLi9oYW5kbGVyc1wiXG5cbi8vIERPTSBFbGVtZW50cyBGYWN0b3J5IEZ1bmN0aW9uXG5jb25zdCBjcmVhdGVFbGVtZW50cyA9ICgpID0+IHtcbiAgICBcbiAgICBjb25zdCBjcmVhdGVMaXN0RWxlbWVudCA9IChodG1sQ2xhc3MpID0+IHtcbiAgICAgICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICBsaS5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgaHRtbENsYXNzKTtcbiAgICAgICAgcmV0dXJuIGxpO1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZVNwYW5FbGVtZW50ID0gKGh0bWxDbGFzcykgPT4ge1xuICAgICAgICBjb25zdCBzcGFuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICBzcGFuLmNsYXNzTGlzdC5hZGQoaHRtbENsYXNzKTtcbiAgICAgICAgcmV0dXJuIHNwYW47XG4gICAgfVxuXG4gICAgY29uc3QgY3JlYXRlSW1hZ2VFbGVtZW50ID0gKHNyYywgaHRtbENsYXNzKSA9PiB7XG4gICAgICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICBpbWcuY2xhc3NMaXN0LmFkZChodG1sQ2xhc3MpO1xuICAgICAgICBpbWcuc2V0QXR0cmlidXRlKCdzcmMnLCBzcmMpO1xuICAgICAgICBpbWcuc2V0QXR0cmlidXRlKCdkcmFnZ2FibGUnLCAnZmFsc2UnKTtcbiAgICAgICAgcmV0dXJuIGltZztcbiAgICB9XG4gICAgXG4gICAgY29uc3QgY3JlYXRlRm9ybSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgaW5wdXRGb3JtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZm9ybScpO1xuICAgICAgICByZXR1cm4gaW5wdXRGb3JtO1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZUlucHV0RmllbGQgPSAocGxhY2Vob2xkZXJUZXh0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVzZXJJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIHVzZXJJbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICAgICAgICB1c2VySW5wdXQuc2V0QXR0cmlidXRlKCdwbGFjZWhvbGRlcicsIHBsYWNlaG9sZGVyVGV4dCk7XG4gICAgICAgIHVzZXJJbnB1dC5zZXRBdHRyaWJ1dGUoJ2lkJywgJ3VzZXItaW5wdXQnKTtcbiAgICAgICAgdXNlcklucHV0LnJlcXVpcmVkID0gdHJ1ZTtcblxuICAgICAgICByZXR1cm4gdXNlcklucHV0O1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZURpdiA9IChodG1sQ2xhc3MpID0+IHtcbiAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRpdi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgaHRtbENsYXNzKTtcbiAgICAgICAgcmV0dXJuIGRpdjtcbiAgICB9XG5cbiAgICByZXR1cm4ge2NyZWF0ZUxpc3RFbGVtZW50LCBjcmVhdGVTcGFuRWxlbWVudCwgY3JlYXRlSW1hZ2VFbGVtZW50LCBjcmVhdGVJbnB1dEZpZWxkLCBjcmVhdGVGb3JtLCBjcmVhdGVEaXZ9XG59XG5cbmNvbnN0IGNyZWF0ZUljb25TcGFuID0gKCkgPT4ge1xuICAgIGNvbnN0IHZpZXcgPSBjcmVhdGVFbGVtZW50cygpO1xuXG4gICAgY29uc3QgaWNvblNwYW4gPSB2aWV3LmNyZWF0ZVNwYW5FbGVtZW50KCdpY29ucycpO1xuICAgIGNvbnN0IGVkaXRJY29uID0gdmlldy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9lZGl0LWljb24uc3ZnJywgJ2VkaXQtaWNvbicpO1xuICAgIGNvbnN0IGRlbGV0ZUljb24gPSB2aWV3LmNyZWF0ZUltYWdlRWxlbWVudCgnaW1hZ2VzL2RlbGV0ZS1pY29uLnN2ZycsICdkZWxldGUtaWNvbicpO1xuICAgIFxuICAgIGVkaXRJY29uLmNsYXNzTGlzdC5hZGQoJ2VkaXQtcHJvamVjdCcpO1xuICAgIGRlbGV0ZUljb24uY2xhc3NMaXN0LmFkZCgnZGVsZXRlLXByb2plY3QnKTtcbiAgICBcbiAgICBpY29uU3Bhbi5hcHBlbmQoZWRpdEljb24sIGRlbGV0ZUljb24pO1xuICAgIFxuICAgIHJldHVybiBpY29uU3Bhbjtcbn1cblxuY29uc3QgYWRkUHJvamVjdFRvU2lkZWJhciA9ICgpID0+IHtcbiAgICBjb25zdCB2aWV3ID0gY3JlYXRlRWxlbWVudHMoKTtcbiAgICBjb25zdCBwcm9qZWN0c0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9qZWN0LWxpc3QnKTtcblxuICAgIGNvbnN0IHByb2plY3RMaXN0RWxlbWVudCA9ICB2aWV3LmNyZWF0ZUxpc3RFbGVtZW50KCdwcm9qZWN0LWl0ZW0nKTtcbiAgICBcbiAgICBjb25zdCBwcm9qZWN0SW5wdXRGb3JtID0gdmlldy5jcmVhdGVGb3JtKCk7XG4gICAgY29uc3QgcHJvamVjdE5hbWVJbnB1dCA9IHZpZXcuY3JlYXRlSW5wdXRGaWVsZCgnUHJvamVjdCBuYW1lLi4uJyk7XG4gICAgcHJvamVjdElucHV0Rm9ybS5hcHBlbmQocHJvamVjdE5hbWVJbnB1dCk7XG5cbiAgICBjb25zdCBpY29uU3BhbiA9IGNyZWF0ZUljb25TcGFuKCk7XG4gICAgcHJvamVjdExpc3RFbGVtZW50LmFwcGVuZChwcm9qZWN0SW5wdXRGb3JtLCBpY29uU3Bhbik7XG4gICAgcHJvamVjdHNDb250YWluZXIuaW5zZXJ0QmVmb3JlKHByb2plY3RMaXN0RWxlbWVudCwgcHJvamVjdHNDb250YWluZXIubGFzdEVsZW1lbnRDaGlsZCk7XG59XG5cbmNvbnN0IGFkZFByb2plY3RUb05vdGVwYWQgPSAoKSA9PiB7XG4gICAgY29uc3QgdmlldyA9IGNyZWF0ZUVsZW1lbnRzKCk7XG4gICAgY29uc3QgcHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1saXN0Jyk7XG4gICAgY29uc3QgY3VycmVudFByb2plY3ROdW1iZXIgPSBwcm9qZWN0TGlzdC5jaGlsZEVsZW1lbnRDb3VudCAtIDI7XG4gICAgY29uc3QgcHJvamVjdE5hbWUgPSBwcm9qZWN0TGlzdC5jaGlsZHJlbltjdXJyZW50UHJvamVjdE51bWJlcl0udGV4dENvbnRlbnQ7XG5cbiAgICBjb25zdCBub3RlcGFkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3dyaXRpbmctYXJlYScpO1xuICAgIGNvbnN0IHByb2plY3REaXYgPSB2aWV3LmNyZWF0ZURpdigncHJvamVjdCcpO1xuICAgIGNvbnN0IHNraXBMaW5lID0gdmlldy5jcmVhdGVEaXYoJ3NraXAtbGluZScpO1xuICAgIFxuICAgIGNvbnN0IHByb2plY3RIZWFkaW5nID0gdmlldy5jcmVhdGVEaXYoJ3Byb2plY3QtaGVhZGluZycpO1xuICAgIGNvbnN0IGgyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaDInKTtcbiAgICBoMi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ25vdGVwYWQtdGV4dCcpO1xuICAgIGgyLnRleHRDb250ZW50ID0gcHJvamVjdE5hbWU7XG4gICAgY29uc3QgaDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICAgIGgzLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnbm90ZXBhZC10ZXh0Jyk7XG4gICAgaDMudGV4dENvbnRlbnQgPSAnRHVlIERhdGUnO1xuICAgICAgICBcbiAgICBjb25zdCB0YXNrc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgdGFza3NDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnbm90ZXBhZC10ZXh0JywgJ3RvZG9zJyk7XG5cbiAgICBjb25zdCBhZGRUYXNrTGlzdEVsZW1lbnQgPSB2aWV3LmNyZWF0ZUxpc3RFbGVtZW50KCd0YXNrJyk7XG4gICAgY29uc3QgYWRkVGFza1NwYW4gPSB2aWV3LmNyZWF0ZVNwYW5FbGVtZW50KCdhZGQtdGFzaycpO1xuICAgIGNvbnN0IGFkZEljb24gPSB2aWV3LmNyZWF0ZUltYWdlRWxlbWVudCgnaW1hZ2VzL2FkZC1pY29uLnN2ZycsICdhZGQtaWNvbicpO1xuICAgIGFkZFRhc2tTcGFuLmFwcGVuZChhZGRJY29uLCAnQWRkIFRhc2snKTtcblxuICAgIGFkZFRhc2tMaXN0RWxlbWVudC5hcHBlbmQoYWRkVGFza1NwYW4pO1xuICAgIHRhc2tzQ29udGFpbmVyLmFwcGVuZChhZGRUYXNrTGlzdEVsZW1lbnQsIHNraXBMaW5lKTtcbiAgICBwcm9qZWN0SGVhZGluZy5hcHBlbmQoaDIsIGgzKTtcbiAgICBwcm9qZWN0RGl2LmFwcGVuZChwcm9qZWN0SGVhZGluZywgdGFza3NDb250YWluZXIpO1xuICAgIG5vdGVwYWQuYXBwZW5kKHByb2plY3REaXYpO1xufVxuXG5jb25zdCBfY3JlYXRlUHJvamVjdEl0ZW1IVE1MID0gKGlkLCBuYW1lKSA9PiB7XG4gICAgLy8gY3JlYXRlcyBIVE1MIGZvciBwcm9qZWN0IGl0ZW1zIGluIHNpZGViYXIgZnJvbSBsb2NhbFN0b3JhZ2UgaXRlbVxuICAgIGNvbnN0IHZpZXcgPSBjcmVhdGVFbGVtZW50cygpO1xuXG4gICAgY29uc3QgcHJvamVjdEl0ZW0gPSB2aWV3LmNyZWF0ZUxpc3RFbGVtZW50KCdwcm9qZWN0LWl0ZW0nKTtcbiAgICBwcm9qZWN0SXRlbS5zZXRBdHRyaWJ1dGUoJ2RhdGEtcHJvamVjdC1pZCcsIGlkKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IHZpZXcuY3JlYXRlU3BhbkVsZW1lbnQoJ3Byb2plY3QtbmFtZScpO1xuICAgIHByb2plY3ROYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICBjb25zdCBpY29uU3BhbiA9IGNyZWF0ZUljb25TcGFuKCk7XG5cbiAgICBwcm9qZWN0SXRlbS5hcHBlbmQocHJvamVjdE5hbWUsIGljb25TcGFuKTtcblxuICAgIHJldHVybiBwcm9qZWN0SXRlbTtcbn1cblxuY29uc3QgdXBkYXRlUHJvamVjdExpc3QgPSAocHJvamVjdHMpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0c0xpc3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvamVjdC1saXN0Jyk7XG4gICAgY29uc3QgYWRkUHJvamVjdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWFkZC1wcm9qZWN0XScpO1xuICAgIFxuICAgIC8vIENsZWFyIGFsbCBlbGVtZW50cyBvZiBjbGFzcyAnLnByb2plY3QtaXRlbSdcbiAgICBjb25zdCBwcm9qZWN0c0FycmF5ID0gW10uc2xpY2UuY2FsbChwcm9qZWN0c0xpc3RDb250YWluZXIuY2hpbGRyZW4pO1xuICAgIHByb2plY3RzQXJyYXkuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgICAgaWYgKGl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdwcm9qZWN0LWl0ZW0nKSkgaXRlbS5yZW1vdmUoKTtcbiAgICB9KTtcblxuICAgIGZvciAoY29uc3QgcHJvamVjdCBvZiBwcm9qZWN0cykge1xuICAgICAgICBjb25zdCBodG1sID0gX2NyZWF0ZVByb2plY3RJdGVtSFRNTChwcm9qZWN0LmlkLCBwcm9qZWN0LnByb2plY3ROYW1lKTtcbiAgICAgICAgcHJvamVjdHNMaXN0Q29udGFpbmVyLmluc2VydEJlZm9yZShodG1sLCBhZGRQcm9qZWN0QnRuKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgbGlzdGVuZXJzIGZvciBlZGl0LCBkZWxldGUgPz8/P1xuICAgIHByb2plY3RzTGlzdENvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcucHJvamVjdC1pdGVtJykuZm9yRWFjaChwcm9qZWN0SXRlbSA9PiB7XG4gICAgICAgIHByb2plY3RJdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICAgICAgaGFuZGxlcnMub25Qcm9qZWN0U2VsZWN0KHByb2plY3RJdGVtLmRhdGFzZXQucHJvamVjdElkKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5cbmNvbnN0IHVwZGF0ZUFjdGl2ZVRhYiA9IChwcm9qZWN0T2JqZWN0KSA9PiB7XG4gICAgLy8gZm9yIGFsbCBvdGhlciBwcm9qZWN0cywgY2hhbmdlIGRpc3BsYXkgdG8gbm9uZSwgdG8gYnJpbmcgYmFjayBzZXQgZGlzcGxheSB0byBjb250ZW50cyAgXG4gICAgICAgIC8vIGl0ZW0uc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIC8vIHJlbW92ZSBhY3RpdmUgY2xhc3MgZnJvbSBhbnkgb3RoZXIgc2lkZWJhciBlbGVtZW50XG4gICAgY29uc3QgY3VycmVudEFjdGl2ZVRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hY3RpdmUnKTtcbiAgICBjdXJyZW50QWN0aXZlVGFiLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgIGNvbnN0IHByb2plY3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1wcm9qZWN0LWlkPScke3Byb2plY3RPYmplY3QuaWR9J11gKTtcbiAgICBwcm9qZWN0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgIGNvbnN0IHByb2plY3ROYW1lU3BhbiA9IHByb2plY3QuY2hpbGRyZW4uaXRlbSgwKTtcbiAgICBjb25zb2xlLmxvZyhwcm9qZWN0TmFtZVNwYW4pO1xufVxuXG5leHBvcnQgeyBhZGRQcm9qZWN0VG9TaWRlYmFyLCBhZGRQcm9qZWN0VG9Ob3RlcGFkLCBjcmVhdGVFbGVtZW50cywgdXBkYXRlUHJvamVjdExpc3QsIHVwZGF0ZUFjdGl2ZVRhYn07IiwiaW1wb3J0IHsgYWRkUHJvamVjdFRvU2lkZWJhciwgYWRkUHJvamVjdFRvTm90ZXBhZCwgY3JlYXRlRWxlbWVudHMgfSBmcm9tIFwiLi9jcmVhdGVET01FbGVtZW50c1wiO1xuaW1wb3J0IGhhbmRsZXJzIGZyb20gXCIuL2hhbmRsZXJzXCI7XG5cbmNvbnN0IGF3YWl0aW5nSW5wdXQgPSAoKSA9PiB7XG4gICAgY29uc3QgdXNlcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXItaW5wdXQnKTtcbiAgICBpZiAodXNlcklucHV0ICE9IG51bGwpIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5jb25zdCBoYW5kbGVVc2VySW5wdXQgPSAoKSA9PiB7IFxuICAgIC8vIFRoaXMgaXMgRE9NIFN0dWZmXG4gICAgY29uc3QgdXNlcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXItaW5wdXQnKVxuICAgIGNvbnN0IGlucHV0Rm9ybSA9IHVzZXJJbnB1dC5wYXJlbnRFbGVtZW50O1xuICAgIGNvbnN0IHByb2plY3RJdGVtID0gaW5wdXRGb3JtLnBhcmVudEVsZW1lbnQ7XG4gICAgY29uc3QgcHJvamVjdFNwYW4gPSBjcmVhdGVFbGVtZW50cygpLmNyZWF0ZVNwYW5FbGVtZW50KCdwcm9qZWN0LW5hbWUnKTtcbiAgICBcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IHVzZXJJbnB1dC52YWx1ZS50cmltKClcbiAgICBpZiAoIXByb2plY3ROYW1lKSByZXR1cm47XG5cbiAgICBwcm9qZWN0U3Bhbi50ZXh0Q29udGVudCA9IHByb2plY3ROYW1lO1xuICAgIHVzZXJJbnB1dC5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xuICAgIHByb2plY3RJdGVtLmluc2VydEJlZm9yZShwcm9qZWN0U3BhbiwgcHJvamVjdEl0ZW0uY2hpbGROb2Rlc1swXSk7IFxufVxuXG5jb25zdCBhZGRQcm9qZWN0ID0gKCkgPT4ge1xuICAgIGlmIChhd2FpdGluZ0lucHV0KCkpIHJldHVybjtcbiAgICBhZGRQcm9qZWN0VG9TaWRlYmFyKCk7XG4gICAgXG4gICAgY29uc3QgdXNlcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3VzZXItaW5wdXQnKVxuICAgIGNvbnN0IGlucHV0Rm9ybSA9IHVzZXJJbnB1dC5wYXJlbnRFbGVtZW50O1xuICAgIGNvbnN0IHByb2plY3RJdGVtID0gaW5wdXRGb3JtLnBhcmVudEVsZW1lbnQ7XG5cbiAgICB1c2VySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHVzZXJJbnB1dC52YWx1ZSAhPSAnJykgaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgIGlmICghYXdhaXRpbmdJbnB1dCgpKSBhZGRQcm9qZWN0VG9Ob3RlcGFkKCk7XG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvamVjdEl0ZW0uZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgIGhhbmRsZXJzLm9uUHJvamVjdEFkZChwcm9qZWN0TmFtZSk7IFxuICAgIH0pO1xuXG4gICAgaW5wdXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgIGlmICghYXdhaXRpbmdJbnB1dCgpKSBhZGRQcm9qZWN0VG9Ob3RlcGFkKCk7XG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gcHJvamVjdEl0ZW0uZmlyc3RFbGVtZW50Q2hpbGQudGV4dENvbnRlbnQ7XG4gICAgICAgIGhhbmRsZXJzLm9uUHJvamVjdEFkZChwcm9qZWN0TmFtZSk7IFxuICAgIH0pO1xufVxuLy8gVE9ETzogTG9vayBpbnRvIGhvdyB0byBhZGQgbG9jYWwgc3RvcmFnZSB0byBwb3NzaWJseSBtYWtlIGVkaXRpbmcgYW5kIGRlbGV0aW5nIGVhc2llci4gT3IgcmVmZXJlbmNlIGxpYnJhcnkgcHJvamVjdCBmb3IgaXRzIHVzZSBvZiBhcnJheXMgdG8gc3RvcmUgdXNlciBkYXRhXG4vLyBUT0RPOiBBZGQgZnVuY3Rpb24gdG8gZGVsZXRlIHByb2plY3QgZnJvbSBub3RlcGFkIGFzIHdlbGxcbmNvbnN0IGRlbGV0ZVByb2plY3QgPSAoKSA9PiB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xvc2VzdCgnLmRlbGV0ZS1wcm9qZWN0JykpIHtcbiAgICAgICAgICAgIGUudGFyZ2V0LmNsb3Nlc3QoJy5wcm9qZWN0LWl0ZW0nKS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuLy8gVE9ETzogY3JlYXRlIGZ1bmN0aW9uIHRvIHVwZGF0ZSBwcm9qZWN0IG5hbWUgb24gbm90ZXBhZCB3aGVuIHVzZXIgZWRpdHMgaXRcbiBcbmNvbnN0IGVkaXRQcm9qZWN0ID0gKGUpID0+IHtcbiAgICBpZiAoYXdhaXRpbmdJbnB1dCgpKSByZXR1cm47XG4gICAgXG4gICAgLy8gVGhpcyBpcyBET00gU3R1ZmZcbiAgICBjb25zdCBpbnB1dEZvcm0gPSBjcmVhdGVFbGVtZW50cygpLmNyZWF0ZUZvcm0oKTtcbiAgICBjb25zdCBpbnB1dEZpZWxkID0gY3JlYXRlRWxlbWVudHMoKS5jcmVhdGVJbnB1dEZpZWxkKCdQcm9qZWN0IG5hbWUuLi4nKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgIGlucHV0RmllbGQudmFsdWUgPSBwcm9qZWN0TmFtZS50ZXh0Q29udGVudDtcbiAgICBwcm9qZWN0TmFtZS5yZW1vdmUoKTtcbiAgICBpbnB1dEZvcm0uYXBwZW5kKGlucHV0RmllbGQpO1xuXG4gICAgY29uc3QgcHJvamVjdEl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCcucHJvamVjdC1pdGVtJyk7XG4gICAgcHJvamVjdEl0ZW0uaW5zZXJ0QmVmb3JlKGlucHV0Rm9ybSwgcHJvamVjdEl0ZW0uY2hpbGROb2Rlc1swXSk7XG5cbiAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1pbnB1dCcpO1xuXG4gICAgdXNlcklucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh1c2VySW5wdXQudmFsdWUgIT0gJycpIGhhbmRsZVVzZXJJbnB1dCgpO1xuICAgICAgICAvL2lmICghYXdhaXRpbmdJbnB1dCgpKSBlZGl0UHJvamVjdFRvTm90ZXBhZCgpO1xuICAgIH0pO1xuXG4gICAgaW5wdXRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgaGFuZGxlVXNlcklucHV0KCk7XG4gICAgICAgIC8vaWYgKCFhd2FpdGluZ0lucHV0KCkpIGVkaXRQcm9qZWN0T25Ob3RlcGFkKCk7XG4gICAgfSk7XG59XG5cbmV4cG9ydCB7IFxuICAgIGFkZFByb2plY3QsXG4gICAgZGVsZXRlUHJvamVjdCxcbiAgICBlZGl0UHJvamVjdFxufSIsImltcG9ydCB7IGFkZFByb2plY3QsIGRlbGV0ZVByb2plY3QsIGVkaXRQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcbmltcG9ydCB1cGRhdGVTdG9yYWdlIGZyb20gXCIuL3N0b3JhZ2VcIjtcbmltcG9ydCB7IHVwZGF0ZVByb2plY3RMaXN0IH0gZnJvbSBcIi4vY3JlYXRlRE9NRWxlbWVudHNcIjtcbmltcG9ydCB7IHRvZ2dsZVRhc2ssIGFkZFRhc2tUb0RPTSB9IGZyb20gXCIuL3Rhc2tzXCI7XG5cbi8vIExvYWQgbG9jYWxTdG9yYWdlIGl0ZW1zIG9uIHBhZ2UgbG9hZFxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcbiAgICBjb25zdCBwcm9qZWN0cyA9IHVwZGF0ZVN0b3JhZ2UuZ2V0UHJvamVjdHMoKTtcbiAgICB1cGRhdGVQcm9qZWN0TGlzdChwcm9qZWN0cyk7XG59XG5cbi8vIFNpZGViYXIgTW9kdWxlXG5jb25zdCBzaWRlYmFyQ29udHJvbGxlciA9ICgoKSA9PiB7XG5cbiAgICBjb25zdCBtb2JpbGVUb2dnbGVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmFycy1pY29uLW1vYmlsZScpO1xuICAgIGlmIChzY3JlZW4ud2lkdGggPD0gMTAyNCAmJiBtb2JpbGVUb2dnbGVCdG4uY2xhc3NMaXN0LmNvbnRhaW5zKCdoaWRkZW4nKSkge1xuICAgICAgICBtb2JpbGVUb2dnbGVCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzaWRlYmFyJyk7XG4gICAgXG4gICAgY29uc3QgdG9nZ2xlU2lkZWJhciA9ICgpID0+IHtcbiAgICAgICAgc2lkZWJhci5jbGFzc0xpc3QudG9nZ2xlKCd0b2dnbGUtc2lkZWJhcicpO1xuICAgICAgICBpZiAoc2NyZWVuLndpZHRoIDw9IDEwMjQpIG1vYmlsZVRvZ2dsZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdoaWRkZW4nKTtcbiAgICB9XG4gICAgXG4gICAgY29uc3QgdG9nZ2xlQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJhcnMtaWNvbicpO1xuICAgIHRvZ2dsZUJ0bi5mb3JFYWNoKGJ1dHRvbiA9PiB7XG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRvZ2dsZVNpZGViYXIpO1xuICAgIH0pOyAgICAgICAgXG59KSgpO1xuXG5jb25zdCBwcm9qZWN0Q29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgZGVsZXRlUHJvamVjdCgpO1xuICAgIGNvbnN0IGFkZFByb2plY3RCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1hZGQtcHJvamVjdF0nKTtcbiAgICBhZGRQcm9qZWN0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYWRkUHJvamVjdCk7XG4gICAgXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdlZGl0LXByb2plY3QnKSkge1xuICAgICAgICAgICAgZWRpdFByb2plY3QoZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn0pKCk7XG5cbmNvbnN0IHRhc2tDb250cm9sbGVyID0gKCgpID0+IHtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGlmIChlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3Rhc2staXRlbScpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrRWxlbWVudCA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICB0b2dnbGVUYXNrKHRhc2tFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZGQtdGFzaycpKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYWRkIHRhc2snKTtcbiAgICAgICAgICAgIGFkZFRhc2tUb0RPTSgpO1xuICAgICAgICB9XG5cbiAgICB9KTtcbn0pKCk7XG4vKlxudXBkYXRlU3RvcmFnZS5zYXZlUHJvamVjdCh7XG4gICAgcHJvamVjdE5hbWU6IFwiUHJvamVjdCAxXCIsXG4gICAgdGFza3M6IFtbXCJGaW5pc2ggdG9kbyBsaXN0XCIsIFwibG93XCIsIFwiZHVlRGF0ZVwiLCBmYWxzZV0sIFtcIkRvIHNvbWV0aGluZ1wiLCBcIm1lZGl1bVwiLCBcImR1ZURhdGVcIiwgdHJ1ZV0sIFtcIkRvIHNvbWV0aGluZyBlbHNlXCIsIFwiaGlnaFwiLCBcImR1ZURhdGVcIiwgZmFsc2VdXSxcbiAgICBpZDogODE2MDg5XG59KTtcbiovXG4vL3N0b3JhZ2UuZGVsZXRlUHJvamVjdCg1ODE4NDApOyIsImltcG9ydCBjcmVhdGVFbGVtZW50cyBmcm9tIFwiLi9jcmVhdGVET01FbGVtZW50c1wiO1xuXG5jb25zdCB0b2dnbGVUYXNrID0gKHRhc2tFbGVtZW50KSA9PiB7XG4gICAgdGFza0VsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnY29tcGxldGVkJyk7XG59XG5cbi8vIFRPRE86IEJlZm9yZSBjb250aW51aW5nIHdpdGggdGhpcyBzdHVmZiwgZ2V0IHRoZSBwcm9qZWN0IGRpdiBzdHVmZiBvbiBub3RlcGFkIHdoZW4gdXNlciBhZGRzIG5ldyBwcm9qZWN0XG5jb25zdCBhZGRUYXNrVG9ET00gPSAoKSA9PiB7XG4gICAgLy8gY3JlYXRlIHNwYW4gd2l0aCBjbGFzcyAndGFzay1pdGVtJ1xuICAgIC8vIHNwYW4gc2hvdWxkIGdldCB1c2VyIGlucHV0IGFuZCBzYXZlIGl0IGFzIHNwYW4udGV4dENvbnRlbnRcbiAgICAvLyBjcmVhdGUgc3BhbiB3aXRoIGNsYXNzICdpY29ucydcbiAgICAvLyBhZGQgZWRpdCBhbmQgZGVsZXRlIGljb25zXG5cbiAgICBjb25zdCB0YXNrU3BhbiA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZVNwYW5FbGVtZW50KCd0YXNrLWl0ZW0nKTtcbiAgICB0YXNrU3Bhbi50ZXh0Q29udGVudCA9ICd1c2VyIGlucHV0JzsgLy8gVE9ETzogR2V0IHVzZXIgaW5wdXRcblxuICAgIGNvbnN0IGljb25TcGFuID0gY3JlYXRlRWxlbWVudHMuY3JlYXRlU3BhbkVsZW1lbnQoJ2ljb25zJyk7XG4gICAgLy8gVE9ETzogQ2FuJ3QgYWRkIHNlY29uZCBjbGFzcyB3aXRoIHRoaXMgbWV0aG9kIHNvIGZpZ3VyZSBvdXQgYW5vdGhlciB3YXkgdG8gYWRkIGEgc2Vjb25kIGNsYXNzIHRvIGljb25zXG4gICAgY29uc3QgZWRpdEljb24gPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9lZGl0LWljb24uc3ZnJywgJ2VkaXQtaWNvbicpO1xuICAgIGNvbnN0IGRlbGV0ZUljb24gPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9kZWxldGUtaWNvbi5zdmcnLCAnZGVsZXRlLWljb24nKTtcblxuICAgIGljb25TcGFuLmFwcGVuZChlZGl0SWNvbiwgZGVsZXRlSWNvbik7XG4gICAgdGFza1NwYW4uYXBwZW5kKGljb25TcGFuKTtcblxuICAgIHJldHVybiB0YXNrU3Bhbjtcbn1cblxuY29uc3QgYWRkRHVlRGF0ZVRvRE9NID0gKCkgPT4ge1xuICAgIC8vIGNyZWF0ZSBzcGFuIHdpdGggY2xhc3MgJ2R1ZS1kYXRlJ1xuICAgIC8vIGNyZWF0ZSBwcmlvcml0eSBpY29uIHdpdGggY2xhc3MgJ3ByaW9yaXR5LWljb24gcHJpb3JpdHktbG93J1xuICAgIC8vIGNyZWF0ZSBzcGFuIHdpdGggY2xhc3MgJ2RhdGUnIGFuZCBzZXQgdGV4dENvbnRlbnQgdG8gZGVmYXVsdCBkYXRlIChjdXJyZW50IGRhdGUpXG4gICAgLy8gY3JlYXRlIGNhbGVuZGFyIGljb24gd2l0aCBjbGFzcyAnY2FsZW5kYXItaWNvbidcbiAgICBjb25zdCBjcmVhdGVEdWVEYXRlID0gY3JlYXRlRWxlbWVudHMoKTtcblxuICAgIC8vY29uc3QgZHVlRGF0ZVNwYW4gPSBjcmVhdGVEdWVEYXRlLlxufVxuXG5jb25zdCBhZGRUYXNrID0gKCkgPT4ge1xuICAgIC8vIGNyZWF0ZSBsaSB3aXRoIGNsYXNzICd0YXNrJyBhbmQgYXBwZW5kIGV2ZXJ5dGhpbmcgdG8gaXRcblxufVxuXG5leHBvcnQge1xuICAgIHRvZ2dsZVRhc2ssXG4gICAgYWRkVGFza1RvRE9NLFxufSJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJnZXRQcm9qZWN0cyIsIkpTT04iLCJwYXJzZSIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJzYXZlUHJvamVjdCIsInByb2plY3RUb1NhdmUiLCJwcm9qZWN0cyIsImV4aXN0aW5nIiwiZmluZCIsInByb2plY3QiLCJpZCIsInByb2plY3ROYW1lIiwidGFza3MiLCJkdWVEYXRlIiwicHJpb3JpdHkiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJwdXNoIiwic2V0SXRlbSIsInN0cmluZ2lmeSIsImRlbGV0ZVByb2plY3QiLCJ1cGRhdGVkUHJvamVjdExpc3QiLCJmaWx0ZXIiLCJvblByb2plY3RTZWxlY3QiLCJwcm9qZWN0SWQiLCJzZWxlY3RlZFByb2plY3QiLCJ1cGRhdGVBY3RpdmVUYWIiLCJvblByb2plY3RBZGQiLCJuZXdQcm9qZWN0IiwidXBkYXRlUHJvamVjdExpc3QiLCJjcmVhdGVMaXN0RWxlbWVudCIsImh0bWxDbGFzcyIsImxpIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic2V0QXR0cmlidXRlIiwiY3JlYXRlU3BhbkVsZW1lbnQiLCJzcGFuIiwiY2xhc3NMaXN0IiwiYWRkIiwiY3JlYXRlSW1hZ2VFbGVtZW50Iiwic3JjIiwiaW1nIiwiY3JlYXRlSW5wdXRGaWVsZCIsInBsYWNlaG9sZGVyVGV4dCIsInVzZXJJbnB1dCIsInJlcXVpcmVkIiwiY3JlYXRlRm9ybSIsImNyZWF0ZURpdiIsImRpdiIsImNyZWF0ZUljb25TcGFuIiwidmlldyIsImljb25TcGFuIiwiZWRpdEljb24iLCJkZWxldGVJY29uIiwiYXBwZW5kIiwiYWRkUHJvamVjdFRvU2lkZWJhciIsInByb2plY3RzQ29udGFpbmVyIiwicXVlcnlTZWxlY3RvciIsInByb2plY3RMaXN0RWxlbWVudCIsInByb2plY3RJbnB1dEZvcm0iLCJwcm9qZWN0TmFtZUlucHV0IiwiaW5zZXJ0QmVmb3JlIiwibGFzdEVsZW1lbnRDaGlsZCIsImFkZFByb2plY3RUb05vdGVwYWQiLCJwcm9qZWN0TGlzdCIsImN1cnJlbnRQcm9qZWN0TnVtYmVyIiwiY2hpbGRFbGVtZW50Q291bnQiLCJjaGlsZHJlbiIsInRleHRDb250ZW50Iiwibm90ZXBhZCIsInByb2plY3REaXYiLCJza2lwTGluZSIsInByb2plY3RIZWFkaW5nIiwiaDIiLCJoMyIsInRhc2tzQ29udGFpbmVyIiwiYWRkVGFza0xpc3RFbGVtZW50IiwiYWRkVGFza1NwYW4iLCJhZGRJY29uIiwiX2NyZWF0ZVByb2plY3RJdGVtSFRNTCIsIm5hbWUiLCJwcm9qZWN0SXRlbSIsInByb2plY3RzTGlzdENvbnRhaW5lciIsImFkZFByb2plY3RCdG4iLCJzbGljZSIsImZvckVhY2giLCJpdGVtIiwiY29udGFpbnMiLCJyZW1vdmUiLCJodG1sIiwicXVlcnlTZWxlY3RvckFsbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJkYXRhc2V0IiwicHJvamVjdE9iamVjdCIsInByb2plY3ROYW1lU3BhbiIsImNvbnNvbGUiLCJsb2ciLCJhd2FpdGluZ0lucHV0IiwiaGFuZGxlVXNlcklucHV0IiwicGFyZW50RWxlbWVudCIsInByb2plY3RTcGFuIiwidHJpbSIsImNoaWxkTm9kZXMiLCJhZGRQcm9qZWN0IiwiaW5wdXRGb3JtIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJlIiwicHJldmVudERlZmF1bHQiLCJ3aW5kb3ciLCJvbmxvYWQiLCJtb2JpbGVUb2dnbGVCdG4iLCJnZXRFbGVtZW50QnlJZCIsInNjcmVlbiIsIndpZHRoIiwidG9nZ2xlIiwic2lkZWJhciIsInRvZ2dsZVNpZGViYXIiLCJidXR0b24iLCJ0YXJnZXQiLCJjbG9zZXN0IiwiaW5wdXRGaWVsZCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJlZGl0UHJvamVjdCIsInRhc2tTcGFuIiwiYWRkVGFza1RvRE9NIl0sInNvdXJjZVJvb3QiOiIifQ==