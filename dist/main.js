(()=>{"use strict";const e=e=>{const t=document.createElement("li");return t.setAttribute("class",e),t},t=e=>{const t=document.createElement("span");return t.classList.add(e),t},n=(e,t)=>{const n=document.createElement("img");return n.classList.add(t),n.setAttribute("src",e),n.setAttribute("draggable","false"),n},s=e=>{const t=document.createElement("input");return t.setAttribute("type","text"),t.setAttribute("placeholder",e),t.setAttribute("id","user-input"),t.required=!0,t},c=()=>document.createElement("form"),r=()=>null!=document.querySelector("#user-input"),i=()=>{const e=document.querySelector("#user-input"),n=e.parentElement,s=n.parentElement,c=t("project-name");n.addEventListener("submit",(function(t){t.preventDefault();const n=e.value;if(n.match(/^[\s]/))return alert("Project name cannot start with a space");c.textContent=n,e.parentElement.remove(),s.insertBefore(c,s.childNodes[0])}))},o=()=>{r()||((()=>{const r=document.querySelector(".project-list"),i=e("project-item"),o=c(),a=s("Project name...");o.append(a);const d=t("icons"),l=n("images/edit-icon.svg","edit-icon"),m=n("images/delete-icon.svg","delete-icon");l.classList.add("edit-project"),m.classList.add("delete-project"),d.append(l,m),i.append(o,d),r.insertBefore(i,r.lastElementChild)})(),i())};(()=>{const e=document.getElementById("bars-icon-mobile");screen.width<=1024&&e.classList.contains("hidden")&&e.classList.toggle("hidden");const t=document.getElementById("sidebar"),n=()=>{t.classList.toggle("toggle-sidebar"),screen.width<=1024&&e.classList.toggle("hidden")};document.querySelectorAll(".bars-icon").forEach((e=>{e.addEventListener("click",n)}))})(),document.addEventListener("click",(e=>{e.target.closest(".delete-project")&&e.target.closest(".project-item").remove()})),document.querySelector("[data-add-project]").addEventListener("click",o),document.addEventListener("click",(e=>{e.target.classList.contains("edit-project")&&(e=>{if(r())return;const t=c(),n=s("Project name..."),o=e.target.parentElement.previousElementSibling;n.value=o.textContent,o.remove(),t.append(n);const a=e.target.closest(".project-item");a.insertBefore(t,a.childNodes[0]),i()})(e)})),document.addEventListener("click",(e=>{e.target.classList.contains("task-item")&&e.target.parentElement.classList.toggle("completed")})),document.addEventListener("click",(e=>{e.target.classList.contains("add-task")&&(console.log("add task"),(()=>{const e=t("task-item");e.textContent="user input";const s=t("icons"),c=n("images/edit-icon.svg","edit-icon"),r=n("images/delete-icon.svg","delete-icon");s.append(c,r),e.append(s)})())}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVFELEVBQVlJLFlBQy9CSixFQUFZSyxTQUNaWixFQUFVb0IsT0FBT21CLEdBRWpCLE1BQU1yQyxFQUFjRyxFQUFFZ0MsT0FBT0MsUUFBUSxpQkFDckNwQyxFQUFZVyxhQUFhYixFQUFXRSxFQUFZWSxXQUFXLElBRTNEZixLQ2xEUTBDLENBQVlwQyxNQU1wQm5CLFNBQVNrQixpQkFBaUIsU0FBVUMsSUFDNUJBLEVBQUVnQyxPQUFPL0MsVUFBVXdDLFNBQVMsY0FDUnpCLEVBQUVnQyxPQUFPcEMsY0NwQ3pCWCxVQUFVeUMsT0FBTyxnQkR5QzdCN0MsU0FBU2tCLGlCQUFpQixTQUFVQyxJQUM1QkEsRUFBRWdDLE9BQU8vQyxVQUFVd0MsU0FBUyxjQUM1QlksUUFBUUMsSUFBSSxZQ3ZDSCxNQU1qQixNQUFNQyxFQUFXLEVBQWlDLGFBQ2xEQSxFQUFTakMsWUFBYyxhQUV2QixNQUFNVSxFQUFXLEVBQWlDLFNBRTVDQyxFQUFXLEVBQWtDLHVCQUF3QixhQUNyRUMsRUFBYSxFQUFrQyx5QkFBMEIsZUFFL0VGLEVBQVNELE9BQU9FLEVBQVVDLEdBQzFCcUIsRUFBU3hCLE9BQU9DLElEeUJSd0IsUSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9jcmVhdGVET01FbGVtZW50cy5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdHMuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy90YXNrcy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBET00gRWxlbWVudHMgRmFjdG9yeSBGdW5jdGlvblxuY29uc3QgY3JlYXRlRWxlbWVudHMgPSAoKSA9PiB7XG4gICAgXG4gICAgY29uc3QgY3JlYXRlTGlzdEVsZW1lbnQgPSAoaHRtbENsYXNzKSA9PiB7XG4gICAgICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgbGkuc2V0QXR0cmlidXRlKCdjbGFzcycsIGh0bWxDbGFzcyk7XG4gICAgICAgIHJldHVybiBsaTtcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVTcGFuRWxlbWVudCA9IChodG1sQ2xhc3MpID0+IHtcbiAgICAgICAgY29uc3Qgc3BhbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgc3Bhbi5jbGFzc0xpc3QuYWRkKGh0bWxDbGFzcyk7XG4gICAgICAgIHJldHVybiBzcGFuO1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZUltYWdlRWxlbWVudCA9IChzcmMsIGh0bWxDbGFzcykgPT4ge1xuICAgICAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICAgICAgaW1nLmNsYXNzTGlzdC5hZGQoaHRtbENsYXNzKTtcbiAgICAgICAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgc3JjKTtcbiAgICAgICAgaW1nLnNldEF0dHJpYnV0ZSgnZHJhZ2dhYmxlJywgJ2ZhbHNlJyk7XG4gICAgICAgIHJldHVybiBpbWc7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGNyZWF0ZUZvcm0gPSAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0Rm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKTtcbiAgICAgICAgcmV0dXJuIGlucHV0Rm9ybTtcbiAgICB9XG5cbiAgICBjb25zdCBjcmVhdGVJbnB1dEZpZWxkID0gKHBsYWNlaG9sZGVyVGV4dCkgPT4ge1xuICAgICAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICB1c2VySW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgICAgICAgdXNlcklucHV0LnNldEF0dHJpYnV0ZSgncGxhY2Vob2xkZXInLCBwbGFjZWhvbGRlclRleHQpO1xuICAgICAgICB1c2VySW5wdXQuc2V0QXR0cmlidXRlKCdpZCcsICd1c2VyLWlucHV0Jyk7XG4gICAgICAgIHVzZXJJbnB1dC5yZXF1aXJlZCA9IHRydWU7XG5cbiAgICAgICAgcmV0dXJuIHVzZXJJbnB1dDtcbiAgICB9XG5cbiAgICByZXR1cm4ge2NyZWF0ZUxpc3RFbGVtZW50LCBjcmVhdGVTcGFuRWxlbWVudCwgY3JlYXRlSW1hZ2VFbGVtZW50LCBjcmVhdGVJbnB1dEZpZWxkLCBjcmVhdGVGb3JtfVxufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVFbGVtZW50cygpOyIsImltcG9ydCBjcmVhdGVFbGVtZW50cyBmcm9tIFwiLi9jcmVhdGVET01FbGVtZW50c1wiO1xuXG5jb25zdCBjcmVhdGVQcm9qZWN0RE9NID0gKCkgPT4ge1xuICAgIGNvbnN0IHByb2plY3RzQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2plY3QtbGlzdCcpO1xuXG4gICAgY29uc3QgcHJvamVjdExpc3RFbGVtZW50ID0gIGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZUxpc3RFbGVtZW50KCdwcm9qZWN0LWl0ZW0nKTtcbiAgICBcbiAgICBjb25zdCBwcm9qZWN0SW5wdXRGb3JtID0gY3JlYXRlRWxlbWVudHMuY3JlYXRlRm9ybSgpO1xuICAgIGNvbnN0IHByb2plY3ROYW1lSW5wdXQgPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVJbnB1dEZpZWxkKCdQcm9qZWN0IG5hbWUuLi4nKTtcbiAgICBwcm9qZWN0SW5wdXRGb3JtLmFwcGVuZChwcm9qZWN0TmFtZUlucHV0KTtcblxuICAgIGNvbnN0IG5ld1Byb2plY3QgPSAobmFtZSkgPT4ge1xuICAgICAgICBjb25zdCBuZXdQcm9qZWN0ID0gY3JlYXRlRWxlbWVudHMuY3JlYXRlU3BhbkVsZW1lbnQoJ3Byb2plY3QtbmFtZScpO1xuICAgICAgICBuZXdQcm9qZWN0LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgcmV0dXJuIG5ld1Byb2plY3Q7XG4gICAgfVxuXG4gICAgY29uc3QgaWNvblNwYW4gPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVTcGFuRWxlbWVudCgnaWNvbnMnKTtcbiAgICBjb25zdCBlZGl0SWNvbiA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZUltYWdlRWxlbWVudCgnaW1hZ2VzL2VkaXQtaWNvbi5zdmcnLCAnZWRpdC1pY29uJyk7XG4gICAgY29uc3QgZGVsZXRlSWNvbiA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZUltYWdlRWxlbWVudCgnaW1hZ2VzL2RlbGV0ZS1pY29uLnN2ZycsICdkZWxldGUtaWNvbicpO1xuICAgIFxuICAgIGVkaXRJY29uLmNsYXNzTGlzdC5hZGQoJ2VkaXQtcHJvamVjdCcpO1xuICAgIGRlbGV0ZUljb24uY2xhc3NMaXN0LmFkZCgnZGVsZXRlLXByb2plY3QnKTtcbiAgICBcbiAgICBpY29uU3Bhbi5hcHBlbmQoZWRpdEljb24sIGRlbGV0ZUljb24pO1xuICAgIHByb2plY3RMaXN0RWxlbWVudC5hcHBlbmQocHJvamVjdElucHV0Rm9ybSwgaWNvblNwYW4pO1xuICAgIHByb2plY3RzQ29udGFpbmVyLmluc2VydEJlZm9yZShwcm9qZWN0TGlzdEVsZW1lbnQsIHByb2plY3RzQ29udGFpbmVyLmxhc3RFbGVtZW50Q2hpbGQpO1xuXG4gICAgcmV0dXJuIHtuZXdQcm9qZWN0LCBwcm9qZWN0TmFtZUlucHV0LCBwcm9qZWN0SW5wdXRGb3JtLCBpY29uU3BhbiwgcHJvamVjdExpc3RFbGVtZW50fVxufVxuXG5jb25zdCBhd2FpdGluZ0lucHV0ID0gKCkgPT4ge1xuICAgIGNvbnN0IHVzZXJJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN1c2VyLWlucHV0Jyk7XG4gICAgaWYgKHVzZXJJbnB1dCAhPSBudWxsKSByZXR1cm4gdHJ1ZTtcblxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuY29uc3QgaGFuZGxlVXNlcklucHV0ID0gKCkgPT4geyBcbiAgICBjb25zdCB1c2VySW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdXNlci1pbnB1dCcpXG4gICAgY29uc3QgaW5wdXRGb3JtID0gdXNlcklucHV0LnBhcmVudEVsZW1lbnQ7XG4gICAgY29uc3QgcHJvamVjdEl0ZW0gPSBpbnB1dEZvcm0ucGFyZW50RWxlbWVudDtcbiAgICBjb25zdCBwcm9qZWN0U3BhbiA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZVNwYW5FbGVtZW50KCdwcm9qZWN0LW5hbWUnKTtcblxuICAgIGlucHV0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IHByb2plY3ROYW1lID0gdXNlcklucHV0LnZhbHVlO1xuICAgICAgICBpZiAocHJvamVjdE5hbWUubWF0Y2goL15bXFxzXS8pKSByZXR1cm4gYWxlcnQoJ1Byb2plY3QgbmFtZSBjYW5ub3Qgc3RhcnQgd2l0aCBhIHNwYWNlJyk7XG4gICAgICAgIHByb2plY3RTcGFuLnRleHRDb250ZW50ID0gcHJvamVjdE5hbWU7XG4gICAgICAgIHVzZXJJbnB1dC5wYXJlbnRFbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICBwcm9qZWN0SXRlbS5pbnNlcnRCZWZvcmUocHJvamVjdFNwYW4sIHByb2plY3RJdGVtLmNoaWxkTm9kZXNbMF0pOyBcbiAgICB9KTtcbn1cblxuY29uc3QgYWRkUHJvamVjdCA9ICgpID0+IHtcbiAgICBpZiAoYXdhaXRpbmdJbnB1dCgpKSByZXR1cm47XG4gICAgY3JlYXRlUHJvamVjdERPTSgpO1xuICAgIGhhbmRsZVVzZXJJbnB1dCgpO1xufVxuXG5jb25zdCBkZWxldGVQcm9qZWN0ID0gKCkgPT4ge1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsb3Nlc3QoJy5kZWxldGUtcHJvamVjdCcpKSB7XG4gICAgICAgICAgICBlLnRhcmdldC5jbG9zZXN0KCcucHJvamVjdC1pdGVtJykucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICB9KTtcbn1cbiBcbmNvbnN0IGVkaXRQcm9qZWN0ID0gKGUpID0+IHtcbiAgICBpZiAoYXdhaXRpbmdJbnB1dCgpKSByZXR1cm47XG4gICAgY29uc3QgaW5wdXRGb3JtID0gY3JlYXRlRWxlbWVudHMuY3JlYXRlRm9ybSgpO1xuICAgIGNvbnN0IGlucHV0RmllbGQgPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVJbnB1dEZpZWxkKCdQcm9qZWN0IG5hbWUuLi4nKTtcbiAgICBjb25zdCBwcm9qZWN0TmFtZSA9IGUudGFyZ2V0LnBhcmVudEVsZW1lbnQucHJldmlvdXNFbGVtZW50U2libGluZztcblxuICAgIGlucHV0RmllbGQudmFsdWUgPSBwcm9qZWN0TmFtZS50ZXh0Q29udGVudDtcbiAgICBwcm9qZWN0TmFtZS5yZW1vdmUoKTtcbiAgICBpbnB1dEZvcm0uYXBwZW5kKGlucHV0RmllbGQpO1xuXG4gICAgY29uc3QgcHJvamVjdEl0ZW0gPSBlLnRhcmdldC5jbG9zZXN0KCcucHJvamVjdC1pdGVtJyk7XG4gICAgcHJvamVjdEl0ZW0uaW5zZXJ0QmVmb3JlKGlucHV0Rm9ybSwgcHJvamVjdEl0ZW0uY2hpbGROb2Rlc1swXSk7XG5cbiAgICBoYW5kbGVVc2VySW5wdXQoKTtcbn1cblxuZXhwb3J0IHsgXG4gICAgYWRkUHJvamVjdCxcbiAgICBkZWxldGVQcm9qZWN0LFxuICAgIGVkaXRQcm9qZWN0LFxuICAgIGNyZWF0ZUVsZW1lbnRzXG59IiwiaW1wb3J0IHthZGRQcm9qZWN0LCBkZWxldGVQcm9qZWN0LCBlZGl0UHJvamVjdH0gZnJvbSBcIi4vcHJvamVjdHNcIjtcbmltcG9ydCB7dG9nZ2xlVGFzaywgYWRkVGFza1RvRE9NfSBmcm9tIFwiLi90YXNrc1wiO1xuXG4vLyBTaWRlYmFyIE1vZHVsZVxuY29uc3Qgc2lkZWJhckNvbnRyb2xsZXIgPSAoKCkgPT4ge1xuXG4gICAgY29uc3QgbW9iaWxlVG9nZ2xlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2JhcnMtaWNvbi1tb2JpbGUnKTtcbiAgICBpZiAoc2NyZWVuLndpZHRoIDw9IDEwMjQgJiYgbW9iaWxlVG9nZ2xlQnRuLmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuJykpIHtcbiAgICAgICAgbW9iaWxlVG9nZ2xlQnRuLmNsYXNzTGlzdC50b2dnbGUoJ2hpZGRlbicpO1xuICAgIH1cblxuICAgIGNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2lkZWJhcicpO1xuICAgIFxuICAgIGNvbnN0IHRvZ2dsZVNpZGViYXIgPSAoKSA9PiB7XG4gICAgICAgIHNpZGViYXIuY2xhc3NMaXN0LnRvZ2dsZSgndG9nZ2xlLXNpZGViYXInKTtcbiAgICAgICAgaWYgKHNjcmVlbi53aWR0aCA8PSAxMDI0KSBtb2JpbGVUb2dnbGVCdG4uY2xhc3NMaXN0LnRvZ2dsZSgnaGlkZGVuJyk7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IHRvZ2dsZUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5iYXJzLWljb24nKTtcbiAgICB0b2dnbGVCdG4uZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0b2dnbGVTaWRlYmFyKTtcbiAgICB9KTsgICAgICAgIFxufSkoKTtcblxuY29uc3QgcHJvamVjdENvbnRyb2xsZXIgPSAoKCkgPT4ge1xuICAgIGRlbGV0ZVByb2plY3QoKTtcbiAgICBjb25zdCBhZGRQcm9qZWN0QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtYWRkLXByb2plY3RdJyk7XG4gICAgYWRkUHJvamVjdEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFkZFByb2plY3QpO1xuICAgIFxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZWRpdC1wcm9qZWN0JykpIHtcbiAgICAgICAgICAgIGVkaXRQcm9qZWN0KGUpO1xuICAgICAgICB9XG4gICAgfSk7XG59KSgpO1xuXG5jb25zdCB0YXNrQ29udHJvbGxlciA9ICgoKSA9PiB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXNrLWl0ZW0nKSkge1xuICAgICAgICAgICAgY29uc3QgdGFza0VsZW1lbnQgPSBlLnRhcmdldC5wYXJlbnRFbGVtZW50O1xuICAgICAgICAgICAgdG9nZ2xlVGFzayh0YXNrRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYWRkLXRhc2snKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ2FkZCB0YXNrJyk7XG4gICAgICAgICAgICBhZGRUYXNrVG9ET00oKTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG59KSgpOyIsImltcG9ydCBjcmVhdGVFbGVtZW50cyBmcm9tIFwiLi9jcmVhdGVET01FbGVtZW50c1wiO1xuXG5jb25zdCB0b2dnbGVUYXNrID0gKHRhc2tFbGVtZW50KSA9PiB7XG4gICAgdGFza0VsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnY29tcGxldGVkJyk7XG59XG5cbi8vIFRPRE86IEJlZm9yZSBjb250aW51aW5nIHdpdGggdGhpcyBzdHVmZiwgZ2V0IHRoZSBwcm9qZWN0IGRpdiBzdHVmZiBvbiBub3RlcGFkIHdoZW4gdXNlciBhZGRzIG5ldyBwcm9qZWN0XG5jb25zdCBhZGRUYXNrVG9ET00gPSAoKSA9PiB7XG4gICAgLy8gY3JlYXRlIHNwYW4gd2l0aCBjbGFzcyAndGFzay1pdGVtJ1xuICAgIC8vIHNwYW4gc2hvdWxkIGdldCB1c2VyIGlucHV0IGFuZCBzYXZlIGl0IGFzIHNwYW4udGV4dENvbnRlbnRcbiAgICAvLyBjcmVhdGUgc3BhbiB3aXRoIGNsYXNzICdpY29ucydcbiAgICAvLyBhZGQgZWRpdCBhbmQgZGVsZXRlIGljb25zXG5cbiAgICBjb25zdCB0YXNrU3BhbiA9IGNyZWF0ZUVsZW1lbnRzLmNyZWF0ZVNwYW5FbGVtZW50KCd0YXNrLWl0ZW0nKTtcbiAgICB0YXNrU3Bhbi50ZXh0Q29udGVudCA9ICd1c2VyIGlucHV0JzsgLy8gVE9ETzogR2V0IHVzZXIgaW5wdXRcblxuICAgIGNvbnN0IGljb25TcGFuID0gY3JlYXRlRWxlbWVudHMuY3JlYXRlU3BhbkVsZW1lbnQoJ2ljb25zJyk7XG4gICAgLy8gVE9ETzogQ2FuJ3QgYWRkIHNlY29uZCBjbGFzcyB3aXRoIHRoaXMgbWV0aG9kIHNvIGZpZ3VyZSBvdXQgYW5vdGhlciB3YXkgdG8gYWRkIGEgc2Vjb25kIGNsYXNzIHRvIGljb25zXG4gICAgY29uc3QgZWRpdEljb24gPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9lZGl0LWljb24uc3ZnJywgJ2VkaXQtaWNvbicpO1xuICAgIGNvbnN0IGRlbGV0ZUljb24gPSBjcmVhdGVFbGVtZW50cy5jcmVhdGVJbWFnZUVsZW1lbnQoJ2ltYWdlcy9kZWxldGUtaWNvbi5zdmcnLCAnZGVsZXRlLWljb24nKTtcblxuICAgIGljb25TcGFuLmFwcGVuZChlZGl0SWNvbiwgZGVsZXRlSWNvbik7XG4gICAgdGFza1NwYW4uYXBwZW5kKGljb25TcGFuKTtcblxuICAgIHJldHVybiB0YXNrU3Bhbjtcbn1cblxuY29uc3QgYWRkRHVlRGF0ZVRvRE9NID0gKCkgPT4ge1xuICAgIC8vIGNyZWF0ZSBzcGFuIHdpdGggY2xhc3MgJ2R1ZS1kYXRlJ1xuICAgIC8vIGNyZWF0ZSBwcmlvcml0eSBpY29uIHdpdGggY2xhc3MgJ3ByaW9yaXR5LWljb24gcHJpb3JpdHktbG93J1xuICAgIC8vIGNyZWF0ZSBzcGFuIHdpdGggY2xhc3MgJ2RhdGUnIGFuZCBzZXQgdGV4dENvbnRlbnQgdG8gZGVmYXVsdCBkYXRlIChjdXJyZW50IGRhdGUpXG4gICAgLy8gY3JlYXRlIGNhbGVuZGFyIGljb24gd2l0aCBjbGFzcyAnY2FsZW5kYXItaWNvbidcbiAgICBjb25zdCBjcmVhdGVEdWVEYXRlID0gY3JlYXRlRWxlbWVudHMoKTtcblxuICAgIC8vY29uc3QgZHVlRGF0ZVNwYW4gPSBjcmVhdGVEdWVEYXRlLlxufVxuXG5jb25zdCBhZGRUYXNrID0gKCkgPT4ge1xuICAgIC8vIGNyZWF0ZSBsaSB3aXRoIGNsYXNzICd0YXNrJyBhbmQgYXBwZW5kIGV2ZXJ5dGhpbmcgdG8gaXRcblxufVxuXG5leHBvcnQge1xuICAgIHRvZ2dsZVRhc2ssXG4gICAgYWRkVGFza1RvRE9NLFxufSJdLCJuYW1lcyI6WyJodG1sQ2xhc3MiLCJsaSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsInNwYW4iLCJjbGFzc0xpc3QiLCJhZGQiLCJzcmMiLCJpbWciLCJwbGFjZWhvbGRlclRleHQiLCJ1c2VySW5wdXQiLCJyZXF1aXJlZCIsImF3YWl0aW5nSW5wdXQiLCJxdWVyeVNlbGVjdG9yIiwiaGFuZGxlVXNlcklucHV0IiwiaW5wdXRGb3JtIiwicGFyZW50RWxlbWVudCIsInByb2plY3RJdGVtIiwicHJvamVjdFNwYW4iLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInByZXZlbnREZWZhdWx0IiwicHJvamVjdE5hbWUiLCJ2YWx1ZSIsIm1hdGNoIiwiYWxlcnQiLCJ0ZXh0Q29udGVudCIsInJlbW92ZSIsImluc2VydEJlZm9yZSIsImNoaWxkTm9kZXMiLCJhZGRQcm9qZWN0IiwicHJvamVjdHNDb250YWluZXIiLCJwcm9qZWN0TGlzdEVsZW1lbnQiLCJwcm9qZWN0SW5wdXRGb3JtIiwicHJvamVjdE5hbWVJbnB1dCIsImFwcGVuZCIsImljb25TcGFuIiwiZWRpdEljb24iLCJkZWxldGVJY29uIiwibGFzdEVsZW1lbnRDaGlsZCIsImNyZWF0ZVByb2plY3RET00iLCJtb2JpbGVUb2dnbGVCdG4iLCJnZXRFbGVtZW50QnlJZCIsInNjcmVlbiIsIndpZHRoIiwiY29udGFpbnMiLCJ0b2dnbGUiLCJzaWRlYmFyIiwidG9nZ2xlU2lkZWJhciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYnV0dG9uIiwidGFyZ2V0IiwiY2xvc2VzdCIsImlucHV0RmllbGQiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiZWRpdFByb2plY3QiLCJjb25zb2xlIiwibG9nIiwidGFza1NwYW4iLCJhZGRUYXNrVG9ET00iXSwic291cmNlUm9vdCI6IiJ9